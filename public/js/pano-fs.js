var $canvas, HEIGHT, TAG_HEIGHT, WIDTH, glsl, onMouseMove, pitch, rotation, tag, x, y;

WIDTH = 1664;

HEIGHT = 832;

TAG_HEIGHT = 40;

tag = null;

glsl = null;

x = y = rotation = pitch = null;

$canvas = null;

$(function() {
  var ctx, original;
  $canvas = $('#pano');
  $canvas.on({
    'mousemove': onMouseMove
  });
  original = $('#original')[0];
  original.src = "./assets/pano.png";
  original.onload = function() {
    if (glsl != null) {
      glsl.set('original', original);
      return glsl.syncAll();
    }
  };
  tag = document.createElement('canvas');
  tag.width = WIDTH;
  tag.height = TAG_HEIGHT;
  ctx = tag.getContext('2d');
  ctx.fillStyle = '#0000FF';
  ctx.fillRect(0, 0, WIDTH, TAG_HEIGHT);
  glsl = Glsl({
    canvas: $canvas[0],
    fragment: $('#pano-rotation')[0].textContent,
    variables: {
      rotation: 0.0,
      pitch: 0.0,
      original: original,
      tag: tag
    }
  });
  glsl.setSize(WIDTH, HEIGHT + TAG_HEIGHT);
  return glsl.start();
});

onMouseMove = function(e) {
  x = e.pageX / WIDTH;
  y = e.pageY / (HEIGHT + TAG_HEIGHT);
  rotation = x * Math.PI * 2;
  pitch = (y - 0.5) * Math.PI;
  glsl.set('rotation', rotation);
  glsl.set('pitch', pitch);
  return glsl.syncAll();
};

//# sourceMappingURL=data:application/json;base64,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SSxDQUFDLEdBQUwsQ0FBUyxPQUFULEVBQWtCLEtBQWxCLENBUEEsQ0FBQTtTQVFBLElBQUksQ0FBQyxPQUFMLENBQUEsRUFUYTtBQUFBLENBN0NkLENBQUEiLCJmaWxlIjoicGFuby1mcy5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIldJRFRIID0gMTY2NFxuSEVJR0hUID0gODMyXG5UQUdfSEVJR0hUID0gNDBcblxuXG50YWcgPSBudWxsXG5nbHNsID0gbnVsbFxuXG54ID0geSA9IHJvdGF0aW9uID0gcGl0Y2ggPSBudWxsXG5cbiRjYW52YXMgPSBudWxsXG5cbiQgLT5cblx0JGNhbnZhcyA9ICQoJyNwYW5vJylcblxuXHQkY2FudmFzLm9uXG5cdFx0J21vdXNlbW92ZSc6IG9uTW91c2VNb3ZlXG5cblx0b3JpZ2luYWwgPSAkKCcjb3JpZ2luYWwnKVswXVxuXHRvcmlnaW5hbC5zcmMgPSBcIi4vYXNzZXRzL3Bhbm8ucG5nXCJcblx0b3JpZ2luYWwub25sb2FkID0gLT5cblx0XHRpZiBnbHNsP1xuXHRcdFx0Z2xzbC5zZXQoJ29yaWdpbmFsJywgb3JpZ2luYWwpXG5cdFx0XHRnbHNsLnN5bmNBbGwoKVxuXG5cdHRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpXG5cdHRhZy53aWR0aCA9IFdJRFRIXG5cdHRhZy5oZWlnaHQgPSBUQUdfSEVJR0hUXG5cblx0Y3R4ID0gdGFnLmdldENvbnRleHQoJzJkJylcblx0Y3R4LmZpbGxTdHlsZSA9ICcjMDAwMEZGJ1xuXHRjdHguZmlsbFJlY3QoMCwgMCwgV0lEVEgsIFRBR19IRUlHSFQpXG5cblx0Z2xzbCA9IEdsc2xcblx0XHRjYW52YXM6ICRjYW52YXNbMF1cblx0XHRmcmFnbWVudDogJCgnI3Bhbm8tcm90YXRpb24nKVswXS50ZXh0Q29udGVudFxuXHRcdHZhcmlhYmxlczpcblx0XHRcdHJvdGF0aW9uOiAwLjBcblx0XHRcdHBpdGNoOiAwLjBcblx0XHRcdG9yaWdpbmFsOiBvcmlnaW5hbFxuXHRcdFx0dGFnOiB0YWdcblxuXHRnbHNsLnNldFNpemUoV0lEVEgsIEhFSUdIVCArIFRBR19IRUlHSFQpXG5cdGdsc2wuc3RhcnQoKVxuXG5vbk1vdXNlTW92ZSA9IChlKS0+XG5cdHggPSBlLnBhZ2VYIC8gV0lEVEhcblx0eSA9IGUucGFnZVkgLyAoSEVJR0hUICsgVEFHX0hFSUdIVClcblxuXHRyb3RhdGlvbiA9IHggKiBNYXRoLlBJICogMlxuXHRwaXRjaCA9ICh5IC0gMC41KSAqIE1hdGguUElcblxuXHRnbHNsLnNldCgncm90YXRpb24nLCByb3RhdGlvbilcblx0Z2xzbC5zZXQoJ3BpdGNoJywgcGl0Y2gpXG5cdGdsc2wuc3luY0FsbCgpIl19