var API_KEY, DIST_BETWEEN_PTS, MAX_PTS, VERSION, canvas, create, dirService, loader, onAnalyzeComplete, onCancel, onMessage, onPanoramaLoad, onProgress, panoIds, rawPts, res, restoreSettings, settings, storage, tasks, totalDist, updateSettings;

MAX_PTS = 100;

DIST_BETWEEN_PTS = 5;

API_KEY = "AIzaSyBQ2dzDfyF8Y0Dwe-Q6Jzx4_G62ANrTotQ";

VERSION = '0.1';

loader = null;

dirService = new google.maps.DirectionsService({});

res = null;

rawPts = [];

panoIds = [];

totalDist = 0;

canvas = null;

tasks = [];

settings = {};

storage = localStorage;

restoreSettings = function() {
  if (storage.version !== VERSION) {
    return;
  }
  $('#name').val(storage.name);
  $('#dir').val(storage.dir);
  $('#url').val(storage.url);
  $("input[value=" + storage.travelMode + "]").prop('checked', true);
  $("input[value=" + storage.heading + "]").prop('checked', true);
  $('#lookat').val(storage.lookat);
  $('#zoom').val(storage.zoom);
  $('#step').val(storage.step);
  return $('#search-radius').val(storage.searchRadius);
};

updateSettings = function() {
  settings.name = $('#name').val();
  settings.dir = $('#dir').val();
  settings.url = $('#url').val();
  settings.travelMode = $('input[name=travel]:checked').val();
  settings.heading = $('input[name=heading]:checked').val();
  settings.lookat = $('#lookat').val();
  settings.zoom = $('#zoom').val();
  settings.step = $('#step').val();
  settings.searchRadius = $('#search-radius').val();
  settings.version = VERSION;
  return $.extend(storage, settings);
};

$(function() {
  canvas = $('#panorama')[0];
  $('#create').on('click', create);
  GSVHyperlapse.onMessage = onMessage;
  GSVHyperlapse.onPanoramaLoad = onPanoramaLoad;
  GSVHyperlapse.onProgress = onProgress;
  GSVHyperlapse.onAnalyzeComplete = onAnalyzeComplete;
  GSVHyperlapse.onCancel = onCancel;
  restoreSettings();
  return $('input').on('change', updateSettings);
});

create = function() {
  var hyperlapse, index;
  updateSettings();
  index = tasks.length;
  $('.tasks').append("<li id='task-" + index + "'> <h1>" + settings.name + "</h1> <button class='action' data-index='" + index + "'>Cancel</button> <p>requesting route..<br></p> <div id='map-" + index + "' style='width: 48%; height: 0; padding-top: 26%; background:gray; display: inline-block;'></div> </li>");
  hyperlapse = new GSVHyperlapse(settings);
  hyperlapse.setMap($("#map-" + index)[0]);
  hyperlapse.create();
  $("#task-" + index + " button").on('click', function() {
    var $elm;
    $elm = $(this);
    index = $elm.attr('data-index');
    return tasks[index].cancel();
  });
  return tasks.push(hyperlapse);
};

onCancel = function() {
  var $btn, $elm, index;
  index = tasks.indexOf(this);
  $elm = $("#task-" + index);
  $btn = $('<button>delete</button><br>');
  $btn.on('click', function() {
    return $elm.remove();
  });
  return $elm.children('p').append('canceled<br>').append($btn);
};

onAnalyzeComplete = function() {
  var $btnGen, $elm, index;
  index = tasks.indexOf(this);
  $elm = $("#task-" + index);
  $btnGen = $('<button>generate hyperlapse</button><br>');
  $btnGen.on('click', function() {
    return tasks[index].compose();
  });
  return $elm.children('p').append($btnGen);
};

onProgress = function(loaded, total) {
  var $elm, index;
  index = tasks.indexOf(this);
  $elm = $("#task-" + index);
  if (loaded < 1) {
    $elm.children('p').append($('<progress></progress>'));
  }
  return $elm.find("progress").last().attr({
    value: loaded,
    max: total,
    'data-label': "[" + loaded + "/" + total + "]"
  });
};

onMessage = function(message) {
  var $elm, index;
  index = tasks.indexOf(this);
  $elm = $("#task-" + index);
  return $elm.children('p').append(message + "<br>");
};

onPanoramaLoad = function(idx, canvas) {
  var $elm, index, params;
  index = tasks.indexOf(this);
  $elm = $("#task-" + index);
  $elm.append(canvas);
  params = {
    name: this.name,
    directory: settings.dir,
    number: idx,
    image: canvas.toDataURL('image/png')
  };
  return $.ajax({
    type: "POST",
    url: './save.php',
    data: params,
    success: (function(_this) {
      return function(json) {
        var result;
        result = $.parseJSON(json);
        if (result.status !== "success") {
          _this.cancel();
          return $elm.children('p').append("an error occured" + "<br>");
        }
      };
    })(this)
  });
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdzdi1nZW5lcmF0b3IuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLElBQUEsK09BQUE7O0FBQUEsT0FBQSxHQUFVLEdBQVYsQ0FBQTs7QUFBQSxnQkFDQSxHQUFtQixDQURuQixDQUFBOztBQUFBLE9BR0EsR0FBVSx5Q0FIVixDQUFBOztBQUFBLE9BSUEsR0FBVSxLQUpWLENBQUE7O0FBQUEsTUFRQSxHQUFTLElBUlQsQ0FBQTs7QUFBQSxVQVNBLEdBQWlCLElBQUEsTUFBTSxDQUFDLElBQUksQ0FBQyxpQkFBWixDQUE4QixFQUE5QixDQVRqQixDQUFBOztBQUFBLEdBWUEsR0FBTSxJQVpOLENBQUE7O0FBQUEsTUFjQSxHQUFTLEVBZFQsQ0FBQTs7QUFBQSxPQWVBLEdBQVUsRUFmVixDQUFBOztBQUFBLFNBZ0JBLEdBQVksQ0FoQlosQ0FBQTs7QUFBQSxNQWtCQSxHQUFTLElBbEJULENBQUE7O0FBQUEsS0FvQkEsR0FBUSxFQXBCUixDQUFBOztBQUFBLFFBc0JBLEdBQVcsRUF0QlgsQ0FBQTs7QUFBQSxPQXdCQSxHQUFVLFlBeEJWLENBQUE7O0FBQUEsZUErQkEsR0FBa0IsU0FBQSxHQUFBO0FBQ2pCLEVBQUEsSUFBRyxPQUFPLENBQUMsT0FBUixLQUFtQixPQUF0QjtBQUNDLFVBQUEsQ0FERDtHQUFBO0FBQUEsRUFHQSxDQUFBLENBQUUsT0FBRixDQUFVLENBQUMsR0FBWCxDQUFnQixPQUFPLENBQUMsSUFBeEIsQ0FIQSxDQUFBO0FBQUEsRUFJQSxDQUFBLENBQUUsTUFBRixDQUFTLENBQUMsR0FBVixDQUFlLE9BQU8sQ0FBQyxHQUF2QixDQUpBLENBQUE7QUFBQSxFQUtBLENBQUEsQ0FBRSxNQUFGLENBQVMsQ0FBQyxHQUFWLENBQWUsT0FBTyxDQUFDLEdBQXZCLENBTEEsQ0FBQTtBQUFBLEVBTUEsQ0FBQSxDQUFFLGNBQUEsR0FBZSxPQUFPLENBQUMsVUFBdkIsR0FBa0MsR0FBcEMsQ0FBdUMsQ0FBQyxJQUF4QyxDQUE2QyxTQUE3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QyxDQUFDLElBQUYsQ0FDQztBQUFBLElBQUEsSUFBQSxFQUFNLE1BQU47QUFBQSxJQUNBLEdBQUEsRUFBSyxZQURMO0FBQUEsSUFFQSxJQUFBLEVBQU0sTUFGTjtBQUFBLElBR0EsT0FBQSxFQUFTLENBQUEsU0FBQSxLQUFBLEdBQUE7YUFBQSxTQUFDLElBQUQsR0FBQTtBQUNSLFlBQUEsTUFBQTtBQUFBLFFBQUEsTUFBQSxHQUFTLENBQUMsQ0FBQyxTQUFGLENBQWEsSUFBYixDQUFULENBQUE7QUFDQSxRQUFBLElBQUcsTUFBTSxDQUFDLE1BQVAsS0FBaUIsU0FBcEI7QUFDQyxVQUFBLEtBQUMsQ0FBQSxNQUFELENBQUEsQ0FBQSxDQUFBO2lCQUNBLElBQUksQ0FBQyxRQUFMLENBQWMsR0FBZCxDQUFrQixDQUFDLE1BQW5CLENBQTBCLGtCQUFBLEdBQXFCLE1BQS9DLEVBRkQ7U0FGUTtNQUFBLEVBQUE7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBSFQ7R0FERCxFQWJnQjtBQUFBLENBL0pqQixDQUFBIiwiZmlsZSI6Imdzdi1nZW5lcmF0b3IuanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8iLCJzb3VyY2VzQ29udGVudCI6WyIjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4jIGNvbnN0YW50c1xuTUFYX1BUUyA9IDEwMFxuRElTVF9CRVRXRUVOX1BUUyA9IDVcblxuQVBJX0tFWSA9IFwiQUl6YVN5QlEyZHpEZnlGOFkwRHdlLVE2Snp4NF9HNjJBTnJUb3RRXCJcblZFUlNJT04gPSAnMC4xJ1xuXG4jLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4jIHZhcmlhYmxlc1xubG9hZGVyID0gbnVsbFxuZGlyU2VydmljZSA9IG5ldyBnb29nbGUubWFwcy5EaXJlY3Rpb25zU2VydmljZSh7fSlcblxuIyBlYWNoIHJlc1xucmVzID0gbnVsbFxuXG5yYXdQdHMgPSBbXVxucGFub0lkcyA9IFtdXG50b3RhbERpc3QgPSAwXG5cbmNhbnZhcyA9IG51bGxcblxudGFza3MgPSBbXVxuXG5zZXR0aW5ncyA9IHt9XG5cbnN0b3JhZ2UgPSBsb2NhbFN0b3JhZ2VcblxuXG5cbiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiMgaW5pdFxuXG5yZXN0b3JlU2V0dGluZ3MgPSAtPlxuXHRpZiBzdG9yYWdlLnZlcnNpb24gIT0gVkVSU0lPTlxuXHRcdHJldHVyblxuXG5cdCQoJyNuYW1lJykudmFsKCBzdG9yYWdlLm5hbWUgKVxuXHQkKCcjZGlyJykudmFsKCBzdG9yYWdlLmRpciApXG5cdCQoJyN1cmwnKS52YWwoIHN0b3JhZ2UudXJsIClcblx0JChcImlucHV0W3ZhbHVlPSN7c3RvcmFnZS50cmF2ZWxNb2RlfV1cIikucHJvcCgnY2hlY2tlZCcsIHRydWUpXG5cdCQoXCJpbnB1dFt2YWx1ZT0je3N0b3JhZ2UuaGVhZGluZ31dXCIpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKVxuXHQkKCcjbG9va2F0JykudmFsKCBzdG9yYWdlLmxvb2thdCApXG5cdCQoJyN6b29tJykudmFsKCBzdG9yYWdlLnpvb20gKVxuXHQkKCcjc3RlcCcpLnZhbCggc3RvcmFnZS5zdGVwIClcblx0JCgnI3NlYXJjaC1yYWRpdXMnKS52YWwoIHN0b3JhZ2Uuc2VhcmNoUmFkaXVzIClcblxuIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuIyBmdW5jdGlvbnNcblxudXBkYXRlU2V0dGluZ3MgPSAtPlxuXHRzZXR0aW5ncy5uYW1lIFx0ICAgICAgICA9ICQoJyNuYW1lJykudmFsKClcblx0c2V0dGluZ3MuZGlyIFx0ICAgICAgICA9ICQoJyNkaXInKS52YWwoKVxuXHRzZXR0aW5ncy51cmwgXHQgICAgICAgID0gJCgnI3VybCcpLnZhbCgpXG5cdHNldHRpbmdzLnRyYXZlbE1vZGUgICAgID0gJCgnaW5wdXRbbmFtZT10cmF2ZWxdOmNoZWNrZWQnKS52YWwoKVxuXHRzZXR0aW5ncy5oZWFkaW5nICAgICAgICA9ICQoJ2lucHV0W25hbWU9aGVhZGluZ106Y2hlY2tlZCcpLnZhbCgpXG5cdHNldHRpbmdzLmxvb2thdCAgICAgICAgID0gJCgnI2xvb2thdCcpLnZhbCgpXG5cdHNldHRpbmdzLnpvb21cdCAgICAgICAgPSAkKCcjem9vbScpLnZhbCgpXG5cdHNldHRpbmdzLnN0ZXBcdCAgICAgICAgPSAkKCcjc3RlcCcpLnZhbCgpXG5cdHNldHRpbmdzLnNlYXJjaFJhZGl1c1x0PSAkKCcjc2VhcmNoLXJhZGl1cycpLnZhbCgpXG5cdHNldHRpbmdzLnZlcnNpb24gXHRcdD0gVkVSU0lPTlxuXG5cdCMgc2F2ZSB0byB3ZWIgc3RvcmFnZVxuXHQkLmV4dGVuZChzdG9yYWdlLCBzZXR0aW5ncylcblxuIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuIyBvbiBsb2FkXG5cbiQgLT5cblxuXHRjYW52YXMgPSAkKCcjcGFub3JhbWEnKVswXVxuXG5cdCQoJyNjcmVhdGUnKS5vbiAnY2xpY2snLCBjcmVhdGVcblxuXHRHU1ZIeXBlcmxhcHNlLm9uTWVzc2FnZSA9IG9uTWVzc2FnZVxuXHRHU1ZIeXBlcmxhcHNlLm9uUGFub3JhbWFMb2FkID0gb25QYW5vcmFtYUxvYWRcblx0R1NWSHlwZXJsYXBzZS5vblByb2dyZXNzID0gb25Qcm9ncmVzc1xuXHRHU1ZIeXBlcmxhcHNlLm9uQW5hbHl6ZUNvbXBsZXRlID0gb25BbmFseXplQ29tcGxldGVcblx0R1NWSHlwZXJsYXBzZS5vbkNhbmNlbCA9IG9uQ2FuY2VsXG5cblx0cmVzdG9yZVNldHRpbmdzKClcblxuXHQkKCdpbnB1dCcpLm9uICdjaGFuZ2UnLCB1cGRhdGVTZXR0aW5nc1xuXG4jLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5jcmVhdGUgPSAtPlxuXG5cdHVwZGF0ZVNldHRpbmdzKClcblxuXHRpbmRleCA9IHRhc2tzLmxlbmd0aFxuXG5cdCQoJy50YXNrcycpLmFwcGVuZChcIlxuXHRcdDxsaSBpZD0ndGFzay0je2luZGV4fSc+XG5cdFx0XHQ8aDE+I3tzZXR0aW5ncy5uYW1lfTwvaDE+XG5cdFx0XHQ8YnV0dG9uIGNsYXNzPSdhY3Rpb24nIGRhdGEtaW5kZXg9JyN7aW5kZXh9Jz5DYW5jZWw8L2J1dHRvbj5cblx0XHRcdDxwPnJlcXVlc3Rpbmcgcm91dGUuLjxicj48L3A+XG5cdFx0XHQ8ZGl2IGlkPSdtYXAtI3tpbmRleH0nIHN0eWxlPSd3aWR0aDogNDglOyBoZWlnaHQ6IDA7IHBhZGRpbmctdG9wOiAyNiU7IGJhY2tncm91bmQ6Z3JheTsgZGlzcGxheTogaW5saW5lLWJsb2NrOyc+PC9kaXY+XG5cdFx0PC9saT5cblx0XCIpXG5cblx0aHlwZXJsYXBzZSA9IG5ldyBHU1ZIeXBlcmxhcHNlKCBzZXR0aW5ncyApXG5cdGh5cGVybGFwc2Uuc2V0TWFwKCAkKFwiI21hcC0je2luZGV4fVwiKVswXSApXG5cdGh5cGVybGFwc2UuY3JlYXRlKClcblxuXHQkKFwiI3Rhc2stI3tpbmRleH0gYnV0dG9uXCIpLm9uICdjbGljaycsIC0+XG5cdFx0JGVsbSA9ICQoQClcblx0XHRpbmRleCA9ICRlbG0uYXR0cignZGF0YS1pbmRleCcpXG5cdFx0dGFza3NbaW5kZXhdLmNhbmNlbCgpXG5cblxuXHR0YXNrcy5wdXNoKCBoeXBlcmxhcHNlIClcblxuIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxub25DYW5jZWwgPSAtPlxuXHRpbmRleCA9IHRhc2tzLmluZGV4T2YoIEAgKVxuXHQkZWxtID0gJChcIiN0YXNrLSN7aW5kZXh9XCIpXG5cblx0JGJ0biA9ICQoJzxidXR0b24+ZGVsZXRlPC9idXR0b24+PGJyPicpO1xuXG5cdCRidG4ub24gJ2NsaWNrJywgLT5cblx0XHQkZWxtLnJlbW92ZSgpO1xuXG5cdCRlbG0uY2hpbGRyZW4oJ3AnKVxuXHRcdC5hcHBlbmQoJ2NhbmNlbGVkPGJyPicpXG5cdFx0LmFwcGVuZCggJGJ0biApO1xuXG4jLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5vbkFuYWx5emVDb21wbGV0ZSA9IC0+XG5cdGluZGV4ID0gdGFza3MuaW5kZXhPZiggQCApXG5cdCRlbG0gPSAkKFwiI3Rhc2stI3tpbmRleH1cIilcblxuXG5cdCRidG5HZW4gPSAkKCc8YnV0dG9uPmdlbmVyYXRlIGh5cGVybGFwc2U8L2J1dHRvbj48YnI+Jyk7XG5cblx0JGJ0bkdlbi5vbiAnY2xpY2snLCAtPlxuXHRcdHRhc2tzW2luZGV4XS5jb21wb3NlKClcblxuXHQkZWxtLmNoaWxkcmVuKCdwJykuYXBwZW5kKCAkYnRuR2VuICk7XG5cbiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbm9uUHJvZ3Jlc3MgPSAobG9hZGVkLCB0b3RhbCkgLT5cblx0aW5kZXggPSB0YXNrcy5pbmRleE9mKCBAIClcblx0JGVsbSA9ICQoXCIjdGFzay0je2luZGV4fVwiKVxuXG5cdGlmIGxvYWRlZCA8IDFcblx0XHQkZWxtLmNoaWxkcmVuKCdwJykuYXBwZW5kKCAkKCc8cHJvZ3Jlc3M+PC9wcm9ncmVzcz4nKSlcblxuXHQkZWxtLmZpbmQoXCJwcm9ncmVzc1wiKS5sYXN0KClcblx0XHQuYXR0clxuXHRcdFx0dmFsdWU6IGxvYWRlZFxuXHRcdFx0bWF4OiB0b3RhbFxuXHRcdFx0J2RhdGEtbGFiZWwnOiAgXCJbI3tsb2FkZWR9LyN7dG90YWx9XVwiXG5cbiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbm9uTWVzc2FnZSA9IChtZXNzYWdlKSAtPlxuXHRpbmRleCA9IHRhc2tzLmluZGV4T2YoIEAgKVxuXHQkZWxtID0gJChcIiN0YXNrLSN7aW5kZXh9XCIpXG5cblx0JGVsbS5jaGlsZHJlbigncCcpLmFwcGVuZCggbWVzc2FnZSArIFwiPGJyPlwiIClcblxuIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxub25QYW5vcmFtYUxvYWQgPSAoaWR4LCBjYW52YXMpIC0+XG5cdGluZGV4ID0gdGFza3MuaW5kZXhPZiggQCApXG5cdCRlbG0gPSAkKFwiI3Rhc2stI3tpbmRleH1cIilcblxuXHQkZWxtLmFwcGVuZCggY2FudmFzIClcblxuXHQjIHNhdmUgaW1hZ2Vcblx0cGFyYW1zID1cblx0XHRuYW1lOiBAbmFtZVxuXHRcdGRpcmVjdG9yeTogc2V0dGluZ3MuZGlyXG5cdFx0bnVtYmVyOiBpZHhcblx0XHRpbWFnZTogY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJylcblxuXHQkLmFqYXggXG5cdFx0dHlwZTogXCJQT1NUXCJcblx0XHR1cmw6ICcuL3NhdmUucGhwJ1xuXHRcdGRhdGE6IHBhcmFtc1xuXHRcdHN1Y2Nlc3M6IChqc29uKSA9PlxuXHRcdFx0cmVzdWx0ID0gJC5wYXJzZUpTT04oIGpzb24gKVxuXHRcdFx0aWYgcmVzdWx0LnN0YXR1cyAhPSBcInN1Y2Nlc3NcIlxuXHRcdFx0XHRAY2FuY2VsKClcblx0XHRcdFx0JGVsbS5jaGlsZHJlbigncCcpLmFwcGVuZChcImFuIGVycm9yIG9jY3VyZWRcIiArIFwiPGJyPlwiKVxuIl19