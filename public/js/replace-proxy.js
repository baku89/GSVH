var $console, $progPano, $progSeq, $statPano, $statSeq, basename, decode, destDir, fileList, gsvh, gsvp, load, log, onComplete, sisyphus, srcDir, startTime;

$console = null;

$progPano = null;

$statPano = null;

$progSeq = null;

$statSeq = null;

srcDir = "";

destDir = "";

fileList = null;

gsvh = null;

basename = null;

sisyphus = null;

gsvp = null;

startTime = null;

log = function(str) {
  $console.append(str + "\n");
  return $console.scrollTop = $console.scrollHeight;
};

$(function() {
  $console = $('#console');
  $progPano = $('#prog-pano');
  $progSeq = $('#prog-seq');
  $statPano = $('#stat-pano');
  $statSeq = $('#stat-seq');
  sisyphus = $('#replace-proxy').sisyphus();
  $('#decode').on('click', decode);
  $('[name=file]').on('change', function() {
    $('[name=source]').val($('[name=file]').val());
    return sisyphus.saveAllData();
  });
  gsvp = new GSVPANO.PanoLoader({
    zoom: parseInt($('[name=zoom]').val())
  });
  return gsvp.onProgress = function(p) {
    $statPano.html(p + "%");
    return $progPano.val(p);
  };
});

decode = function() {
  var f, files;
  srcDir = $('[name=source]').val();
  if (srcDir === "") {
    alert("please select source directory");
    return;
  }
  files = fs.readdirSync(srcDir);
  fileList = (function() {
    var i, len, results;
    results = [];
    for (i = 0, len = files.length; i < len; i++) {
      f = files[i];
      if (/\.png$/.test(f)) {
        results.push(f);
      }
    }
    return results;
  })();
  basename = path.basename(srcDir);
  return load();
};

load = function() {
  var err, filename, idx, img, loadImg, onLoadImg, outCanvas, outCtx, savePano, srcCanvas, srcCtx;
  startTime = new Date();
  destDir = (path.dirname(srcDir)) + "/" + basename + ".HQ";
  try {
    fs.mkdirSync(destDir);
  } catch (_error) {
    err = _error;
    console.log(err);
  }
  img = new Image();
  srcCanvas = $('#src')[0];
  outCanvas = $('#out')[0];
  srcCtx = srcCanvas.getContext('2d');
  outCtx = outCanvas.getContext('2d');
  idx = 0;
  filename = "";
  loadImg = function() {
    var elapsed;
    elapsed = ((new Date()) - startTime) / 1000 / 60;
    $statSeq.html("(" + (idx + 1) + "/" + fileList.length + ") " + (elapsed.toPrecision(2)) + "min elapsed");
    $progSeq.val((idx + 1) / fileList.length * 100);
    filename = fileList[idx];
    return img.src = "file:///" + srcDir + "/" + filename;
  };
  onLoadImg = function() {
    var pano;
    srcCanvas.width = img.width;
    srcCanvas.height = img.height;
    srcCtx.drawImage(img, 0, 0);
    pano = CanvasMatrixCode.decode(srcCanvas, 0, srcCanvas.height - TAG_HEIGHT + 10, 1664, TAG_HEIGHT - 10);
    console.log(pano);
    return gsvp.composePanorama(pano.id, pano.heading);
  };
  savePano = function() {
    var dest;
    outCanvas.width = gsvp.width;
    outCanvas.height = (img.height / img.width) * gsvp.width;
    outCtx.drawImage(gsvp.canvas, 0, 0);
    outCtx.drawImage(img, 0, img.height - TAG_HEIGHT, img.width, TAG_HEIGHT, 0, outCanvas.height - TAG_HEIGHT, img.width, TAG_HEIGHT);
    dest = destDir + "/" + filename;
    saveCanvas(outCanvas, dest);
    if (++idx < fileList.length) {
      return loadImg();
    } else {
      return onComplete();
    }
  };
  img.onload = onLoadImg;
  gsvp.onPanoramaLoad = savePano;
  return loadImg();
};

onComplete = function() {
  fs.renameSync(srcDir, srcDir + ".proxy");
  fs.renameSync(destDir, srcDir);
  return notifier.notify({
    title: "Proxy Replacer",
    message: "All done!",
    sound: true
  });
};

//# sourceMappingURL=data:application/json;base64,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WixFQUFBLEVBQUUsQ0FBQyxVQUFILENBQWMsTUFBZCxFQUF5QixNQUFELEdBQVEsUUFBaEMsQ0FBQSxDQUFBO0FBQUEsRUFDQSxFQUFFLENBQUMsVUFBSCxDQUFjLE9BQWQsRUFBdUIsTUFBdkIsQ0FEQSxDQUFBO1NBR0EsUUFBUSxDQUFDLE1BQVQsQ0FDQztBQUFBLElBQUEsS0FBQSxFQUFPLGdCQUFQO0FBQUEsSUFDQSxPQUFBLEVBQVMsV0FEVDtBQUFBLElBRUEsS0FBQSxFQUFPLElBRlA7R0FERCxFQUxZO0FBQUEsQ0F6S2IsQ0FBQSIsImZpbGUiOiJyZXBsYWNlLXByb3h5LmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsiJGNvbnNvbGUgPSBudWxsXG4kcHJvZ1Bhbm8gPSBudWxsXG4kc3RhdFBhbm8gPSBudWxsXG4kcHJvZ1NlcSA9IG51bGxcbiRzdGF0U2VxID0gbnVsbFxuXG5zcmNEaXIgPSBcIlwiXG5kZXN0RGlyID0gXCJcIlxuZmlsZUxpc3QgPSBudWxsXG5cbmdzdmggPSBudWxsXG5cbmJhc2VuYW1lID0gbnVsbFxuc2lzeXBodXMgPSBudWxsXG5cbmdzdnAgPSBudWxsXG5cbnN0YXJ0VGltZSA9IG51bGxcblxubG9nID0gKHN0cikgLT5cblx0JGNvbnNvbGUuYXBwZW5kKFwiI3tzdHJ9XFxuXCIpXG5cdCRjb25zb2xlLnNjcm9sbFRvcCA9ICRjb25zb2xlLnNjcm9sbEhlaWdodFxuXG4kIC0+XG5cdCRjb25zb2xlID0gJCgnI2NvbnNvbGUnKVxuXHQkcHJvZ1Bhbm8gPSAkKCcjcHJvZy1wYW5vJylcblx0JHByb2dTZXEgPSAkKCcjcHJvZy1zZXEnKVxuXHQkc3RhdFBhbm8gPSAkKCcjc3RhdC1wYW5vJylcblx0JHN0YXRTZXEgPSAkKCcjc3RhdC1zZXEnKVxuXG5cdHNpc3lwaHVzID0gJCgnI3JlcGxhY2UtcHJveHknKS5zaXN5cGh1cygpXG5cblx0JCgnI2RlY29kZScpLm9uICdjbGljaycsIGRlY29kZVxuXG5cdCQoJ1tuYW1lPWZpbGVdJykub24gJ2NoYW5nZScsIC0+XG5cdFx0JCgnW25hbWU9c291cmNlXScpXG5cdFx0XHQudmFsKCAkKCdbbmFtZT1maWxlXScpLnZhbCgpIClcblx0XHRzaXN5cGh1cy5zYXZlQWxsRGF0YSgpXG5cblx0IyAjdGVzdFxuXG5cdCMgcGwgPSBuZXcgR1NWUEFOTy5QYW5vTG9hZGVyXG5cdCMgXHR6b29tOiAyXG5cblx0IyBwbC5vblByb2dyZXNzID0gKHApLT5cblx0IyBcdGNvbnNvbGUubG9nKHApXG5cblx0IyBwbC5vblBhbm9yYW1hTG9hZCA9IC0+XG5cdCMgXHQkKCdib2R5JykuYXBwZW5kKHBsLmNhbnZhcylcblx0IyBcdCQoJ2JvZHknKS5hcHBlbmQocGwuYzIpXG5cblx0IyBcdHNhdmVDYW52YXMoIHBsLmNhbnZhcywgXCIvVXNlcnMvbXVnaS9tb2RfMi5wbmdcIiApXG5cdCMgXHRzYXZlQ2FudmFzKCBwbC5jMiwgXCIvVXNlcnMvbXVnaS9vcmlnaW5hbF9zbG9wZS5wbmdcIiApXG5cblx0IyBkb2dlbiA9IFwiRlpMcU5PMVNVSWgzRlFyY1dUbTh4Z1wiXG5cdCMgc2xvcGUgPSBcIi1QcmNjYTM1NEh2dEVvdlA4aXltUlFcIlxuXHQjIHBsLmNvbXBvc2VQYW5vcmFtYShzbG9wZSwgMClcblxuXHRnc3ZwID0gbmV3IEdTVlBBTk8uUGFub0xvYWRlclxuXHRcdHpvb206IHBhcnNlSW50KCAkKCdbbmFtZT16b29tXScpLnZhbCgpIClcblxuXHRnc3ZwLm9uUHJvZ3Jlc3MgPSAocCkgLT5cblx0XHQkc3RhdFBhbm8uaHRtbChcIiN7cH0lXCIpXG5cdFx0JHByb2dQYW5vLnZhbCggcCApXG5cblxuXG4jLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5kZWNvZGUgPSAtPlxuXHRzcmNEaXIgPSAkKCdbbmFtZT1zb3VyY2VdJykudmFsKClcblxuXHRpZiBzcmNEaXIgPT0gXCJcIlxuXHRcdGFsZXJ0IFwicGxlYXNlIHNlbGVjdCBzb3VyY2UgZGlyZWN0b3J5XCJcblx0XHRyZXR1cm5cblxuXHRmaWxlcyA9IGZzLnJlYWRkaXJTeW5jKHNyY0RpcilcblxuXHRmaWxlTGlzdCA9IChmIGZvciBmIGluIGZpbGVzIHdoZW4gL1xcLnBuZyQvLnRlc3QoZikpXG5cdGJhc2VuYW1lID0gcGF0aC5iYXNlbmFtZSggc3JjRGlyIClcblxuXHQjY29uc29sZS5sb2cgZmlsZUxpc3RcblxuXHRsb2FkKClcblxuIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxubG9hZCA9ICgpIC0+XG5cblx0c3RhcnRUaW1lID0gbmV3IERhdGUoKVxuXG5cdCMgbWFrZSBuZXcgZGlyZWN0b3J5XG5cdGRlc3REaXIgPSBcIiN7cGF0aC5kaXJuYW1lKHNyY0Rpcil9LyN7YmFzZW5hbWV9LkhRXCJcblx0dHJ5XG5cdFx0ZnMubWtkaXJTeW5jKGRlc3REaXIpXG5cdGNhdGNoIGVyclxuXHRcdGNvbnNvbGUubG9nIGVyclxuXG5cdGltZyA9IG5ldyBJbWFnZSgpXG5cblx0c3JjQ2FudmFzID0gJCgnI3NyYycpWzBdXG5cdG91dENhbnZhcyA9ICQoJyNvdXQnKVswXVxuXG5cdHNyY0N0eCA9IHNyY0NhbnZhcy5nZXRDb250ZXh0KCcyZCcpXG5cdG91dEN0eCA9IG91dENhbnZhcy5nZXRDb250ZXh0KCcyZCcpXG5cblx0aWR4ID0gMFxuXHRmaWxlbmFtZSA9IFwiXCJcblxuXHQjLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0IyAxLiBsb2FkIGltYWdlXG5cdGxvYWRJbWcgPSAoKSAtPlxuXHRcdGVsYXBzZWQgPSAoKChuZXcgRGF0ZSgpKSAtIHN0YXJ0VGltZSkgLyAxMDAwIC8gNjApXG5cdFx0JHN0YXRTZXEuaHRtbChcIigje2lkeCsxfS8je2ZpbGVMaXN0Lmxlbmd0aH0pICN7ZWxhcHNlZC50b1ByZWNpc2lvbigyKX1taW4gZWxhcHNlZFwiKVxuXHRcdCRwcm9nU2VxLnZhbCggKGlkeCsxKSAvIGZpbGVMaXN0Lmxlbmd0aCAqIDEwMCApXG5cblxuXHRcdGZpbGVuYW1lID0gZmlsZUxpc3RbaWR4XVxuXHRcdGltZy5zcmMgPSBcImZpbGU6Ly8vI3tzcmNEaXJ9LyN7ZmlsZW5hbWV9XCJcblxuXHQjLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0IyAyLiByZWFkIG1hdHJpeCBjb2RlIGFuZCBzZXR1cCBnc3ZoIGFuZCBydW4gY29tcG9zZSgpXG5cdG9uTG9hZEltZyA9IC0+XG5cdFx0c3JjQ2FudmFzLndpZHRoID0gaW1nLndpZHRoXG5cdFx0c3JjQ2FudmFzLmhlaWdodCA9IGltZy5oZWlnaHRcblxuXHRcdCMgZGVjb2RlIHBhbm8gbWF0cml4IGNvZGVcblx0XHRzcmNDdHguZHJhd0ltYWdlKGltZywgMCwgMClcblx0XHRwYW5vID0gQ2FudmFzTWF0cml4Q29kZS5kZWNvZGUoXG5cdFx0XHRzcmNDYW52YXMsXG5cdFx0XHQwLFxuXHRcdFx0c3JjQ2FudmFzLmhlaWdodCAtIFRBR19IRUlHSFQgKyAxMCxcblx0XHRcdDE2NjQsIFRBR19IRUlHSFQgLSAxMCkjc3JjQ2FudmFzLndpZHRoLCBUQUdfSEVJR0hUIC0gMTApXG5cblx0XHRjb25zb2xlLmxvZyBwYW5vXG5cblx0XHQjIGdlbmVyYXRlIHBhbm9cblx0XHRnc3ZwLmNvbXBvc2VQYW5vcmFtYSggcGFuby5pZCwgcGFuby5oZWFkaW5nIClcblxuXHQjLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0IyAzLiBtZXJnZSB3aXRoIG1hdHJpeCBjb2RlIGFuZCBzYXZlXG5cdHNhdmVQYW5vID0gLT5cblxuXHRcdG91dENhbnZhcy53aWR0aCA9IGdzdnAud2lkdGhcblx0XHRvdXRDYW52YXMuaGVpZ2h0ID0gKGltZy5oZWlnaHQgLyBpbWcud2lkdGgpICogZ3N2cC53aWR0aFxuXG5cdFx0b3V0Q3R4LmRyYXdJbWFnZShnc3ZwLmNhbnZhcywgMCwgMClcblx0XHRvdXRDdHguZHJhd0ltYWdlKFxuXHRcdFx0aW1nLFxuXHRcdFx0MCwgaW1nLmhlaWdodCAtIFRBR19IRUlHSFQsIFx0XHRpbWcud2lkdGgsIFRBR19IRUlHSFQsXG5cdFx0XHQwLCBvdXRDYW52YXMuaGVpZ2h0IC0gVEFHX0hFSUdIVCwgXHRpbWcud2lkdGgsIFRBR19IRUlHSFQpXG5cblx0XHRkZXN0ID0gXCIje2Rlc3REaXJ9LyN7ZmlsZW5hbWV9XCJcblx0XHRzYXZlQ2FudmFzKCBvdXRDYW52YXMsIGRlc3QgKVxuXG5cdFx0IyBuZXh0XG5cdFx0aWYgKytpZHggPCBmaWxlTGlzdC5sZW5ndGhcblx0XHRcdGxvYWRJbWcoKVxuXHRcdGVsc2Vcblx0XHRcdG9uQ29tcGxldGUoKVxuXG5cblx0Iy0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCMgdHJpZ2dlclxuXHRpbWcub25sb2FkID0gb25Mb2FkSW1nXG5cdGdzdnAub25QYW5vcmFtYUxvYWQgPSBzYXZlUGFub1xuXG5cdGxvYWRJbWcoKVxuXG5cbiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbm9uQ29tcGxldGUgPSAtPlxuXG5cdGZzLnJlbmFtZVN5bmMoc3JjRGlyLCBcIiN7c3JjRGlyfS5wcm94eVwiKVxuXHRmcy5yZW5hbWVTeW5jKGRlc3REaXIsIHNyY0RpcilcblxuXHRub3RpZmllci5ub3RpZnlcblx0XHR0aXRsZTogXCJQcm94eSBSZXBsYWNlclwiXG5cdFx0bWVzc2FnZTogXCJBbGwgZG9uZSFcIlxuXHRcdHNvdW5kOiB0cnVlXG5cblxuXHRcblxuXG4iXX0=