var $console, $progPano, $progSeq, $statPano, $statSeq, bFlip, basename, changedList, decode, destDir, fileList, gsvh, gsvp, img, load, onComplete, outCanvas, outCtx, searchNearestPano, searchRadius, sisyphus, srcCanvas, srcCtx, srcDir, ss, startTime, tagCanvas, tagCtx;

$console = null;

$progPano = null;

$statPano = null;

$progSeq = null;

$statSeq = null;

srcDir = "";

destDir = "";

fileList = null;

gsvh = null;

basename = null;

sisyphus = null;

gsvp = null;

startTime = null;

changedList = [];

ss = new google.maps.StreetViewService();

tagCanvas = tagCtx = null;

bFlip = false;

img = null;

srcCanvas = outCanvas = tagCanvas = null;

srcCtx = outCtx = tagCtx = null;

$(function() {
  $console = $('#console');
  $progPano = $('#prog-pano');
  $progSeq = $('#prog-seq');
  $statPano = $('#stat-pano');
  $statSeq = $('#stat-seq');
  sisyphus = $('#replace-proxy').sisyphus();
  $('#decode').on('click', decode);
  $('[name=file]').on('change', function() {
    $('[name=source]').val($('[name=file]').val());
    return sisyphus.saveAllData();
  });
  gsvp = new GSVPANO.PanoLoader({
    zoom: parseInt($('[name=zoom]').val())
  });
  gsvp.onProgress = function(p) {
    $statPano.html(p + "%");
    return $progPano.val(p);
  };
  img = new Image();
  srcCanvas = $('#src')[0];
  outCanvas = $('#out')[0];
  tagCanvas = $('#tag')[0];
  srcCtx = srcCanvas.getContext('2d');
  outCtx = outCanvas.getContext('2d');
  return tagCtx = tagCanvas.getContext('2d');
});

decode = function() {
  var f, files, zoom;
  srcDir = $('[name=source]').val();
  if (srcDir === "") {
    alert("please select source directory");
    return;
  }
  files = fs.readdirSync(srcDir);
  fileList = (function() {
    var j, len, results;
    results = [];
    for (j = 0, len = files.length; j < len; j++) {
      f = files[j];
      if (/\.png$/.test(f)) {
        results.push(f);
      }
    }
    return results;
  })();
  basename = path.basename(srcDir);
  zoom = parseInt($('[name=zoom').val());
  gsvp.setZoom(zoom);
  return load();
};

load = function() {
  var bChanged, err, filename, idx, loadImg, onLoadImg, saveAndNext, savePano;
  startTime = new Date();
  destDir = (path.dirname(srcDir)) + "/" + basename + ".HQ";
  try {
    mkdirp.sync(destDir);
  } catch (_error) {
    err = _error;
    alert("Destination directory already exists. Please delete '" + destDir + "' to continue.");
  }
  bFlip = false;
  bChanged = false;
  idx = 0;
  filename = "";
  changedList = [];
  loadImg = function() {
    var elapsed;
    elapsed = ((new Date()) - startTime) / 1000 / 60;
    $statSeq.html("(" + (idx + 1) + "/" + fileList.length + ") " + (elapsed.toPrecision(2)) + "min elapsed");
    $progSeq.val((idx + 1) / fileList.length * 100);
    filename = fileList[idx];
    return img.src = "file://" + srcDir + "/" + filename;
  };
  onLoadImg = function() {
    var headingOffset, height, i, j, pano, pixel, pt, ref, width, x;
    width = img.width;
    height = img.height;
    srcCanvas.width = img.width;
    srcCanvas.height = img.height;
    srcCtx.drawImage(img, 0, 0);
    headingOffset = 0;
    x = 0;
    for (i = j = 0, ref = srcCanvas.width - 1; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {
      pixel = srcCtx.getImageData(i, 836, 1, 1).data;
      if (pixel[0] >= 128) {
        x = i;
        headingOffset = (x / srcCanvas.width) * 360;
        break;
      }
    }
    pt = {
      x: ((img.width + x) - 3) % img.width,
      y: 843
    };
    pixel = srcCtx.getImageData(pt.x, pt.y, 1, 1).data;
    if (pixel[0] > 128) {
      bFlip = true;
      x = img.width - (x + 12);
      headingOffset = (x / srcCanvas.width) * 360;
    } else {
      bFlip = false;
    }
    tagCanvas.width = img.width;
    tagCanvas.height = TAG_HEIGHT;
    if (bFlip) {
      tagCtx.save();
      tagCtx.translate(img.width, 0);
      tagCtx.scale(-1, 1);
      tagCtx.drawImage(img, 0, height - TAG_HEIGHT, width, TAG_HEIGHT, x, 0, width, TAG_HEIGHT);
      tagCtx.drawImage(img, 0, height - TAG_HEIGHT, width, TAG_HEIGHT, x - width, 0, width, TAG_HEIGHT);
      tagCtx.restore();
    } else {
      tagCtx.drawImage(img, 0, height - TAG_HEIGHT, width, TAG_HEIGHT, -x, 0, width, TAG_HEIGHT);
      tagCtx.drawImage(img, 0, height - TAG_HEIGHT, width, TAG_HEIGHT, -x + width, 0, width, TAG_HEIGHT);
    }
    pano = CanvasMatrixCode.decode(tagCanvas, 0, 10, 1664, TAG_HEIGHT - 10);
    if (pano === null) {
      outCanvas.width = gsvp.width;
      outCanvas.height = (img.height / img.width) * gsvp.width;
      outCtx.fillStyle = '#000000';
      outCtx.fillRect(0, 0, outCanvas.width, outCanvas.height);
      outCtx.drawImage(img, 0, 0, img.width, img.height, 0, 0, outCanvas.width, outCanvas.height);
      saveAndNext();
    }
    console.log(pano);
    return ss.getPanoramaById(pano.id, function(data, status) {
      var latLng, result;
      if (status === google.maps.StreetViewStatus.OK) {
        bChanged = false;
        return gsvp.composePanorama(pano.id, pano.heading + headingOffset);
      } else {
        bChanged = true;
        result = /([\-0-9.]+), ([\-0-9.]+)/.exec(pano.latLng);
        latLng = new google.maps.LatLng(result[1], result[2]);
        return searchNearestPano(latLng, function(newId, newLatLng, dist) {
          var changedInfo, changedTxt;
          console.log(newLatLng, newId, dist);
          changedInfo = {
            filename: filename,
            oldId: pano.id,
            newId: newId,
            oldLatLng: latLng.toString(),
            newLatLng: newLatLng.toString(),
            distance: dist
          };
          changedList.push(changedInfo);
          changedTxt = JSON.stringify(changedList);
          fs.writeFile(destDir + "/_report.txt", changedTxt);
          console.log("changed:" + filename + ", nearest pano: " + pano.id + " -> " + newId + ", distance from original: " + dist);
          return gsvp.composePanorama(newId, pano.heading + headingOffset);
        });
      }
    });
  };
  savePano = function() {
    console.log("save pano");
    outCanvas.width = gsvp.width;
    outCanvas.height = (img.height / img.width) * gsvp.width;
    outCtx.fillStyle = '#000000';
    outCtx.fillRect(0, 0, outCanvas.width, outCanvas.height);
    if (bFlip) {
      console.log("fliped");
      outCtx.save();
      outCtx.translate(outCanvas.width, 0);
      outCtx.scale(-1, 1);
    }
    outCtx.drawImage(gsvp.canvas, 0, 0);
    if (bFlip) {
      outCtx.restore();
    }
    outCtx.drawImage(img, 0, img.height - TAG_HEIGHT, img.width, TAG_HEIGHT, 0, outCanvas.height - TAG_HEIGHT, img.width, TAG_HEIGHT);
    if (bChanged) {
      outCtx.fillStyle = '#ff0000';
      outCtx.fillRect(outCanvas.width - 40, outCanvas.height - 40, 40, 40);
    }
    return saveAndNext();
  };
  saveAndNext = function() {
    var dest;
    dest = destDir + "/" + filename;
    saveCanvas(outCanvas, dest);
    if (++idx < fileList.length) {
      return loadImg();
    } else {
      return onComplete();
    }
  };
  img.onload = onLoadImg;
  gsvp.onPanoramaLoad = savePano;
  return loadImg();
};

searchRadius = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 20, 30, 40, 50, 60, 70, 80, 90, 100];

searchNearestPano = function(origin, callback) {
  var complete, i, j, len, r, radius, remain, result;
  radius = 1;
  result = [];
  remain = searchRadius.length;
  console.log("searchNearestPano: " + origin);
  for (r = j = 0, len = searchRadius.length; j < len; r = ++j) {
    i = searchRadius[r];
    setTimeout(function() {
      return ss.getPanoramaByLocation(origin, r, function(data, status) {
        if (status === google.maps.StreetViewStatus.OK) {
          data = {
            id: data.location.pano,
            latLng: data.location.latLng,
            distance: google.maps.geometry.spherical.computeDistanceBetween(origin, data.location.latLng)
          };
          result.push(data);
        }
        if (--remain === 0) {
          return complete();
        }
      });
    }, 50 * i);
  }
  return complete = function() {
    var k, latLng, len1, minDist, pano;
    minDist = 100000000;
    pano = null;
    latLng = null;
    for (k = 0, len1 = result.length; k < len1; k++) {
      r = result[k];
      if (r.distance < minDist) {
        minDist = r.distance;
        pano = r.id;
        latLng = r.latLng;
      }
    }
    return callback(pano, latLng, minDist);
  };
};

onComplete = function() {
  return setTimeout(function() {
    var changedTxt;
    changedTxt = JSON.stringify(changedList);
    fs.writeFile(destDir + "/_report.txt", changedTxt);
    fs.renameSync(srcDir, srcDir + ".proxy");
    fs.renameSync(destDir, srcDir);
    return notifier.notify({
      title: "Proxy Replacer",
      message: "All done!",
      sound: true
    });
  }, 3000);
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGxhY2UtcHJveHkuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEseVFBQUE7O0FBQUEsUUFBQSxHQUFXLElBQVgsQ0FBQTs7QUFBQSxTQUNBLEdBQVksSUFEWixDQUFBOztBQUFBLFNBRUEsR0FBWSxJQUZaLENBQUE7O0FBQUEsUUFHQSxHQUFXLElBSFgsQ0FBQTs7QUFBQSxRQUlBLEdBQVcsSUFKWCxDQUFBOztBQUFBLE1BTUEsR0FBUyxFQU5ULENBQUE7O0FBQUEsT0FPQSxHQUFVLEVBUFYsQ0FBQTs7QUFBQSxRQVFBLEdBQVcsSUFSWCxDQUFBOztBQUFBLElBVUEsR0FBTyxJQVZQLENBQUE7O0FBQUEsUUFZQSxHQUFXLElBWlgsQ0FBQTs7QUFBQSxRQWFBLEdBQVcsSUFiWCxDQUFBOztBQUFBLElBZUEsR0FBTyxJQWZQLENBQUE7O0FBQUEsU0FpQkEsR0FBWSxJQWpCWixDQUFBOztBQUFBLFdBbUJBLEdBQWMsRUFuQmQsQ0FBQTs7QUFBQSxFQXFCQSxHQUFTLElBQUEsTUFBTSxDQUFDLElBQUksQ0FBQyxpQkFBWixDQUFBLENBckJULENBQUE7O0FBQUEsU0F1QkEsR0FBWSxNQUFBLEdBQVMsSUF2QnJCLENBQUE7O0FBQUEsS0F3QkEsR0FBUSxLQXhCUixDQUFBOztBQUFBLEdBMEJBLEdBQU0sSUExQk4sQ0FBQTs7QUFBQSxTQTRCQSxHQUNBLFNBQUEsR0FDQSxTQUFBLEdBQVksSUE5QlosQ0FBQTs7QUFBQSxNQWdDQSxHQUNBLE1BQUEsR0FDQSxNQUFBLEdBQVMsSUFsQ1QsQ0FBQTs7QUFBQSxDQW9DQSxDQUFFLFNBQUEsR0FBQTtBQUNELEVBQUEsUUFBQSxHQUFXLENBQUEsQ0FBRSxVQUFGLENBQVgsQ0FBQTtBQUFBLEVBQ0EsU0FBQSxHQUFZLENBQUEsQ0FBRSxZQUFGLENBRFosQ0FBQTtBQUFBLEVBRUEsUUFBQSxHQUFXLENBQUEsQ0FBRSxXQUFGLENBRlgsQ0FBQTtBQUFBLEVBR0EsU0FBQSxHQUFZLENBQUEsQ0FB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QUFDLENBQUMsRUFEVCxDQUFBO0FBQUEsUUFFQSxNQUFBLEdBQVMsQ0FBQyxDQUFDLE1BRlgsQ0FERDtPQUREO0FBQUEsS0FKQTtXQVVBLFFBQUEsQ0FBUyxJQUFULEVBQWUsTUFBZixFQUF1QixPQUF2QixFQVpVO0VBQUEsRUF6QlE7QUFBQSxDQXBTcEIsQ0FBQTs7QUFBQSxVQTZVQSxHQUFhLFNBQUEsR0FBQTtTQUVaLFVBQUEsQ0FBVyxTQUFBLEdBQUE7QUFFVixRQUFBLFVBQUE7QUFBQSxJQUFBLFVBQUEsR0FBYSxJQUFJLENBQUMsU0FBTCxDQUFnQixXQUFoQixDQUFiLENBQUE7QUFBQSxJQUNBLEVBQUUsQ0FBQyxTQUFILENBQWdCLE9BQUQsR0FBUyxjQUF4QixFQUF1QyxVQUF2QyxDQURBLENBQUE7QUFBQSxJQUdBLEVBQUUsQ0FBQyxVQUFILENBQWMsTUFBZCxFQUF5QixNQUFELEdBQVEsUUFBaEMsQ0FIQSxDQUFBO0FBQUEsSUFJQSxFQUFFLENBQUMsVUFBSCxDQUFjLE9BQWQsRUFBdUIsTUFBdkIsQ0FKQSxDQUFBO1dBTUEsUUFBUSxDQUFDLE1BQVQsQ0FDQztBQUFBLE1BQUEsS0FBQSxFQUFPLGdCQUFQO0FBQUEsTUFDQSxPQUFBLEVBQVMsV0FEVDtBQUFBLE1BRUEsS0FBQSxFQUFPLElBRlA7S0FERCxFQVJVO0VBQUEsQ0FBWCxFQVlFLElBWkYsRUFGWTtBQUFBLENBN1ViLENBQUEiLCJmaWxlIjoicmVwbGFjZS1wcm94eS5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIiRjb25zb2xlID0gbnVsbFxuJHByb2dQYW5vID0gbnVsbFxuJHN0YXRQYW5vID0gbnVsbFxuJHByb2dTZXEgPSBudWxsXG4kc3RhdFNlcSA9IG51bGxcblxuc3JjRGlyID0gXCJcIlxuZGVzdERpciA9IFwiXCJcbmZpbGVMaXN0ID0gbnVsbFxuXG5nc3ZoID0gbnVsbFxuXG5iYXNlbmFtZSA9IG51bGxcbnNpc3lwaHVzID0gbnVsbFxuXG5nc3ZwID0gbnVsbFxuXG5zdGFydFRpbWUgPSBudWxsXG5cbmNoYW5nZWRMaXN0ID0gW11cblxuc3MgPSBuZXcgZ29vZ2xlLm1hcHMuU3RyZWV0Vmlld1NlcnZpY2UoKVxuXG50YWdDYW52YXMgPSB0YWdDdHggPSBudWxsXG5iRmxpcCA9IGZhbHNlXG5cbmltZyA9IG51bGxcblxuc3JjQ2FudmFzID1cbm91dENhbnZhcyA9XG50YWdDYW52YXMgPSBudWxsXG5cbnNyY0N0eCA9IFxub3V0Q3R4ID0gXG50YWdDdHggPSBudWxsXG5cbiQgLT5cblx0JGNvbnNvbGUgPSAkKCcjY29uc29sZScpXG5cdCRwcm9nUGFubyA9ICQoJyNwcm9nLXBhbm8nKVxuXHQkcHJvZ1NlcSA9ICQoJyNwcm9nLXNlcScpXG5cdCRzdGF0UGFubyA9ICQoJyNzdGF0LXBhbm8nKVxuXHQkc3RhdFNlcSA9ICQoJyNzdGF0LXNlcScpXG5cblx0c2lzeXBodXMgPSAkKCcjcmVwbGFjZS1wcm94eScpLnNpc3lwaHVzKClcblxuXHQkKCcjZGVjb2RlJykub24gJ2NsaWNrJywgZGVjb2RlXG5cblx0JCgnW25hbWU9ZmlsZV0nKS5vbiAnY2hhbmdlJywgLT5cblx0XHQkKCdbbmFtZT1zb3VyY2VdJylcblx0XHRcdC52YWwoICQoJ1tuYW1lPWZpbGVdJykudmFsKCkgKVxuXHRcdHNpc3lwaHVzLnNhdmVBbGxEYXRhKClcblxuXHRnc3ZwID0gbmV3IEdTVlBBTk8uUGFub0xvYWRlclxuXHRcdHpvb206IHBhcnNlSW50KCAkKCdbbmFtZT16b29tXScpLnZhbCgpIClcblxuXHRnc3ZwLm9uUHJvZ3Jlc3MgPSAocCkgLT5cblx0XHQkc3RhdFBhbm8uaHRtbChcIiN7cH0lXCIpXG5cdFx0JHByb2dQYW5vLnZhbCggcCApXG5cblxuXHRpbWcgPSBuZXcgSW1hZ2UoKVxuXG5cdHNyY0NhbnZhcyA9ICQoJyNzcmMnKVswXVxuXHRvdXRDYW52YXMgPSAkKCcjb3V0JylbMF1cblx0dGFnQ2FudmFzID0gJCgnI3RhZycpWzBdXG5cblx0c3JjQ3R4ID0gc3JjQ2FudmFzLmdldENvbnRleHQoJzJkJylcblx0b3V0Q3R4ID0gb3V0Q2FudmFzLmdldENvbnRleHQoJzJkJylcblx0dGFnQ3R4ID0gdGFnQ2FudmFzLmdldENvbnRleHQoJzJkJylcblxuIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZGVjb2RlID0gLT5cblx0c3JjRGlyID0gJCgnW25hbWU9c291cmNlXScpLnZhbCgpXG5cblx0aWYgc3JjRGlyID09IFwiXCJcblx0XHRhbGVydCBcInBsZWFzZSBzZWxlY3Qgc291cmNlIGRpcmVjdG9yeVwiXG5cdFx0cmV0dXJuXG5cblx0ZmlsZXMgPSBmcy5yZWFkZGlyU3luYyhzcmNEaXIpXG5cblx0ZmlsZUxpc3QgPSAoZiBmb3IgZiBpbiBmaWxlcyB3aGVuIC9cXC5wbmckLy50ZXN0KGYpKVxuXHRiYXNlbmFtZSA9IHBhdGguYmFzZW5hbWUoIHNyY0RpciApXG5cblx0IyBjaGFuZ2UgZ3N2cCB6b29tXG5cdHpvb20gPSBwYXJzZUludCggJCgnW25hbWU9em9vbScpLnZhbCgpICkgXG5cdGdzdnAuc2V0Wm9vbSggem9vbSApXG5cblx0bG9hZCgpXG5cbiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmxvYWQgPSAoKSAtPlxuXG5cdHN0YXJ0VGltZSA9IG5ldyBEYXRlKClcblxuXHQjIG1ha2UgbmV3IGRpcmVjdG9yeVxuXHRkZXN0RGlyID0gXCIje3BhdGguZGlybmFtZShzcmNEaXIpfS8je2Jhc2VuYW1lfS5IUVwiXG5cdHRyeVxuXHRcdG1rZGlycC5zeW5jKGRlc3REaXIpXG5cdFx0I2ZzLm1rZGlyU3luYyhkZXN0RGlyKVxuXHRjYXRjaCBlcnJcblx0XHRhbGVydChcIkRlc3RpbmF0aW9uIGRpcmVjdG9yeSBhbHJlYWR5IGV4aXN0cy4gUGxlYXNlIGRlbGV0ZSAnI3tkZXN0RGlyfScgdG8gY29udGludWUuXCIpXG5cblx0YkZsaXAgPSBmYWxzZVxuXHRiQ2hhbmdlZCA9IGZhbHNlXG5cblx0aWR4ID0gMFxuXHRmaWxlbmFtZSA9IFwiXCJcblxuXHRjaGFuZ2VkTGlzdCA9IFtdXG5cblx0Iy0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCMgMS4gbG9hZCBpbWFnZVxuXHRsb2FkSW1nID0gKCkgLT5cblx0XHRlbGFwc2VkID0gKCgobmV3IERhdGUoKSkgLSBzdGFydFRpbWUpIC8gMTAwMCAvIDYwKVxuXHRcdCRzdGF0U2VxLmh0bWwoXCIoI3tpZHgrMX0vI3tmaWxlTGlzdC5sZW5ndGh9KSAje2VsYXBzZWQudG9QcmVjaXNpb24oMil9bWluIGVsYXBzZWRcIilcblx0XHQkcHJvZ1NlcS52YWwoIChpZHgrMSkgLyBmaWxlTGlzdC5sZW5ndGggKiAxMDAgKVxuXG5cblx0XHRmaWxlbmFtZSA9IGZpbGVMaXN0W2lkeF1cblx0XHRpbWcuc3JjID0gXCJmaWxlOi8vI3tzcmNEaXJ9LyN7ZmlsZW5hbWV9XCJcblxuXHQjLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0IyAyLiByZWFkIG1hdHJpeCBjb2RlIGFuZCBzZXR1cCBnc3ZoIGFuZCBydW4gY29tcG9zZSgpXG5cdG9uTG9hZEltZyA9IC0+XG5cblx0XHR3aWR0aCA9IGltZy53aWR0aFxuXHRcdGhlaWdodCA9IGltZy5oZWlnaHRcblxuXHRcdHNyY0NhbnZhcy53aWR0aCA9IGltZy53aWR0aFxuXHRcdHNyY0NhbnZhcy5oZWlnaHQgPSBpbWcuaGVpZ2h0XG5cblx0XHRzcmNDdHguZHJhd0ltYWdlKGltZywgMCwgMClcblxuXHRcdCMgcmVhZCBoZWFkaW5nIG9mZnNldFxuXHRcdGhlYWRpbmdPZmZzZXQgPSAwXG5cdFx0eCA9IDBcblx0XHRmb3IgaSBpbiBbMC4uc3JjQ2FudmFzLndpZHRoLTFdXG5cdFx0XHRwaXhlbCA9IHNyY0N0eC5nZXRJbWFnZURhdGEoaSwgODM2LCAxLCAxKS5kYXRhXG5cdFx0XHRpZiBwaXhlbFswXSA+PSAxMjhcblx0XHRcdFx0eCA9IGlcblx0XHRcdFx0aGVhZGluZ09mZnNldCA9ICh4IC8gc3JjQ2FudmFzLndpZHRoKSAqIDM2MFxuXHRcdFx0XHRicmVha1xuXG5cdFx0IyByZWFkIGlmIGZsaXBlZFxuXHRcdHB0ID1cblx0XHRcdHg6ICgoaW1nLndpZHRoICsgeCkgLSAzKSAlIGltZy53aWR0aFxuXHRcdFx0eTogODQzXG5cblx0XHRwaXhlbCA9IHNyY0N0eC5nZXRJbWFnZURhdGEocHQueCwgcHQueSwgMSwgMSkuZGF0YVxuXHRcdGlmIHBpeGVsWzBdID4gMTI4XG5cdFx0XHRiRmxpcCA9IHRydWVcblx0XHRcdHggPSBpbWcud2lkdGggLSAoeCsxMilcblx0XHRcdGhlYWRpbmdPZmZzZXQgPSAoeCAvIHNyY0NhbnZhcy53aWR0aCkgKiAzNjBcblx0XHRlbHNlXG5cdFx0XHRiRmxpcCA9IGZhbHNlXG5cblx0XHQjIGZpeCB0YWcgb2Zmc2V0XG5cdFx0dGFnQ2FudmFzLndpZHRoID0gaW1nLndpZHRoXG5cdFx0dGFnQ2FudmFzLmhlaWdodCA9IFRBR19IRUlHSFRcblxuXHRcdGlmIGJGbGlwXG5cdFx0XHR0YWdDdHguc2F2ZSgpXG5cdFx0XHR0YWdDdHgudHJhbnNsYXRlKGltZy53aWR0aCwgMClcblx0XHRcdHRhZ0N0eC5zY2FsZSgtMSwgMSlcblx0XHRcdHRhZ0N0eC5kcmF3SW1hZ2UoaW1nLFxuXHRcdFx0XHQwLCBoZWlnaHQgLSBUQUdfSEVJR0hULCB3aWR0aCwgVEFHX0hFSUdIVCxcblx0XHRcdFx0eCwgMCwgd2lkdGgsIFRBR19IRUlHSFQpXG5cdFx0XHR0YWdDdHguZHJhd0ltYWdlKGltZyxcblx0XHRcdFx0MCwgaGVpZ2h0IC0gVEFHX0hFSUdIVCwgd2lkdGgsIFRBR19IRUlHSFQsXG5cdFx0XHRcdHggLSB3aWR0aCwgMCwgd2lkdGgsIFRBR19IRUlHSFQpXG5cdFx0XHR0YWdDdHgucmVzdG9yZSgpXG5cblx0XHRlbHNlXG5cdFx0XHR0YWdDdHguZHJhd0ltYWdlKGltZyxcblx0XHRcdFx0MCwgaGVpZ2h0IC0gVEFHX0hFSUdIVCwgd2lkdGgsIFRBR19IRUlHSFQsXG5cdFx0XHRcdC14LCAwLCB3aWR0aCwgVEFHX0hFSUdIVClcblx0XHRcdHRhZ0N0eC5kcmF3SW1hZ2UoaW1nLFxuXHRcdFx0XHQwLCBoZWlnaHQgLSBUQUdfSEVJR0hULCB3aWR0aCwgVEFHX0hFSUdIVCxcblx0XHRcdFx0LXggKyB3aWR0aCwgMCwgd2lkdGgsIFRBR19IRUlHSFQpXG5cblx0XHQjIGRlY29kZSBwYW5vIG1hdHJpeCBjb2RlXG5cdFx0cGFubyA9IENhbnZhc01hdHJpeENvZGUuZGVjb2RlKFxuXHRcdFx0dGFnQ2FudmFzLFxuXHRcdFx0MCxcblx0XHRcdDEwLFxuXHRcdFx0MTY2NCwgVEFHX0hFSUdIVCAtIDEwKVxuXG5cdFx0IyBpZiB0YWcgaXMgaW52YWxpZCwgdGhydVxuXHRcdGlmIHBhbm8gPT0gbnVsbFxuXG5cdFx0XHRvdXRDYW52YXMud2lkdGggPSBnc3ZwLndpZHRoXG5cdFx0XHRvdXRDYW52YXMuaGVpZ2h0ID0gKGltZy5oZWlnaHQgLyBpbWcud2lkdGgpICogZ3N2cC53aWR0aFxuXG5cdFx0XHRvdXRDdHguZmlsbFN0eWxlID0gJyMwMDAwMDAnXG5cdFx0XHRvdXRDdHguZmlsbFJlY3QoMCwgMCwgb3V0Q2FudmFzLndpZHRoLCBvdXRDYW52YXMuaGVpZ2h0KVxuXHRcdFx0b3V0Q3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIGltZy53aWR0aCwgaW1nLmhlaWdodCwgMCwgMCwgb3V0Q2FudmFzLndpZHRoLCBvdXRDYW52YXMuaGVpZ2h0KVxuXG5cdFx0XHRzYXZlQW5kTmV4dCgpXG5cblx0XHRjb25zb2xlLmxvZyBwYW5vXG5cblx0XHQjIGNoZWNrIGlmIHRoZSBwYW5vIGlkIGlzIHZhbGlkXG5cdFx0c3MuZ2V0UGFub3JhbWFCeUlkIHBhbm8uaWQsIChkYXRhLCBzdGF0dXMpIC0+XG5cblx0XHRcdGlmIHN0YXR1cyA9PSBnb29nbGUubWFwcy5TdHJlZXRWaWV3U3RhdHVzLk9LIFxuXHRcdFx0XHQjIGdlbmVyYXRlIHBhbm9cblx0XHRcdFx0YkNoYW5nZWQgPSBmYWxzZVxuXHRcdFx0XHRnc3ZwLmNvbXBvc2VQYW5vcmFtYSggcGFuby5pZCwgcGFuby5oZWFkaW5nICsgaGVhZGluZ09mZnNldCApXG5cblx0XHRcdGVsc2Vcblx0XHRcdFx0YkNoYW5nZWQgPSB0cnVlXG5cblx0XHRcdFx0cmVzdWx0ID0gLyhbXFwtMC05Ll0rKSwgKFtcXC0wLTkuXSspLy5leGVjKHBhbm8ubGF0TG5nKVxuXHRcdFx0XHRsYXRMbmcgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHJlc3VsdFsxXSwgcmVzdWx0WzJdKVxuXG5cdFx0XHRcdHNlYXJjaE5lYXJlc3RQYW5vIGxhdExuZywgKG5ld0lkLCBuZXdMYXRMbmcsIGRpc3QpLT5cblxuXHRcdFx0XHRcdGNvbnNvbGUubG9nIG5ld0xhdExuZywgbmV3SWQsIGRpc3RcblxuXHRcdFx0XHRcdGNoYW5nZWRJbmZvID0gXG5cdFx0XHRcdFx0XHRmaWxlbmFtZTogZmlsZW5hbWVcblx0XHRcdFx0XHRcdG9sZElkOiBwYW5vLmlkXG5cdFx0XHRcdFx0XHRuZXdJZDogbmV3SWRcblx0XHRcdFx0XHRcdG9sZExhdExuZzogbGF0TG5nLnRvU3RyaW5nKClcblx0XHRcdFx0XHRcdG5ld0xhdExuZzogbmV3TGF0TG5nLnRvU3RyaW5nKClcblx0XHRcdFx0XHRcdGRpc3RhbmNlOiBkaXN0XG5cblx0XHRcdFx0XHRjaGFuZ2VkTGlzdC5wdXNoKCBjaGFuZ2VkSW5mbyApXG5cdFx0XHRcdFx0Y2hhbmdlZFR4dCA9IEpTT04uc3RyaW5naWZ5KCBjaGFuZ2VkTGlzdCApXG5cdFx0XHRcdFx0ZnMud3JpdGVGaWxlKFwiI3tkZXN0RGlyfS9fcmVwb3J0LnR4dFwiLCBjaGFuZ2VkVHh0KVxuXG5cdFx0XHRcdFx0Y29uc29sZS5sb2cgXCJjaGFuZ2VkOiN7ZmlsZW5hbWV9LCBuZWFyZXN0IHBhbm86ICN7cGFuby5pZH0gLT4gI3tuZXdJZH0sIGRpc3RhbmNlIGZyb20gb3JpZ2luYWw6ICN7ZGlzdH1cIlxuXHRcdFx0XHRcdGdzdnAuY29tcG9zZVBhbm9yYW1hKCBuZXdJZCwgcGFuby5oZWFkaW5nICsgaGVhZGluZ09mZnNldCApXG5cblx0Iy0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCMgMy4gbWVyZ2Ugd2l0aCBtYXRyaXggY29kZSBhbmQgc2F2ZVxuXHRzYXZlUGFubyA9IC0+XG5cdFx0Y29uc29sZS5sb2cgXCJzYXZlIHBhbm9cIlxuXG5cdFx0b3V0Q2FudmFzLndpZHRoID0gZ3N2cC53aWR0aFxuXHRcdG91dENhbnZhcy5oZWlnaHQgPSAoaW1nLmhlaWdodCAvIGltZy53aWR0aCkgKiBnc3ZwLndpZHRoXG5cblx0XHQjIGRyYXdcblx0XHRvdXRDdHguZmlsbFN0eWxlID0gJyMwMDAwMDAnXG5cdFx0b3V0Q3R4LmZpbGxSZWN0KDAsIDAsIG91dENhbnZhcy53aWR0aCwgb3V0Q2FudmFzLmhlaWdodClcblxuXHRcdGlmIGJGbGlwXG5cdFx0XHRjb25zb2xlLmxvZyBcImZsaXBlZFwiXG5cdFx0XHRvdXRDdHguc2F2ZSgpXG5cdFx0XHRvdXRDdHgudHJhbnNsYXRlKG91dENhbnZhcy53aWR0aCwgMClcblx0XHRcdG91dEN0eC5zY2FsZSgtMSwgMSlcblxuXHRcdG91dEN0eC5kcmF3SW1hZ2UoZ3N2cC5jYW52YXMsIDAsIDApXG5cblx0XHRpZiBiRmxpcFxuXHRcdFx0b3V0Q3R4LnJlc3RvcmUoKVxuXG5cdFx0IyBjb2RlXG5cdFx0b3V0Q3R4LmRyYXdJbWFnZShcblx0XHRcdGltZyxcblx0XHRcdDAsIGltZy5oZWlnaHQgLSBUQUdfSEVJR0hULCBcdFx0aW1nLndpZHRoLCBUQUdfSEVJR0hULFxuXHRcdFx0MCwgb3V0Q2FudmFzLmhlaWdodCAtIFRBR19IRUlHSFQsIFx0aW1nLndpZHRoLCBUQUdfSEVJR0hUKVxuXG5cdFx0IyBjaGFuZ2VkXG5cdFx0aWYgYkNoYW5nZWRcblx0XHRcdG91dEN0eC5maWxsU3R5bGUgPSAnI2ZmMDAwMCdcblx0XHRcdG91dEN0eC5maWxsUmVjdChvdXRDYW52YXMud2lkdGgtNDAsIG91dENhbnZhcy5oZWlnaHQtNDAsIDQwLCA0MClcblxuXHRcdHNhdmVBbmROZXh0KClcdFx0XG5cblx0Iy0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCMgNC4gbmV4dFxuXHRzYXZlQW5kTmV4dCA9IC0+XG5cdFx0XG5cdFx0ZGVzdCA9IFwiI3tkZXN0RGlyfS8je2ZpbGVuYW1lfVwiXG5cdFx0c2F2ZUNhbnZhcyggb3V0Q2FudmFzLCBkZXN0IClcblxuXHRcdGlmICsraWR4IDwgZmlsZUxpc3QubGVuZ3RoXG5cdFx0XHRsb2FkSW1nKClcblx0XHRlbHNlXG5cdFx0XHRvbkNvbXBsZXRlKClcblxuXHQjLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0IyB0cmlnZ2VyXG5cdGltZy5vbmxvYWQgPSBvbkxvYWRJbWdcblx0Z3N2cC5vblBhbm9yYW1hTG9hZCA9IHNhdmVQYW5vXG5cblx0bG9hZEltZygpXG5cblxuIyBzZWFyY2ggbmVhcmVzdCBwYW5vXG5zZWFyY2hSYWRpdXMgPSBbMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIDExLCAxMiwgMTMsIDE0LCAxNSwgMjAsIDMwLCA0MCwgNTAsIDYwLCA3MCwgODAsIDkwLCAxMDBdXG5zZWFyY2hOZWFyZXN0UGFubyA9IChvcmlnaW4sIGNhbGxiYWNrKSAtPlxuXG5cdHJhZGl1cyA9IDFcblxuXHRyZXN1bHQgPSBbXVxuXHRyZW1haW4gPSBzZWFyY2hSYWRpdXMubGVuZ3RoXG5cblx0Y29uc29sZS5sb2cgXCJzZWFyY2hOZWFyZXN0UGFubzogI3tvcmlnaW59XCJcblxuXHRmb3IgaSwgciBpbiBzZWFyY2hSYWRpdXNcblx0XHRzZXRUaW1lb3V0IC0+XG5cdFx0XHRzcy5nZXRQYW5vcmFtYUJ5TG9jYXRpb24gb3JpZ2luLCByLCAoZGF0YSwgc3RhdHVzKSAtPlxuXHRcdFx0XHRpZiBzdGF0dXMgPT0gZ29vZ2xlLm1hcHMuU3RyZWV0Vmlld1N0YXR1cy5PS1xuXHRcdFx0XHRcdGRhdGEgPVxuXHRcdFx0XHRcdFx0aWQ6IGRhdGEubG9jYXRpb24ucGFub1xuXHRcdFx0XHRcdFx0bGF0TG5nOiBkYXRhLmxvY2F0aW9uLmxhdExuZ1xuXHRcdFx0XHRcdFx0ZGlzdGFuY2U6IGdvb2dsZS5tYXBzLmdlb21ldHJ5LnNwaGVyaWNhbC5jb21wdXRlRGlzdGFuY2VCZXR3ZWVuKG9yaWdpbiwgZGF0YS5sb2NhdGlvbi5sYXRMbmcpXG5cblx0XHRcdFx0XHRyZXN1bHQucHVzaCggZGF0YSApXG5cblx0XHRcdFx0aWYgLS1yZW1haW4gPT0gMFxuXHRcdFx0XHRcdGNvbXBsZXRlKClcblxuXHRcdCwgNTAgKiBpXG5cblx0Y29tcGxldGUgPSAtPlxuXHRcdFxuXHRcdG1pbkRpc3QgPSAxMDAwMDAwMDBcblx0XHRwYW5vID0gbnVsbFxuXHRcdGxhdExuZyA9IG51bGxcblxuXHRcdGZvciByIGluIHJlc3VsdFxuXHRcdFx0aWYgci5kaXN0YW5jZSA8IG1pbkRpc3Rcblx0XHRcdFx0bWluRGlzdCA9IHIuZGlzdGFuY2Vcblx0XHRcdFx0cGFubyA9IHIuaWRcblx0XHRcdFx0bGF0TG5nID0gci5sYXRMbmdcblxuXHRcdGNhbGxiYWNrKHBhbm8sIGxhdExuZywgbWluRGlzdClcblxuXG4jLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5vbkNvbXBsZXRlID0gLT5cblxuXHRzZXRUaW1lb3V0IC0+XG5cblx0XHRjaGFuZ2VkVHh0ID0gSlNPTi5zdHJpbmdpZnkoIGNoYW5nZWRMaXN0IClcblx0XHRmcy53cml0ZUZpbGUoXCIje2Rlc3REaXJ9L19yZXBvcnQudHh0XCIsIGNoYW5nZWRUeHQpXG5cblx0XHRmcy5yZW5hbWVTeW5jKHNyY0RpciwgXCIje3NyY0Rpcn0ucHJveHlcIilcblx0XHRmcy5yZW5hbWVTeW5jKGRlc3REaXIsIHNyY0RpcilcblxuXHRcdG5vdGlmaWVyLm5vdGlmeVxuXHRcdFx0dGl0bGU6IFwiUHJveHkgUmVwbGFjZXJcIlxuXHRcdFx0bWVzc2FnZTogXCJBbGwgZG9uZSFcIlxuXHRcdFx0c291bmQ6IHRydWVcblx0LCAzMDAwXG5cblxuXHRcblxuXG4iXX0=