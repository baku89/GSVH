var GSVHyperlapse, GSVHyperlapseHeading, GSVHyperlapseMethod, getFollowedPath, pointOnLine, uniqueID;

Number.prototype.toRad = function() {
  return this * Math.PI / 180;
};

Number.prototype.toDeg = function() {
  return this * 180 / Math.PI;
};

GSVHyperlapseHeading = {
  BACKWARD: "backward",
  LOOKAT: "lookat",
  NORTH: "north",
  BEGINNING: "begin"
};

GSVHyperlapseMethod = {
  DRECTION: 'direction',
  PANOID: 'panoid'
};

pointOnLine = function(t, a, b) {
  var lat1, lat2, lng1, lng2, x, y;
  lat1 = a.lat().toRad();
  lng1 = a.lng().toRad();
  lat2 = b.lat().toRad();
  lng2 = b.lng().toRad();
  x = lat1 + t * (lat2 - lat1);
  y = lng1 + t * (lng2 - lng1);
  return new google.maps.LatLng(x.toDeg(), y.toDeg());
};

getFollowedPath = function(m, a, b) {
  var d, t;
  d = google.maps.geometry.spherical.computeDistanceBetween(a, b);
  if (m < 0 || d < m) {
    alert("error getFolowedPath");
  }
  t = m / d;
  return pointOnLine(t, a, b);
};

uniqueID = function() {
  var date, randam, time;
  randam = Math.floor(Math.random() * 1000);
  date = new Date();
  time = date.getTime();
  return randam + time.toString();
};

GSVHyperlapse = (function() {
  GSVHyperlapse.DIST_BETWEEN_PTS = 5;

  GSVHyperlapse.MAX_PTS = 100;

  GSVHyperlapse.dirService = new google.maps.DirectionsService({});

  GSVHyperlapse.dirRegex = /dir\/([0-9.-]*),([0-9.-]*)\/([0-9.-]*),([0-9.-]*)\/@([0-9.-]*),([0-9.-]*),([0-9]*)z(.*)(\/data=(.*))?$/;

  GSVHyperlapse.dataRegex = /!1d([0-9.-]*)!2d([0-9.-]*)/g;

  GSVHyperlapse.dataLatLngRegex = /!1d([0-9.-]*)!2d([0-9.-]*)/;

  GSVHyperlapse.onError = function(err) {
    return alert("error");
  };

  GSVHyperlapse.onMessage = function() {
    return null;
  };

  GSVHyperlapse.onPanoramaLoad = function() {
    return null;
  };

  GSVHyperlapse.onAnalyzeComplete = function() {
    return null;
  };

  GSVHyperlapse.onComposeComplete = function() {
    return null;
  };

  GSVHyperlapse.onProgress = function() {
    return null;
  };

  GSVHyperlapse.onCancel = function() {
    return null;
  };

  function GSVHyperlapse(name, map) {
    this.name = name;
    this.bCancel = false;
    this.bWaiting = false;
    this.uid = uniqueID();
    this.panoList = [];
    this.client = new google.maps.StreetViewService();
    this.gsvp = new GSVPANO.PanoLoader();
    if (map != null) {
      this.map = new google.maps.Map(map, {
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        zoom: 16
      });
    }
  }

  GSVHyperlapse.prototype.cancel = function() {
    this.bCancel = true;
    if (!this.bWaiting) {
      return GSVHyperlapse.onCancel.call(this);
    }
  };

  GSVHyperlapse.prototype.createPanoData = function(res) {
    return {
      id: res.location.pano,
      rotation: res.tiles.centerHeading,
      pitch: res.tiles.originPitch,
      latLng: res.location.latLng,
      date: res.imageDate
    };
  };

  GSVHyperlapse.prototype.setParameters = function(params) {
    var result;
    this.method = params.method;
    this.travelMode = params.travelMode;
    this.step = parseFloat(params.step);
    this.searchRadius = parseFloat(params.searchRadius);
    this.headingMode = params.headingMode;
    this.zoom = parseInt(params.zoom);
    this.gsvp.setZoom(this.zoom);
    if (this.headingMode === GSVHyperlapseHeading.LOOKAT) {
      result = /([0-9.]+), ([0-9.]+)/.exec(params.lookat);
      if (!(result != null)) {
        alert("lookat latLng cannot be parsed");
        return;
      }
      return this.lookat = new google.maps.LatLng(result[1], result[2]);
    }
  };

  GSVHyperlapse.prototype.createFromDirection = function(url) {
    var prevId, rawPts, requestRoute, retrivePanoData, routeRes, subdivideRoute;
    rawPts = [];
    routeRes = null;
    prevId = '';
    this.method = GSVHyperlapseMethod.DIRECTION;
    this.sourceUrl = url;
    requestRoute = (function(_this) {
      return function() {
        var center, destination, i, m, origin, r, req, result, waypoints, wp, zoom;
        result = GSVHyperlapse.dirRegex.exec(url);
        if (result == null) {
          alert("cannot parse url");
          return;
        }
        origin = new google.maps.LatLng(result[1], result[2]);
        destination = new google.maps.LatLng(result[3], result[4]);
        center = new google.maps.LatLng(result[5], result[6]);
        zoom = parseInt(result[7]);
        _this.map.setZoom(zoom);
        _this.map.setCenter(center);
        console.log(_this.travelMode);
        req = {
          origin: origin,
          destination: destination,
          travelMode: _this.travelMode
        };
        waypoints = [];
        if ((result = result[8].match(GSVHyperlapse.dataRegex)) != null) {
          for (i in result) {
            r = result[i];
            m = GSVHyperlapse.dataLatLngRegex.exec(r);
            wp = new google.maps.LatLng(m[2], m[1]);
            waypoints.push({
              location: wp.toString(),
              stopover: false
            });
          }
          req.waypoints = waypoints;
        }
        return GSVHyperlapse.dirService.route(req, function(res, status) {
          if (status === google.maps.DirectionsStatus.OK) {
            routeRes = res;
            return subdivideRoute();
          } else {
            return GSVHyperlapse.onMessage.call(_this, "cannot get route.");
          }
        });
      };
    })(this);
    subdivideRoute = (function(_this) {
      return function() {
        var a, b, d, i, j, m, path, pt, r, ref, route;
        if (_this.bCancel) {
          GSVHyperlapse.onCancel.call(_this);
          return;
        }
        GSVHyperlapse.onMessage.call(_this, "subdividing route..");
        route = routeRes.routes[0];
        path = route.overview_path;
        GSVHyperlapse.onMessage.call(_this, "path length: " + (parseInt(google.maps.geometry.spherical.computeLength(path))) + "(m), step: " + _this.step + "(m), search radius: " + _this.searchRadius + " (m)");
        d = 0;
        r = 0;
        m = 0;
        a = b = null;
        for (i = j = 0, ref = path.length - 2; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {
          a = path[i];
          b = path[i + 1];
          d = google.maps.geometry.spherical.computeDistanceBetween(a, b);
          m = -r + _this.step;
          if (d < m) {
            r += d;
          } else {
            while (m < d) {
              pt = getFollowedPath(m, a, b);
              rawPts.push(pt);
              m += _this.step;
            }
            r = _this.step - (m - d);
          }
        }
        _this.map.fitBounds(route.bounds);
        GSVHyperlapse.onMessage.call(_this, "number of waypoints: " + rawPts.length);
        return retrivePanoData();
      };
    })(this);
    retrivePanoData = (function(_this) {
      return function() {
        var idx, onLoad;
        GSVHyperlapse.onMessage.call(_this, "retriving pano id..");
        idx = 0;
        onLoad = function(res, status) {
          var marker, pano;
          if (_this.bCancel) {
            GSVHyperlapse.onCancel.call(_this);
            return;
          }
          if (status === google.maps.StreetViewStatus.OK) {
            pano = _this.createPanoData(res);
            if (pano.id !== prevId) {
              _this.panoList.push(pano);
              marker = new google.maps.Marker({
                position: pano.latLng,
                map: _this.map,
                title: "" + idx
              });
              prevId = pano.id;
            }
          }
          GSVHyperlapse.onProgress.call(_this, idx, rawPts.length);
          if (++idx < rawPts.length) {
            return _this.client.getPanoramaByLocation(rawPts[idx], _this.searchRadius, onLoad);
          } else {
            _this.bWaiting = false;
            GSVHyperlapse.onMessage.call(_this, "total pano id: " + _this.panoList.length);
            GSVHyperlapse.onProgress.call(_this, idx, rawPts.length);
            return GSVHyperlapse.onAnalyzeComplete.call(_this);
          }
        };
        _this.bWaiting = true;
        prevId = '';
        return _this.client.getPanoramaByLocation(rawPts[idx], _this.searchRadius, onLoad);
      };
    })(this);
    return requestRoute();
  };

  GSVHyperlapse.prototype.createFromPanoId = function(list) {
    var idx, onLoad;
    idx = 0;
    GSVHyperlapse.onMessage.call(this, "start compose..");
    GSVHyperlapse.onMessage.call(this, "eadingMode:" + this.headingMode);
    onLoad = (function(_this) {
      return function(res, status) {
        var marker, pano;
        if (idx === 0) {
          GSVHyperlapse.onMessage.call(_this, "analyzing..");
        }
        if (status === google.maps.StreetViewStatus.OK) {
          if (_this.bCancel) {
            GSVHyperlapse.onCancel.call(_this);
            return;
          }
          pano = _this.createPanoData(res);
          _this.panoList.push(pano);
          if (idx === 0) {
            _this.map.setCenter(pano.latLng);
            _this.map.setZoom(13);
          }
          marker = new google.maps.Marker({
            position: pano.latLng,
            map: _this.map,
            title: "" + idx
          });
          GSVHyperlapse.onProgress.call(_this, idx, list.length);
          if (++idx < list.length) {
            return _this.client.getPanoramaById(list[idx], onLoad);
          } else {
            _this.bWaiting = false;
            GSVHyperlapse.onMessage.call(_this, "total pano id: " + _this.panoList.length);
            GSVHyperlapse.onProgress.call(_this, idx, list.length);
            return GSVHyperlapse.onAnalyzeComplete.call(_this);
          }
        } else {
          return alert("error on createFromPanoId() : " + status);
        }
      };
    })(this);
    this.bWaiting = true;
    return this.client.getPanoramaById(list[idx], onLoad);
  };

  GSVHyperlapse.prototype.compose = function(callback) {
    var idx, loadPanorama, onCompose;
    if (this.panoList.length === 0) {
      GSVHyperlapse.onMessage.call(this, "there is no pano id.");
      return;
    }
    GSVHyperlapse.onMessage.call(this, "composing panorama.. size:" + this.gsvp.width + "x" + this.gsvp.height);
    if (this.headingMode === GSVHyperlapseHeading.BACKWARD || this.headingMode === GSVHyperlapseHeading.BEGIN) {
      if (this.panoList.length < 2) {
        alert("pano id's length must be 2 at least");
        return;
      }
    }
    loadPanorama = (function(_this) {
      return function() {
        var h, i;
        if (!(_this.panoList[idx].heading != null)) {
          h = 0;
          if (_this.headingMode === GSVHyperlapseHeading.BACKWARD) {
            i = idx === 0 ? 1 : idx;
            h = google.maps.geometry.spherical.computeHeading(_this.panoList[i].latLng, _this.panoList[i - 1].latLng);
          } else if (_this.headingMode === GSVHyperlapseHeading.LOOKAT) {
            h = google.maps.geometry.spherical.computeHeading(_this.panoList[idx].latLng, _this.lookat);
          } else if (_this.headingMode === GSVHyperlapseHeading.BEGIN) {
            h = google.maps.geometry.spherical.computeHeading(_this.panoList[1].latLng, _this.panoList[0].latLng);
          }
          _this.panoList[idx].heading = h;
          return _this.gsvp.composePanorama(_this.panoList[idx].id, _this.panoList[idx].heading);
        }
      };
    })(this);
    onCompose = (function(_this) {
      return function() {
        if (_this.bCancel) {
          GSVHyperlapse.onCancel.call(_this);
          return;
        }
        GSVHyperlapse.onProgress.call(_this, idx, _this.panoList.length);
        GSVHyperlapse.onPanoramaLoad.call(_this, idx, _this.gsvp.canvas, _this.panoList[idx]);
        if (++idx < _this.panoList.length) {
          return loadPanorama();
        } else {
          _this.bWaiting = false;
          console.log("complete");
          GSVHyperlapse.onProgress.call(_this, idx, _this.panoList.length);
          GSVHyperlapse.onMessage.call(_this, "complete - total: " + _this.panoList.length + ", duration: " + (_this.panoList.length / 24));
          GSVHyperlapse.onComposeComplete.call(_this);
          if (callback != null) {
            return callback();
          }
        }
      };
    })(this);
    this.gsvp.onPanoramaLoad = onCompose;
    this.gsvp.onError = function(msg) {
      return alert("error onCompose() : " + msg);
    };
    this.gsvp.onNoPanoramaData = function(status) {
      return alert("error onNoPanoramaData() : " + status);
    };
    idx = 0;
    this.bWaiting = true;
    return loadPanorama();
  };

  return GSVHyperlapse;

})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkdTVkh5cGVybGFwc2UuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUE7O0FBQUEsTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFqQixHQUF5QixTQUFBO1NBQU0sSUFBQSxHQUFJLElBQUksQ0FBQyxFQUFULEdBQWM7QUFBcEI7O0FBQ3pCLE1BQU0sQ0FBQyxTQUFTLENBQUMsS0FBakIsR0FBeUIsU0FBQTtTQUFNLElBQUEsR0FBSSxHQUFKLEdBQVUsSUFBSSxDQUFDO0FBQXJCOztBQUV6QixvQkFBQSxHQUNDO0VBQUEsUUFBQSxFQUFVLFVBQVY7RUFDQSxNQUFBLEVBQVEsUUFEUjtFQUVBLEtBQUEsRUFBTyxPQUZQO0VBR0EsU0FBQSxFQUFXLE9BSFg7OztBQUtELG1CQUFBLEdBQ0M7RUFBQSxRQUFBLEVBQVUsV0FBVjtFQUNBLE1BQUEsRUFBUSxRQURSOzs7QUFHRCxXQUFBLEdBQWMsU0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVA7QUFDYixNQUFBO0VBQUEsSUFBQSxHQUFPLENBQUMsQ0FBQyxHQUFGLENBQUEsQ0FBTyxDQUFDLEtBQVIsQ0FBQTtFQUNQLElBQUEsR0FBTyxDQUFDLENBQUMsR0FBRixDQUFBLENBQU8sQ0FBQyxLQUFSLENBQUE7RUFFUCxJQUFBLEdBQU8sQ0FBQyxDQUFDLEdBQUYsQ0FBQSxDQUFPLENBQUMsS0FBUixDQUFBO0VBQ1AsSUFBQSxHQUFPLENBQUMsQ0FBQyxHQUFGLENBQUEsQ0FBTyxDQUFDLEtBQVIsQ0FBQTtFQUVQLENBQUEsR0FBSSxJQUFBLEdBQU8sQ0FBQSxHQUFJLENBQUMsSUFBQSxHQUFPLElBQVI7RUFDZixDQUFBLEdBQUksSUFBQSxHQUFPLENBQUEsR0FBSSxDQUFDLElBQUEsR0FBTyxJQUFSO0FBRWYsU0FBVyxJQUFBLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBWixDQUFtQixDQUFDLENBQUMsS0FBRixDQUFBLENBQW5CLEVBQThCLENBQUMsQ0FBQyxLQUFGLENBQUEsQ0FBOUI7QUFW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Q0FBQyxJQUF4QixDQUE2QixLQUE3QixFQUFnQyxvQkFBQSxHQUFxQixLQUFDLENBQUEsUUFBUSxDQUFDLE1BQS9CLEdBQXNDLGNBQXRDLEdBQW1ELENBQUMsS0FBQyxDQUFBLFFBQVEsQ0FBQyxNQUFWLEdBQW1CLEVBQXBCLENBQW5GO1VBQ0EsYUFBYSxDQUFDLGlCQUFpQixDQUFDLElBQWhDLENBQXFDLEtBQXJDO1VBQ0EsSUFBRyxnQkFBSDttQkFDQyxRQUFBLENBQUEsRUFERDtXQVJEOztNQVhXO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQTtJQXVCWixJQUFDLENBQUEsSUFBSSxDQUFDLGNBQU4sR0FBdUI7SUFDdkIsSUFBQyxDQUFBLElBQUksQ0FBQyxPQUFOLEdBQWdCLFNBQUMsR0FBRDthQUNmLEtBQUEsQ0FBTSxzQkFBQSxHQUF1QixHQUE3QjtJQURlO0lBRWhCLElBQUMsQ0FBQSxJQUFJLENBQUMsZ0JBQU4sR0FBeUIsU0FBQyxNQUFEO2FBQ3hCLEtBQUEsQ0FBTSw2QkFBQSxHQUE4QixNQUFwQztJQUR3QjtJQUd6QixHQUFBLEdBQU07SUFDTixJQUFDLENBQUEsUUFBRCxHQUFZO1dBRVosWUFBQSxDQUFBO0VBbEVRIiwiZmlsZSI6IkdTVkh5cGVybGFwc2UuanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8iLCJzb3VyY2VzQ29udGVudCI6WyJOdW1iZXIucHJvdG90eXBlLnRvUmFkID0gKCkgLT4gQCAqIE1hdGguUEkgLyAxODBcbk51bWJlci5wcm90b3R5cGUudG9EZWcgPSAoKSAtPiBAICogMTgwIC8gTWF0aC5QSVxuXG5HU1ZIeXBlcmxhcHNlSGVhZGluZyA9XG5cdEJBQ0tXQVJEOiBcImJhY2t3YXJkXCJcblx0TE9PS0FUOiBcImxvb2thdFwiXG5cdE5PUlRIOiBcIm5vcnRoXCJcblx0QkVHSU5OSU5HOiBcImJlZ2luXCJcblxuR1NWSHlwZXJsYXBzZU1ldGhvZCA9IFxuXHREUkVDVElPTjogJ2RpcmVjdGlvbidcblx0UEFOT0lEOiAncGFub2lkJ1xuXG5wb2ludE9uTGluZSA9ICh0LCBhLCBiKSAtPlxuXHRsYXQxID0gYS5sYXQoKS50b1JhZCgpXG5cdGxuZzEgPSBhLmxuZygpLnRvUmFkKClcblxuXHRsYXQyID0gYi5sYXQoKS50b1JhZCgpXG5cdGxuZzIgPSBiLmxuZygpLnRvUmFkKClcblxuXHR4ID0gbGF0MSArIHQgKiAobGF0MiAtIGxhdDEpO1xuXHR5ID0gbG5nMSArIHQgKiAobG5nMiAtIGxuZzEpO1xuXG5cdHJldHVybiBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHgudG9EZWcoKSwgeS50b0RlZygpKVxuXG5nZXRGb2xsb3dlZFBhdGggPSAobSwgYSwgYikgLT5cblx0ZCA9IGdvb2dsZS5tYXBzLmdlb21ldHJ5LnNwaGVyaWNhbC5jb21wdXRlRGlzdGFuY2VCZXR3ZWVuKGEsIGIpXG5cblx0aWYgbSA8IDAgfHwgZCA8IG1cblx0XHRhbGVydChcImVycm9yIGdldEZvbG93ZWRQYXRoXCIpXG5cblx0dCA9IG0gLyBkXG5cblx0cmV0dXJuIHBvaW50T25MaW5lKHQsIGEsIGIpXG5cbiMgaHR0cDovL2hpZGVpY2hpLmNvbS9hcmNoaXZlcy85NFxudW5pcXVlSUQgPSAtPlxuXHRyYW5kYW0gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwMClcblx0ZGF0ZSA9IG5ldyBEYXRlKClcblx0dGltZSA9IGRhdGUuZ2V0VGltZSgpXG5cdHJldHVybiByYW5kYW0gKyB0aW1lLnRvU3RyaW5nKClcblxuY2xhc3MgR1NWSHlwZXJsYXBzZVxuXG5cdCMgY29uc3Rcblx0QERJU1RfQkVUV0VFTl9QVFMgPSA1XG5cdEBNQVhfUFRTID0gMTAwXG5cblx0IyBzdGF0aWMgdmFyXG5cdEBkaXJTZXJ2aWNlID0gbmV3IGdvb2dsZS5tYXBzLkRpcmVjdGlvbnNTZXJ2aWNlKHt9KVxuXHRAZGlyUmVnZXggPSAvZGlyXFwvKFswLTkuLV0qKSwoWzAtOS4tXSopXFwvKFswLTkuLV0qKSwoWzAtOS4tXSopXFwvQChbMC05Li1dKiksKFswLTkuLV0qKSwoWzAtOV0qKXooLiopKFxcL2RhdGE9KC4qKSk/JC9cblx0QGRhdGFSZWdleCA9IC8hMWQoWzAtOS4tXSopITJkKFswLTkuLV0qKS9nXG5cdEBkYXRhTGF0TG5nUmVnZXggPSAvITFkKFswLTkuLV0qKSEyZChbMC05Li1dKikvXG5cblx0IyBldmVudFxuXHRAb25FcnJvciBcdFx0XHQ9IChlcnIpIC0+IGFsZXJ0KFwiZXJyb3JcIilcblx0QG9uTWVzc2FnZVx0XHRcdD0gKCkgLT4gbnVsbFxuXHRAb25QYW5vcmFtYUxvYWQgXHQ9ICgpIC0+IG51bGxcblx0QG9uQW5hbHl6ZUNvbXBsZXRlXHQ9ICgpIC0+IG51bGxcblx0QG9uQ29tcG9zZUNvbXBsZXRlICA9ICgpIC0+IG51bGxcblx0QG9uUHJvZ3Jlc3NcdFx0XHQ9ICgpIC0+IG51bGxcblx0QG9uQ2FuY2VsIFx0XHRcdD0gKCkgLT4gbnVsbFxuXG5cdCMgY29uc3RydWN0b3Jcblx0Y29uc3RydWN0b3I6IChuYW1lLCBtYXApIC0+XG5cdFx0QG5hbWUgPSBuYW1lXG5cblx0XHRAYkNhbmNlbCA9IGZhbHNlXG5cdFx0QGJXYWl0aW5nID0gZmFsc2Vcblx0XHRAdWlkID0gdW5pcXVlSUQoKVxuXHRcdEBwYW5vTGlzdCA9IFtdXG5cdFx0QGNsaWVudCA9IG5ldyBnb29nbGUubWFwcy5TdHJlZXRWaWV3U2VydmljZSgpXG5cdFx0QGdzdnAgPSBuZXcgR1NWUEFOTy5QYW5vTG9hZGVyKClcblx0XHRpZiBtYXA/XG5cdFx0XHRAbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcCBtYXAsXG5cdFx0XHRcdG1hcFR5cGVJZDogZ29vZ2xlLm1hcHMuTWFwVHlwZUlkLlJPQURNQVBcblx0XHRcdFx0em9vbTogMTZcblxuXHQjIG1ldGhvZHNcblx0Y2FuY2VsOiAtPlxuXHRcdEBiQ2FuY2VsID0gdHJ1ZVxuXHRcdGlmICFAYldhaXRpbmdcblx0XHRcdEdTVkh5cGVybGFwc2Uub25DYW5jZWwuY2FsbCBAXG5cblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQjIGNsYXNzIG1ldGhvZFxuXHRjcmVhdGVQYW5vRGF0YTogKHJlcykgLT5cblx0XHRyZXR1cm4ge1xuXHRcdFx0aWQ6IHJlcy5sb2NhdGlvbi5wYW5vXG5cdFx0XHRyb3RhdGlvbjogcmVzLnRpbGVzLmNlbnRlckhlYWRpbmcjICogTWF0aC5QSSAvIDE4MC4wXG5cdFx0XHRwaXRjaDogcmVzLnRpbGVzLm9yaWdpblBpdGNoIyAqIE1hdGguUEkgLyAxODAuMFxuXHRcdFx0bGF0TG5nOiByZXMubG9jYXRpb24ubGF0TG5nXG5cdFx0XHRkYXRlOiByZXMuaW1hZ2VEYXRlXG5cdFx0fVxuXG5cdHNldFBhcmFtZXRlcnM6IChwYXJhbXMpIC0+XG5cblx0XHRAbWV0aG9kIFx0XHQ9IHBhcmFtcy5tZXRob2Rcblx0XHRAdHJhdmVsTW9kZSBcdD0gcGFyYW1zLnRyYXZlbE1vZGVcblx0XHRAc3RlcCBcdFx0XHQ9IHBhcnNlRmxvYXQocGFyYW1zLnN0ZXApXG5cdFx0QHNlYXJjaFJhZGl1c1x0PSBwYXJzZUZsb2F0KHBhcmFtcy5zZWFyY2hSYWRpdXMpXG5cdFx0QGhlYWRpbmdNb2RlXHQ9IHBhcmFtcy5oZWFkaW5nTW9kZVxuXHRcdEB6b29tIFx0XHRcdD0gcGFyc2VJbnQocGFyYW1zLnpvb20pXG5cblx0XHRAZ3N2cC5zZXRab29tKCBAem9vbSApXG5cblx0XHQjIGNoZWNrIGhlYWRpbmdNb2RlXG5cdFx0aWYgQGhlYWRpbmdNb2RlID09IEdTVkh5cGVybGFwc2VIZWFkaW5nLkxPT0tBVFxuXHRcdFx0cmVzdWx0ID0gLyhbMC05Ll0rKSwgKFswLTkuXSspLy5leGVjKCBwYXJhbXMubG9va2F0IClcblx0XHRcdGlmICEocmVzdWx0Pylcblx0XHRcdFx0YWxlcnQoXCJsb29rYXQgbGF0TG5nIGNhbm5vdCBiZSBwYXJzZWRcIilcblx0XHRcdFx0cmV0dXJuXG5cdFx0XHRAbG9va2F0ID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyggcmVzdWx0WzFdLCByZXN1bHRbMl0gKVxuXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0Y3JlYXRlRnJvbURpcmVjdGlvbjogKHVybCktPlxuXG5cdFx0cmF3UHRzID0gW11cblx0XHRyb3V0ZVJlcyA9IG51bGxcblx0XHRwcmV2SWQgPSAnJ1xuXHRcdEBtZXRob2QgPSBHU1ZIeXBlcmxhcHNlTWV0aG9kLkRJUkVDVElPTlxuXHRcdEBzb3VyY2VVcmwgPSB1cmxcblxuXHRcdCMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHQjIDEuIHJlcXVlc3Qgcm91dGVcblx0XHRyZXF1ZXN0Um91dGUgPSA9PlxuXHRcdFx0IyBwYXJzZSB1cmxcblx0XHRcdHJlc3VsdCA9IEdTVkh5cGVybGFwc2UuZGlyUmVnZXguZXhlYyggdXJsIClcblxuXHRcdFx0aWYgIXJlc3VsdD9cblx0XHRcdFx0YWxlcnQgXCJjYW5ub3QgcGFyc2UgdXJsXCJcblx0XHRcdFx0cmV0dXJuXG5cblx0XHRcdG9yaWdpbiAgICAgID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyggcmVzdWx0WzFdLCByZXN1bHRbMl0gKVxuXHRcdFx0ZGVzdGluYXRpb25cdD0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyggcmVzdWx0WzNdLCByZXN1bHRbNF0gKVxuXHRcdFx0Y2VudGVyICAgICAgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKCByZXN1bHRbNV0sIHJlc3VsdFs2XSApXG5cdFx0XHR6b29tICAgICAgICA9IHBhcnNlSW50KHJlc3VsdFs3XSlcblxuXHRcdFx0QG1hcC5zZXRab29tKCB6b29tIClcblx0XHRcdEBtYXAuc2V0Q2VudGVyKCBjZW50ZXIgKVxuXG5cdFx0XHRjb25zb2xlLmxvZyBAdHJhdmVsTW9kZVxuXG5cdFx0XHRyZXEgPVxuXHRcdFx0XHRvcmlnaW46IG9yaWdpblxuXHRcdFx0XHRkZXN0aW5hdGlvbjogZGVzdGluYXRpb25cblx0XHRcdFx0dHJhdmVsTW9kZTogQHRyYXZlbE1vZGVcblxuXHRcdFx0IyBwYXJzZSB3YXlwb2ludCBmcm9tIGRhdGFcblx0XHRcdHdheXBvaW50cyA9IFtdXG5cdFx0XHRcblx0XHRcdGlmIChyZXN1bHQgPSByZXN1bHRbOF0ubWF0Y2goIEdTVkh5cGVybGFwc2UuZGF0YVJlZ2V4ICkpP1xuXHRcdFx0XHRmb3IgaSwgciBvZiByZXN1bHRcblx0XHRcdFx0XHRtID0gR1NWSHlwZXJsYXBzZS5kYXRhTGF0TG5nUmVnZXguZXhlYyggciApXG5cdFx0XHRcdFx0d3AgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKCBtWzJdLCBtWzFdIClcblx0XHRcdFx0XHR3YXlwb2ludHMucHVzaFxuXHRcdFx0XHRcdFx0bG9jYXRpb246IHdwLnRvU3RyaW5nKClcblx0XHRcdFx0XHRcdHN0b3BvdmVyOiBmYWxzZVxuXG5cdFx0XHRcdHJlcS53YXlwb2ludHMgPSB3YXlwb2ludHNcblxuXHRcdFx0R1NWSHlwZXJsYXBzZS5kaXJTZXJ2aWNlLnJvdXRlIHJlcSwgKHJlcywgc3RhdHVzKSA9PlxuXG5cdFx0XHRcdGlmIHN0YXR1cyA9PSBnb29nbGUubWFwcy5EaXJlY3Rpb25zU3RhdHVzLk9LXG5cdFx0XHRcdFx0cm91dGVSZXMgPSByZXNcblx0XHRcdFx0XHQjIG5leHRcblx0XHRcdFx0XHRzdWJkaXZpZGVSb3V0ZSgpXG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRHU1ZIeXBlcmxhcHNlLm9uTWVzc2FnZS5jYWxsIEAsIFwiY2Fubm90IGdldCByb3V0ZS5cIlxuXG5cdFx0IyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdCMgMi4gc3ViZGl2aWRlIHJvdXRlXG5cdFx0c3ViZGl2aWRlUm91dGUgPSAoKSA9PlxuXG5cdFx0XHRpZiBAYkNhbmNlbFxuXHRcdFx0XHRHU1ZIeXBlcmxhcHNlLm9uQ2FuY2VsLmNhbGwgQFxuXHRcdFx0XHRyZXR1cm5cblxuXHRcdFx0R1NWSHlwZXJsYXBzZS5vbk1lc3NhZ2UuY2FsbCBALCBcInN1YmRpdmlkaW5nIHJvdXRlLi5cIlxuXG5cdFx0XHQjIGdldCBwb2ludHNcblx0XHRcdHJvdXRlID0gcm91dGVSZXMucm91dGVzWzBdXG5cdFx0XHRwYXRoID0gcm91dGUub3ZlcnZpZXdfcGF0aFxuXG5cdFx0XHQjIHNob3cgaW5mb1xuXHRcdFx0R1NWSHlwZXJsYXBzZS5vbk1lc3NhZ2UuY2FsbCBALFxuXHRcdFx0XHRcInBhdGggbGVuZ3RoOiAje3BhcnNlSW50KGdvb2dsZS5tYXBzLmdlb21ldHJ5LnNwaGVyaWNhbC5jb21wdXRlTGVuZ3RoKHBhdGgpKX0obSksIFxuXHRcdFx0XHRzdGVwOiAje0BzdGVwfShtKSwgc2VhcmNoIHJhZGl1czogI3tAc2VhcmNoUmFkaXVzfSAobSlcIlxuXHRcdFx0XG5cblx0XHRcdGQgPSAwICMgZGlzdGFuY2UgYmV0d2VlbiBhIGFuZCBiIChtKVxuXHRcdFx0ciA9IDAgIyBhbHdheXMgbXVzdCBiZSA8IHN0ZXBcblx0XHRcdG0gPSAwICMgY3VycmVudCBtaWRwb2ludFxuXHRcdFx0YSA9IGIgPSBudWxsXG5cblx0XHRcdCMgcmV0cml2ZSB0byB3YXkgcG9pbnRzXG5cdFx0XHRmb3IgaSBpbiBbMC4ucGF0aC5sZW5ndGgtMl1cblxuXHRcdFx0XHRhID0gcGF0aFtpXVxuXHRcdFx0XHRiID0gcGF0aFtpKzFdXG5cdFx0XHRcdGQgPSBnb29nbGUubWFwcy5nZW9tZXRyeS5zcGhlcmljYWwuY29tcHV0ZURpc3RhbmNlQmV0d2VlbihhLCBiKVxuXG5cdFx0XHRcdCMgb2Zmc2V0IC1yXG5cdFx0XHRcdG0gPSAtciArIEBzdGVwXG5cblx0XHRcdFx0aWYgZCA8IG1cblx0XHRcdFx0XHRyICs9IGRcblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdCMgc3ViZGl2aWRlXG5cdFx0XHRcdFx0d2hpbGUgbSA8IGRcblx0XHRcdFx0XHRcdHB0ID0gZ2V0Rm9sbG93ZWRQYXRoKG0sIGEsIGIpXG5cdFx0XHRcdFx0XHRyYXdQdHMucHVzaCggcHQgKVxuXHRcdFx0XHRcdFx0bSArPSBAc3RlcFxuXG5cdFx0XHRcdFx0ciA9IEBzdGVwIC0gKG0gLSBkKVxuXG5cdFx0XHQjIGZpdCBib3VuZCBhbmQgYWRkIHBvbHlsaW5lXG5cdFx0XHRAbWFwLmZpdEJvdW5kcyggcm91dGUuYm91bmRzIClcblxuXHRcdFx0R1NWSHlwZXJsYXBzZS5vbk1lc3NhZ2UuY2FsbCBALCBcIm51bWJlciBvZiB3YXlwb2ludHM6ICN7cmF3UHRzLmxlbmd0aH1cIlxuXG5cdFx0XHQjIG5leHRcblx0XHRcdHJldHJpdmVQYW5vRGF0YSgpXG5cblx0XHQjID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0IyAzLiByZXRyaXZlIHBhbm8gZGF0YSBhbmQgc3BsaWNlIGR1cGxpY2F0ZWQgaWRcblx0XHRyZXRyaXZlUGFub0RhdGEgPSA9PlxuXHRcdFx0R1NWSHlwZXJsYXBzZS5vbk1lc3NhZ2UuY2FsbCBALCBcInJldHJpdmluZyBwYW5vIGlkLi5cIlxuXG5cdFx0XHRpZHggPSAwXG5cblx0XHRcdG9uTG9hZCA9IChyZXMsIHN0YXR1cykgPT5cblx0XHRcdFx0aWYgQGJDYW5jZWxcblx0XHRcdFx0XHRHU1ZIeXBlcmxhcHNlLm9uQ2FuY2VsLmNhbGwgQFxuXHRcdFx0XHRcdHJldHVyblxuXG5cdFx0XHRcdGlmIHN0YXR1cyA9PSBnb29nbGUubWFwcy5TdHJlZXRWaWV3U3RhdHVzLk9LXG5cblxuXHRcdFx0XHRcdHBhbm8gPSBAY3JlYXRlUGFub0RhdGEocmVzKVxuXG5cdFx0XHRcdFx0aWYgcGFuby5pZCAhPSBwcmV2SWRcblx0XHRcdFx0XHRcdEBwYW5vTGlzdC5wdXNoKCBwYW5vIClcblx0XHRcdFx0XHRcdG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXJcblx0XHRcdFx0XHRcdFx0cG9zaXRpb246IHBhbm8ubGF0TG5nXG5cdFx0XHRcdFx0XHRcdG1hcDogQG1hcFxuXHRcdFx0XHRcdFx0XHR0aXRsZTogXCIje2lkeH1cIlxuXG5cdFx0XHRcdFx0XHRwcmV2SWQgPSBwYW5vLmlkXG5cblx0XHRcdFx0R1NWSHlwZXJsYXBzZS5vblByb2dyZXNzLmNhbGwgQCwgaWR4LCByYXdQdHMubGVuZ3RoXG5cblx0XHRcdFx0aWYgKytpZHggPCByYXdQdHMubGVuZ3RoXG5cdFx0XHRcdFx0IyBuZXh0XG5cdFx0XHRcdFx0QGNsaWVudC5nZXRQYW5vcmFtYUJ5TG9jYXRpb24ocmF3UHRzW2lkeF0sIEBzZWFyY2hSYWRpdXMsIG9uTG9hZClcblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdCMgZW5kXG5cdFx0XHRcdFx0QGJXYWl0aW5nID0gZmFsc2Vcblx0XHRcdFx0XHRHU1ZIeXBlcmxhcHNlLm9uTWVzc2FnZS5jYWxsIEAsIFwidG90YWwgcGFubyBpZDogI3tAcGFub0xpc3QubGVuZ3RofVwiXG5cdFx0XHRcdFx0R1NWSHlwZXJsYXBzZS5vblByb2dyZXNzLmNhbGwgQCwgaWR4LCByYXdQdHMubGVuZ3RoXG5cdFx0XHRcdFx0R1NWSHlwZXJsYXBzZS5vbkFuYWx5emVDb21wbGV0ZS5jYWxsIEBcblxuXHRcdFx0IyBpbml0IEdTVlBhbm9cblx0XHRcdEBiV2FpdGluZyA9IHRydWVcblx0XHRcdHByZXZJZCA9ICcnXG5cdFx0XHRAY2xpZW50LmdldFBhbm9yYW1hQnlMb2NhdGlvbihyYXdQdHNbaWR4XSwgQHNlYXJjaFJhZGl1cywgb25Mb2FkKVxuXG5cdFx0IyB0cmlnZ2VyXG5cdFx0cmVxdWVzdFJvdXRlKClcblxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdGNyZWF0ZUZyb21QYW5vSWQ6IChsaXN0KSAtPlxuXG5cdFx0aWR4ID0gMFxuXG5cdFx0R1NWSHlwZXJsYXBzZS5vbk1lc3NhZ2UuY2FsbCBALCBcInN0YXJ0IGNvbXBvc2UuLlwiXG5cdFx0R1NWSHlwZXJsYXBzZS5vbk1lc3NhZ2UuY2FsbCBALCBcImVhZGluZ01vZGU6I3tAaGVhZGluZ01vZGV9XCJcblxuXHRcdG9uTG9hZCA9IChyZXMsIHN0YXR1cyk9PlxuXHRcdFx0aWYgaWR4ID09IDBcblx0XHRcdFx0R1NWSHlwZXJsYXBzZS5vbk1lc3NhZ2UuY2FsbCBALCBcImFuYWx5emluZy4uXCJcdFxuXG5cdFx0XHRpZiBzdGF0dXMgPT0gZ29vZ2xlLm1hcHMuU3RyZWV0Vmlld1N0YXR1cy5PS1xuXHRcdFx0XHRpZiBAYkNhbmNlbFxuXHRcdFx0XHRcdEdTVkh5cGVybGFwc2Uub25DYW5jZWwuY2FsbCBAXG5cdFx0XHRcdFx0cmV0dXJuXG5cblx0XHRcdFx0cGFubyA9IEBjcmVhdGVQYW5vRGF0YSggcmVzIClcblx0XHRcdFx0QHBhbm9MaXN0LnB1c2goIHBhbm8gKVxuXG5cdFx0XHRcdGlmIGlkeCA9PSAwXG5cdFx0XHRcdFx0QG1hcC5zZXRDZW50ZXIoIHBhbm8ubGF0TG5nIClcblx0XHRcdFx0XHRAbWFwLnNldFpvb20oIDEzIClcblxuXHRcdFx0XHRtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyXG5cdFx0XHRcdFx0cG9zaXRpb246IHBhbm8ubGF0TG5nXG5cdFx0XHRcdFx0bWFwOiBAbWFwXG5cdFx0XHRcdFx0dGl0bGU6IFwiI3tpZHh9XCJcblxuXHRcdFx0XHRHU1ZIeXBlcmxhcHNlLm9uUHJvZ3Jlc3MuY2FsbCBALCBpZHgsIGxpc3QubGVuZ3RoXG5cblx0XHRcdFx0aWYgKytpZHggPCBsaXN0Lmxlbmd0aFxuXHRcdFx0XHRcdCMgbmV4dFxuXHRcdFx0XHRcdEBjbGllbnQuZ2V0UGFub3JhbWFCeUlkKGxpc3RbaWR4XSwgb25Mb2FkKVxuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0IyBlbmRcblx0XHRcdFx0XHRAYldhaXRpbmcgPSBmYWxzZVxuXHRcdFx0XHRcdEdTVkh5cGVybGFwc2Uub25NZXNzYWdlLmNhbGwgQCwgXCJ0b3RhbCBwYW5vIGlkOiAje0BwYW5vTGlzdC5sZW5ndGh9XCJcblx0XHRcdFx0XHRHU1ZIeXBlcmxhcHNlLm9uUHJvZ3Jlc3MuY2FsbCBALCBpZHgsIGxpc3QubGVuZ3RoXG5cdFx0XHRcdFx0R1NWSHlwZXJsYXBzZS5vbkFuYWx5emVDb21wbGV0ZS5jYWxsIEBcblx0XHRcdFxuXHRcdFx0ZWxzZVxuXHRcdFx0XHRhbGVydCBcImVycm9yIG9uIGNyZWF0ZUZyb21QYW5vSWQoKSA6ICN7c3RhdHVzfVwiXG5cblx0XHQjIHRyaWdnZXJcblxuXHRcdEBiV2FpdGluZyA9IHRydWVcblx0XHRAY2xpZW50LmdldFBhbm9yYW1hQnlJZChsaXN0W2lkeF0sIG9uTG9hZClcblxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdGNvbXBvc2U6IChjYWxsYmFjayktPlxuXG5cdFx0aWYgQHBhbm9MaXN0Lmxlbmd0aCA9PSAwXG5cdFx0XHRHU1ZIeXBlcmxhcHNlLm9uTWVzc2FnZS5jYWxsIEAsIFwidGhlcmUgaXMgbm8gcGFubyBpZC5cIlxuXHRcdFx0cmV0dXJuXG5cblx0XHRHU1ZIeXBlcmxhcHNlLm9uTWVzc2FnZS5jYWxsIEAsIFwiY29tcG9zaW5nIHBhbm9yYW1hLi4gc2l6ZToje0Bnc3ZwLndpZHRofXgje0Bnc3ZwLmhlaWdodH1cIlxuXG5cdFx0aWYgQGhlYWRpbmdNb2RlID09IEdTVkh5cGVybGFwc2VIZWFkaW5nLkJBQ0tXQVJEIHx8IEBoZWFkaW5nTW9kZSA9PSBHU1ZIeXBlcmxhcHNlSGVhZGluZy5CRUdJTlxuXHRcdFx0aWYgQHBhbm9MaXN0Lmxlbmd0aCA8IDJcblx0XHRcdFx0YWxlcnQgXCJwYW5vIGlkJ3MgbGVuZ3RoIG11c3QgYmUgMiBhdCBsZWFzdFwiXG5cdFx0XHRcdHJldHVyblxuXG5cdFx0bG9hZFBhbm9yYW1hID0gPT5cblx0XHRcdCMgY2FsYyByb3RhdGlvblxuXHRcdFx0aWYgIShAcGFub0xpc3RbaWR4XS5oZWFkaW5nPylcblx0XHRcdFx0aCA9IDBcblx0XHRcdFx0aWYgQGhlYWRpbmdNb2RlID09IEdTVkh5cGVybGFwc2VIZWFkaW5nLkJBQ0tXQVJEXG5cdFx0XHRcdFx0aSA9IGlmIGlkeCA9PSAwIHRoZW4gMSBlbHNlIGlkeFxuXHRcdFx0XHRcdGggPSBnb29nbGUubWFwcy5nZW9tZXRyeS5zcGhlcmljYWwuY29tcHV0ZUhlYWRpbmcoXG5cdFx0XHRcdFx0XHRAcGFub0xpc3RbaV0ubGF0TG5nLCBAcGFub0xpc3RbaS0xXS5sYXRMbmcgKVxuXG5cdFx0XHRcdGVsc2UgaWYgQGhlYWRpbmdNb2RlID09IEdTVkh5cGVybGFwc2VIZWFkaW5nLkxPT0tBVFxuXHRcdFx0XHRcdGggPSBnb29nbGUubWFwcy5nZW9tZXRyeS5zcGhlcmljYWwuY29tcHV0ZUhlYWRpbmcoXG5cdFx0XHRcdFx0XHRAcGFub0xpc3RbaWR4XS5sYXRMbmcsIEBsb29rYXQpXG5cblx0XHRcdFx0ZWxzZSBpZiBAaGVhZGluZ01vZGUgPT0gR1NWSHlwZXJsYXBzZUhlYWRpbmcuQkVHSU5cblx0XHRcdFx0XHRoID0gZ29vZ2xlLm1hcHMuZ2VvbWV0cnkuc3BoZXJpY2FsLmNvbXB1dGVIZWFkaW5nKFxuXHRcdFx0XHRcdFx0QHBhbm9MaXN0WzFdLmxhdExuZywgQHBhbm9MaXN0WzBdLmxhdExuZylcblxuXHRcdFx0XHRAcGFub0xpc3RbaWR4XS5oZWFkaW5nID0gaFxuXG5cdFx0XHRcdEBnc3ZwLmNvbXBvc2VQYW5vcmFtYSggQHBhbm9MaXN0W2lkeF0uaWQsIEBwYW5vTGlzdFtpZHhdLmhlYWRpbmcpXG5cblx0XHRvbkNvbXBvc2UgPSA9PlxuXG5cdFx0XHRpZiBAYkNhbmNlbFxuXHRcdFx0XHRHU1ZIeXBlcmxhcHNlLm9uQ2FuY2VsLmNhbGwgQFxuXHRcdFx0XHRyZXR1cm5cblx0XHRcdFx0XG5cdFx0XHQjIGV2ZW50XG5cdFx0XHRHU1ZIeXBlcmxhcHNlLm9uUHJvZ3Jlc3MuY2FsbCBALCBpZHgsIEBwYW5vTGlzdC5sZW5ndGhcblx0XHRcdEdTVkh5cGVybGFwc2Uub25QYW5vcmFtYUxvYWQuY2FsbCBALCBpZHgsIEBnc3ZwLmNhbnZhcywgQHBhbm9MaXN0W2lkeF1cblxuXHRcdFx0IyBuZXh0XG5cdFx0XHRpZiArK2lkeCA8IEBwYW5vTGlzdC5sZW5ndGhcblx0XHRcdFx0bG9hZFBhbm9yYW1hKClcblx0XHRcdGVsc2Vcblx0XHRcdFx0QGJXYWl0aW5nID0gZmFsc2Vcblx0XHRcdFx0Y29uc29sZS5sb2cgXCJjb21wbGV0ZVwiXG5cdFx0XHRcdEdTVkh5cGVybGFwc2Uub25Qcm9ncmVzcy5jYWxsIEAsIGlkeCwgQHBhbm9MaXN0Lmxlbmd0aFxuXHRcdFx0XHRHU1ZIeXBlcmxhcHNlLm9uTWVzc2FnZS5jYWxsIEAsIFwiY29tcGxldGUgLSB0b3RhbDogI3tAcGFub0xpc3QubGVuZ3RofSwgZHVyYXRpb246ICN7QHBhbm9MaXN0Lmxlbmd0aCAvIDI0fVwiXG5cdFx0XHRcdEdTVkh5cGVybGFwc2Uub25Db21wb3NlQ29tcGxldGUuY2FsbCBAXG5cdFx0XHRcdGlmIGNhbGxiYWNrP1xuXHRcdFx0XHRcdGNhbGxiYWNrKClcblxuXHRcdCMgdHJpZ2dlclxuXHRcdEBnc3ZwLm9uUGFub3JhbWFMb2FkID0gb25Db21wb3NlXG5cdFx0QGdzdnAub25FcnJvciA9IChtc2cpIC0+XG5cdFx0XHRhbGVydCBcImVycm9yIG9uQ29tcG9zZSgpIDogI3ttc2d9XCJcblx0XHRAZ3N2cC5vbk5vUGFub3JhbWFEYXRhID0gKHN0YXR1cykgLT5cblx0XHRcdGFsZXJ0IFwiZXJyb3Igb25Ob1Bhbm9yYW1hRGF0YSgpIDogI3tzdGF0dXN9XCJcblx0XG5cdFx0aWR4ID0gMFxuXHRcdEBiV2FpdGluZyA9IHRydWVcblxuXHRcdGxvYWRQYW5vcmFtYSgpXG5cbiJdfQ==