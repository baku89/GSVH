var API_KEY, GSVHyperlapse, TAG_HEIGHT, getFollowedPath, pointOnLine, uniqueID;

Number.prototype.toRad = function() {
  return this * Math.PI / 180;
};

Number.prototype.toDeg = function() {
  return this * 180 / Math.PI;
};

API_KEY = "AIzaSyBQ2dzDfyF8Y0Dwe-Q6Jzx4_G62ANrTotQ";

TAG_HEIGHT = 40;

pointOnLine = function(t, a, b) {
  var lat1, lat2, lng1, lng2, x, y;
  lat1 = a.lat().toRad();
  lng1 = a.lng().toRad();
  lat2 = b.lat().toRad();
  lng2 = b.lng().toRad();
  x = lat1 + t * (lat2 - lat1);
  y = lng1 + t * (lng2 - lng1);
  return new google.maps.LatLng(x.toDeg(), y.toDeg());
};

getFollowedPath = function(m, a, b) {
  var d, t;
  d = google.maps.geometry.spherical.computeDistanceBetween(a, b);
  if (m < 0 || d < m) {
    alert("error getFolowedPath");
  }
  t = m / d;
  return pointOnLine(t, a, b);
};

uniqueID = function() {
  var date, randam, time;
  randam = Math.floor(Math.random() * 1000);
  date = new Date();
  time = date.getTime();
  return randam + time.toString();
};

GSVHyperlapse = (function() {
  var _class;

  GSVHyperlapse.API_KEY = "AIzaSyBQ2dzDfyF8Y0Dwe-Q6Jzx4_G62ANrTotQ";

  GSVHyperlapse.DIST_BETWEEN_PTS = 5;

  GSVHyperlapse.MAX_PTS = 100;

  GSVHyperlapse.dirService = new google.maps.DirectionsService({});

  GSVHyperlapse.dirRegex = /dir\/([0-9.-]*),([0-9.-]*)\/([0-9.-]*),([0-9.-]*)\/@([0-9.-]*),([0-9.-]*),([0-9]*)z\/data=(.*)$/;

  GSVHyperlapse.dataRegex = /!1d([0-9.-]*)!2d([0-9.-]*)/g;

  GSVHyperlapse.dataLatLngRegex = /!1d([0-9.-]*)!2d([0-9.-]*)/;

  GSVHyperlapse.ldr = new GSVPANO.PanoLoader();

  GSVHyperlapse.ldrStack = [];

  _class = GSVHyperlapse;

  GSVHyperlapse.onError = function(err) {
    return alert("error");
  };

  GSVHyperlapse.onMessage = function() {
    return null;
  };

  GSVHyperlapse.onPanoramaLoad = function() {
    return null;
  };

  GSVHyperlapse.onAnalyzeComplete = function() {
    return null;
  };

  GSVHyperlapse.onProgress = function() {
    return null;
  };

  GSVHyperlapse.onCancel = function() {
    return null;
  };

  function GSVHyperlapse(name, map) {
    this.name = name;
    this.bCancel = false;
    this.bWaiting = false;
    this.uniqueId = uniqueID();
    this.panoList = [];
    this.client = new google.maps.StreetViewService();
    this.map = new google.maps.Map(map, {
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      zoom: 16
    });
  }

  GSVHyperlapse.prototype.cancel = function() {
    this.bCancel = true;
    if (!this.bWaiting) {
      return _class.onCancel.call(this);
    }
  };

  GSVHyperlapse.prototype.createPanoData = function(res) {
    return {
      id: res.location.pano,
      rotation: res.tiles.centerHeading * Math.PI / 180.0,
      pitch: res.tiles.originPitch * Math.PI / 180.0,
      latLng: res.location.latLng,
      date: res.imageDate
    };
  };

  GSVHyperlapse.prototype.createFromDirection = function(url, args) {
    var prevId, rawPts, requestRoute, retrivePanoData, routeRes, searchRadius, step, subdivideRoute, travelMode;
    travelMode = args.travelMode;
    step = parseFloat(args.step);
    searchRadius = parseFloat(args.searchRadius);
    rawPts = [];
    routeRes = null;
    prevId = '';
    requestRoute = (function(_this) {
      return function() {
        var center, destination, i, m, origin, r, req, result, waypoints, wp, zoom;
        result = _class.dirRegex.exec(url);
        if (result == null) {
          alert("cannot parse url");
          return;
        }
        origin = new google.maps.LatLng(result[1], result[2]);
        destination = new google.maps.LatLng(result[3], result[4]);
        center = new google.maps.LatLng(result[5], result[6]);
        zoom = parseInt(result[7]);
        _this.map.setZoom(zoom);
        _this.map.setCenter(center);
        req = {
          origin: origin,
          destination: destination,
          travelMode: travelMode
        };
        waypoints = [];
        if ((result = result[8].match(GSVHyperlapse.dataRegex)) != null) {
          for (i in result) {
            r = result[i];
            m = GSVHyperlapse.dataLatLngRegex.exec(r);
            wp = new google.maps.LatLng(m[2], m[1]);
            waypoints.push({
              location: wp.toString(),
              stopover: false
            });
          }
          req.waypoints = waypoints;
        }
        return GSVHyperlapse.dirService.route(req, function(res, status) {
          if (status === google.maps.DirectionsStatus.OK) {
            routeRes = res;
            return subdivideRoute();
          } else {
            return _class.onMessage.call(_this, "cannot get route.");
          }
        });
      };
    })(this);
    subdivideRoute = (function(_this) {
      return function() {
        var a, b, d, i, j, m, path, pt, r, ref, route;
        if (_this.bCancel) {
          _class.onCancel.call(_this);
          return;
        }
        _class.onMessage.call(_this, "requesting route..");
        _class.onMessage.call(_this, "analyzing route..");
        route = routeRes.routes[0];
        path = route.overview_path;
        _class.onMessage.call(_this, "path length: " + (parseInt(google.maps.geometry.spherical.computeLength(path))) + "(m), step: " + step + "(m), search radius: " + searchRadius + " (m)");
        console.log(path);
        d = 0;
        r = 0;
        m = 0;
        a = b = null;
        for (i = j = 0, ref = path.length - 2; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {
          a = path[i];
          b = path[i + 1];
          d = google.maps.geometry.spherical.computeDistanceBetween(a, b);
          m = -r + step;
          if (d < m) {
            r += d;
          } else {
            while (m < d) {
              pt = getFollowedPath(m, a, b);
              rawPts.push(pt);
              m += step;
            }
            r = step - (m - d);
          }
        }
        _this.map.fitBounds(route.bounds);
        path = new google.maps.Polyline({
          path: path,
          geodesic: true,
          strokeColor: '#000000',
          strokeOpacity: 1.0,
          strokeWeight: 2
        });
        path.setMap(_this.map);
        _class.onMessage.call(_this, "num of waypoints: " + rawPts.length);
        return retrivePanoData();
      };
    })(this);
    retrivePanoData = (function(_this) {
      return function() {
        var idx, onLoad;
        _class.onMessage.call(_this, "retriving pano id..");
        idx = 0;
        onLoad = function(res, status) {
          var marker, pano;
          if (_this.bCancel) {
            _class.onCancel.call(_this);
            return;
          }
          if (status === google.maps.StreetViewStatus.OK) {
            pano = _this.createPanoData(res);
            if (pano.id !== prevId) {
              _this.panoList.push(pano);
              marker = new google.maps.Marker({
                position: pano.latLng,
                map: _this.map,
                title: "" + idx
              });
              prevId = pano.id;
              console.log(pano.id);
            }
          }
          _class.onProgress.call(_this, idx, rawPts.length);
          if (++idx < rawPts.length) {
            return _this.client.getPanoramaByLocation(rawPts[idx], searchRadius, onLoad);
          } else {
            console.log(_this.panoList);
            _this.bWaiting = false;
            _class.onMessage.call(_this, "total pano id: " + _this.panoList.length);
            _class.onProgress.call(_this, idx, rawPts.length);
            return _class.onAnalyzeComplete.call(_this);
          }
        };
        _this.bWaiting = true;
        prevId = '';
        return _this.client.getPanoramaByLocation(rawPts[idx], searchRadius, onLoad);
      };
    })(this);
    return requestRoute();
  };

  GSVHyperlapse.prototype.createFromPanoId = function(list) {
    var idx, onLoad;
    idx = 0;
    onLoad = (function(_this) {
      return function(res, status) {
        var marker, pano;
        if (idx === 0) {
          _class.onMessage.call(_this, "analyzing..");
        }
        if (status === google.maps.StreetViewStatus.OK) {
          if (_this.bCancel) {
            _class.onCancel.call(_this);
            return;
          }
          pano = _this.createPanoData(res);
          _this.panoList.push(pano);
          if (idx === 0) {
            _this.map.setCenter(pano.latLng);
            _this.map.setZoom(13);
          }
          marker = new google.maps.Marker({
            position: pano.latLng,
            map: _this.map,
            title: "" + idx
          });
          _class.onProgress.call(_this, idx, list.length);
          if (++idx < list.length) {
            return _this.client.getPanoramaById(list[idx], onLoad);
          } else {
            _this.bWaiting = false;
            _class.onMessage.call(_this, "total pano id: " + _this.panoList.length);
            _class.onProgress.call(_this, idx, list.length);
            return _class.onAnalyzeComplete.call(_this);
          }
        } else {
          return alert("error on createFromPanoId() : " + status);
        }
      };
    })(this);
    this.bWaiting = true;
    return this.client.getPanoramaById(list[idx], onLoad);
  };

  GSVHyperlapse.prototype.compose = function(zoom) {
    var idx, loader, onCompose, writeToTag;
    loader = new GSVPANO.PanoLoader({
      zoom: zoom
    });
    if (this.panoList.length === 0) {
      _class.onMessage.call(this, "there is no pano id");
      return;
    }
    this.tagCanvas = document.createElement('canvas');
    this.tagCanvas.width = loader.width;
    this.tagCanvas.height = TAG_HEIGHT;
    this.tagCtx = this.tagCanvas.getContext('2d');
    this.glsl = Glsl({
      canvas: document.createElement('canvas'),
      fragment: document.getElementById("pano-rotation").textContent,
      variables: {
        rotation: 0.0,
        pitch: 0.0,
        original: loader.canvas,
        tag: this.tagCanvas
      }
    });
    this.glsl.setSize(loader.width, loader.height + TAG_HEIGHT);
    _class.onMessage.call(this, "composing panorama.. size:" + loader.width + "x" + loader.height);
    writeToTag = (function(_this) {
      return function(name, value, x, y) {
        _this.tagCtx.fillStyle = '#ffffff';
        _this.tagCtx.fillText(value, x + 40, y);
        _this.tagCtx.fillStyle = '#ff0000';
        return _this.tagCtx.fillText(name, x, y);
      };
    })(this);
    onCompose = (function(_this) {
      return function() {
        var cursor;
        if (_this.bCancel) {
          _class.onCancel.call(_this);
          return;
        }
        _this.tagCtx.fillStyle = '#000000';
        _this.tagCtx.fillRect(0, 0, _this.tagCanvas.width, _this.tagCanvas.height);
        _this.tagCtx.fillStyle = '#ffffff';
        _this.tagCtx.font = '12px Arial';
        cursor = 0;
        writeToTag("uid", "" + _this.uniqueId, cursor++ * 0xff, 36);
        writeToTag("panoid", "" + _this.panoList[idx].id, cursor++ * 0xff, 36);
        writeToTag("lat", "" + (_this.panoList[idx].latLng.lat().toPrecision(17)), cursor++ * 0xff, 36);
        writeToTag("lng", "" + (_this.panoList[idx].latLng.lng().toPrecision(17)), cursor++ * 0xff, 36);
        writeToTag("head", "" + 0., cursor++ * 0xff, 36);
        writeToTag("date", "" + _this.panoList[idx].date, cursor++ * 0xff, 36);
        cursor = 0;
        writeToTag("zoom", "" + zoom, cursor++ * 0xff, 18);
        $('body').append(_this.tagCanvas);
        _this.glsl.set('rotation', _this.panoList[idx].rotation);
        _this.glsl.set('pitch', _this.panoList[idx].pitch);
        _this.glsl.syncAll();
        _this.glsl.render();
        _class.onProgress.call(_this, idx, _this.panoList.length);
        _class.onPanoramaLoad.call(_this, idx, _this.glsl.canvas);
        if (++idx < _this.panoList.length) {
          return setTimeout(function() {
            return loader.composePanorama(_this.panoList[idx].id);
          }, 100);
        } else {
          _this.bWaiting = false;
          console.log("complete");
          _class.onProgress.call(_this, idx, _this.panoList.length);
          return _class.onMessage.call(_this, "complete - total: " + _this.panoList.length + ", duration: " + (_this.panoList.length / 24));
        }
      };
    })(this);
    loader.onPanoramaLoad = onCompose;
    loader.onError = function(msg) {
      return alert("error onCompose() : " + msg);
    };
    loader.onNoPanoramaData = function(status) {
      return alert("error onNoPanoramaData() : " + status);
    };
    idx = 0;
    this.bWaiting = true;
    return loader.composePanorama(this.panoList[idx].id);
  };

  return GSVHyperlapse;

})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkdTVkh5cGVybGFwc2UuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsMEVBQUE7O0FBQUEsTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFqQixHQUF5QixTQUFBLEdBQUE7U0FBTSxJQUFBLEdBQUksSUFBSSxDQUFDLEVBQVQsR0FBYyxJQUFwQjtBQUFBLENBQXpCLENBQUE7O0FBQUEsTUFFTSxDQUFDLFNBQVMsQ0FBQyxLQUFqQixHQUF5QixTQUFBLEdBQUE7U0FBTSxJQUFBLEdBQUksR0FBSixHQUFVLElBQUksQ0FBQyxHQUFyQjtBQUFBLENBRnpCLENBQUE7O0FBQUEsT0FJQSxHQUFVLHlDQUpWLENBQUE7O0FBQUEsVUFNQSxHQUFhLEVBTmIsQ0FBQTs7QUFBQSxXQVFBLEdBQWMsU0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsR0FBQTtBQUNiLE1BQUEsNEJBQUE7QUFBQSxFQUFBLElBQUEsR0FBTyxDQUFDLENBQUMsR0FBRixDQUFBLENBQU8sQ0FBQyxLQUFSLENBQUEsQ0FBUCxDQUFBO0FBQUEsRUFDQSxJQUFBLEdBQU8sQ0FBQyxDQUFDLEdBQUYsQ0FBQSxDQUFPLENBQUMsS0FBUixDQUFBLENBRFAsQ0FBQTtBQUFBLEVBR0EsSUFBQSxHQUFPLENBQUMsQ0FBQyxHQUFGLENBQUEsQ0FBTyxDQUFDLEtBQVIsQ0FBQSxDQUhQLENBQUE7QUFBQSxFQUlBLElBQUEsR0FBTyxDQUFDLENBQUMsR0FBRixDQUFBLENBQU8sQ0FBQyxLQUFSLENBQUEsQ0FKUCxDQUFBO0FBQUEsRUFNQSxDQUFBLEdBQUksSUFBQSxHQUFPLENBQUEsR0FBSSxDQUFDLElBQUEsR0FBTyxJQUFSLENBTmYsQ0FBQTtBQUFBLEVBT0EsQ0FBQSxHQUFJLElBQUEsR0FBTyxDQUFBLEdBQUksQ0FBQyxJQUFBLEdBQU8sSUFBUixDQVBmLENBQUE7QUFTQSxTQUFXLElBQUEsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFaLENBQW1CLENBQUMsQ0FBQyxLQUFGLENBQUEsQ0FBbkIsRUFBOEIsQ0FBQyxDQUFDLEtBQUYsQ0FBQSxDQUE5QixDQUFYLENBVmE7QUFBQSxDQVJkLENBQUE7O0FBQUEsZUFvQkEsR0FBa0IsU0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsR0FBQTtBQUNqQixNQUFBLElBQUE7QUFBQSxFQUFBLENBQUEsR0FBSSxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsc0JBQS9CLENBQXNELENBQXRELEVBQXlELENBQXpELENBQUosQ0FBQTtBQUVBLEVBQUEsSUFBRyxDQUFBLEdBQUksQ0FBSixJQUFTLENBQUEsR0FBSSxDQUFoQjtBQUNDLElBQUEsS0FBQSxDQUFNLHNCQUFOLENBQUEsQ0FERDtHQUZBO0FBQUEsRUFLQSxDQUFBLEdBQUksQ0FBQSxHQUFJLENBTFIsQ0FBQTtBQU9BLFNBQU8sV0FBQSxDQUFZLENBQVosRUFBZSxDQUFmLEVBQWtCLENBQWxCLENBQVAsQ0FSaUI7QUFBQSxDQXBCbEIsQ0FBQTs7QUFBQSxRQStCQSxHQUFXLFNBQUEsR0FBQTtBQUNWLE1BQUEsa0JBQUE7QUFBQSxFQUFBLE1BQUEsR0FBUyxJQUFJLENBQUMsS0FBTCxDQUFXLElBQUksQ0FBQyxNQUFMLENBQUEsQ0FBQSxHQUFjLElBQXpCLENBQVQsQ0FBQTtBQUFBLEVBQ0EsSUFBQSxHQUFXLElBQUEsSUFBQSxDQUFBLENBRFgsQ0FBQTtBQUFBLEVBRUEsSUFBQSxHQUFPLElBQUksQ0FBQyxPQUFMLENBQUEsQ0FGUCxDQUFBO0FBR0EsU0FBTyxNQUFBLEdBQVMsSUFBSSxDQUFDLFFBQUwsQ0FBQSxDQUFoQixDQUpVO0FBQUEsQ0EvQlgsQ0FBQTs7QUFBQTtBQXdDQyxNQUFBLE1BQUE7O0FBQUEsRUFBQSxhQUFDLENBQUEsT0FBRCxHQUFXLHlDQUFYLENBQUE7O0FBQUEsRUFDQSxhQUFDLENBQUEsZ0JBQUQsR0FBb0IsQ0FEcEIsQ0FBQTs7QUFBQSxFQUVBLGFBQUMsQ0FBQSxPQUFELEdBQVcsR0FGWCxDQUFBOztBQUFBLEVBS0EsYUFBQyxDQUFBLFVBQUQsR0FBa0IsSUFBQSxNQUFNLENBQUMsSUFBSSxDQUFDLGlCQUFaLENBQThCLEVBQTlCLENBTGxCLENBQUE7O0FBQUEsRUFNQSxhQUFDLENBQUEsUUFBRCxHQUFZLGlHQU5aLENBQUE7O0FBQUEsRUFPQSxhQUFDLENBQUEsU0FBRCxHQUFhLDZCQVBiLENBQUE7O0FBQUEsRUFRQSxhQUFDLENBQUEsZUFBRCxHQUFtQiw0QkFSbkIsQ0FBQTs7QUFBQSxFQVdBLGFBQUMsQ0FBQSxHQUFELEdBQVcsSUFBQSxPQUFPLENBQUMsVUFBUixDQUFBLENBWFgsQ0FBQTs7QUFBQSxFQVlBLGFBQUMsQ0FBQSxRQUFELEdBQVksRUFaWixDQUFBOztBQUFBLEVBY0EsTUFBQSxHQUFTLGFBZFQsQ0FBQTs7QUFBQSxFQWlCQSxhQUFDLENBQUEsT0FBRCxHQUFjLFNBQUMsR0FBRCxHQUFBO1dBQVMsS0FBQSxDQUFNLE9BQU4sRUFBVDtFQUFBLENBakJkLENBQUE7O0FBQUEsRUFrQkEsYUFBQyxDQUFBLFNBQUQsR0FBZSxTQUFBLEdBQUE7V0FBTSxLQUFOO0VBQUEsQ0FsQmYsQ0FBQTs7QUFBQSxFQW1CQSxhQUFDLENBQUEsY0FBRCxHQUFtQixTQUFBLEdBQUE7V0FBTSxLQUFOO0VBQUEsQ0FuQm5CLENBQUE7O0FBQUEsRUFvQkEsYUFBQyxDQUFBLGlCQUFELEdBQXFCLFNBQUEsR0FBQTtXQUFNLEtBQU47RUFBQSxDQXBCckIsQ0FBQTs7QUFBQSxFQXFCQSxhQUFDLENBQUEsVUFBRCxHQUFnQixTQUFBLEdBQUE7V0FBTSxLQUFOO0VBQUEsQ0FyQmhCLENBQUE7O0FBQUEsRUFzQkEsYUFBQyxDQUFBLFFBQUQsR0FBZSxTQUFBLEdBQUE7V0FBTSxLQUFOO0VBQUEsQ0F0QmYsQ0FBQTs7QUF5QmEsRUFBQSx1QkFBQyxJQUFELEVBQU8sR0FBUCxHQUFBO0FBQ1osSUFBQSxJQUFDLENBQUEsSUFBRCxHQUFRLElBQVIsQ0FBQTtBQUFBLElBRUEsSUFBQyxDQUFBLE9BQUQsR0FBVyxLQUZYLENBQUE7QUFBQSxJQUdBLElBQUMsQ0FBQSxRQUFELEdBQVksS0FIWixDQUFBO0FBQUEsSUFJQSxJQUFDLENBQUEsUUFBRCxHQUFZLFFBQUEsQ0FBQSxDQUpaLENBQUE7QUFBQSxJQUtBLElBQUMsQ0FBQSxRQUFELEdBQVksRUFMWixDQUFBO0FBQUEsSUFNQSxJQUFDLENBQUEsTUFBRCxHQUFjLElBQUEsTUFBTSxDQUFDLElBQUksQ0FBQyxpQkFBWixDQUFBLENBTmQsQ0FBQTtBQUFBLElBT0EsSUFBQyxDQUFBLEdBQUQsR0FBVyxJQUFBLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBWixDQUFnQixHQUFoQixFQUNWO0FBQUEsTUFBQSxTQUFBLEVBQVcsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBakM7QUFBQSxNQUNBLElBQUEsRUFBTSxFQUROO0tBRFUsQ0FQWCxDQURZO0VBQUEsQ0F6QmI7O0FBQUEsMEJBc0NBLE1BQUEsR0FBUSxTQUFBLEdBQUE7QUFDUCxJQUFBLElBQUMsQ0FBQSxPQUFELEdBQVcsSUFBWCxDQUFBO0FBQ0EsSUFBQSxJQUFHLENBQUEsSUFBRSxDQUFBLFFBQUw7YUFDQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQWhCLENBQXFCLElBQXJCLEVBREQ7S0FGTztFQUFBLENBdENSLENBQUE7O0FBQUEsMEJBNkNBLGNBQUEsR0FBZ0IsU0FBQyxHQUFELEdBQUE7QUFDZixXQUFPO0FBQUEsTUFDTixFQUFBLEVBQUksR0FBRyxDQUFDLFFBQVEsQ0FBQyxJQURYO0FBQUEsTUFFTixRQUFBLEVBQVUsR0FBRyxDQUFDLEtBQUssQ0FBQyxhQUFWLEdBQTBCLElBQUksQ0FBQyxFQUEvQixHQUFvQyxLQUZ4QztBQUFBLE1BR04sS0FBQSxFQUFPLEdBQUcsQ0FBQyxLQUFLLENBQUMsV0FBVixHQUF3QixJQUFJLENBQUMsRUFBN0IsR0FBa0MsS0FIbkM7QUFBQSxNQUlOLE1BQUEsRUFBUSxHQUFHLENBQUMsUUFBUSxDQUFDLE1BSmY7QUFBQSxNQUtOLElBQUEsRUFBTSxHQUFHLENBQUMsU0FMSjtLQUFQLENBRGU7RUFBQSxDQTdDaEIsQ0FBQTs7QUFBQSwwQkF1REEsbUJBQUEsR0FBcUIsU0FBQyxHQUFELEVBQU0sSUFBTixHQUFBO0FBRXBCLFFBQUEsdUdBQUE7QUFBQSxJQUFBLFVBQUEsR0FBZSxJQUFJLENBQUMsVUFBcEIsQ0FBQTtBQUFBLElBQ0EsSUFBQSxHQUFVLFVBQUEsQ0FBVyxJQUFJLENBQUMsSUFBaEIsQ0FEVixDQUFBO0FBQUEsSUFFQSxZQUFBLEdBQWUsVUFBQSxDQUFXLElBQUksQ0FBQyxZQUFoQixDQUZmLENBQUE7QUFBQSxJQUlBLE1BQUEsR0FBUyxFQUpULENBQUE7QUFBQSxJQUtBLFFBQUEsR0FBVyxJQUxYLENBQUE7QUFBQSxJQU1BLE1BQUEsR0FBUyxFQU5ULENBQUE7QUFBQSxJQVVBLFlBQUEsR0FBZSxDQUFBLFNBQUEsS0FBQSxHQUFBO2FBQUEsU0FBQSxHQUFBO0FBRWQsWUFBQSxzRUFBQTtBQUFBLFFBQUEsTUFBQSxHQUFTLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBaEIsQ0FBc0IsR0FBdEIsQ0FBVCxDQUFBO0FBRUEsUUFBQSxJQUFJLGNBQUo7QUFDQyxVQUFBLEtBQUEsQ0FBTSxrQkFBTixDQUFBLENBQUE7QUFDQSxnQkFBQSxDQUZEO1NBRkE7QUFBQSxRQU1BLE1BQUEsR0FBa0IsSUFBQSxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQVosQ0FBb0IsTUFBTyxDQUFBLENBQUEsQ0FBM0IsRUFBK0IsTUFBTyxDQUFBLENBQUEsQ0FBdEMsQ0FObEIsQ0FBQTtBQUFBLFFBT0EsV0FBQSxHQUFrQixJQUFBLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBWixDQUFvQixNQUFPLENBQUEsQ0FBQSxDQUEzQixFQUErQixNQUFPLENBQUEsQ0FBQSxDQUF0QyxDQVBsQixDQUFBO0FBQUEsUUFRQSxNQUFBLEdBQWtCLElBQUEsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFaLENBQW9CLE1BQU8sQ0FBQSxDQUFBLENBQTNCLEVBQStCLE1BQU8sQ0FBQSxDQUFBLENBQXRDLENBUmxCLENBQUE7QUFBQSxRQVNBLElBQUEsR0FBYyxRQUFBLENBQVMsTUFBTyxDQUFBLENBQUEsQ0FBaEIsQ0FUZCxDQUFBO0FBQUEsUUFXQSxLQUFDLENBQUEsR0FBRyxDQUFDLE9BQUwsQ0FBYyxJQUFkLENBWEEsQ0FBQTtBQUFBLFFBWUEsS0FBQyxDQUFBLEdBQUcsQ0FBQyxTQUFMLENBQWdCLE1BQWhCLENBWkEsQ0FBQTtBQUFBLFFBY0EsR0FBQSxHQUNDO0FBQUEsVUFBQSxNQUFBLEVBQVEsTUFBUjtBQUFBLFVBQ0EsV0FBQSxFQUFhLFdBRGI7QUFBQSxVQUVBLFVBQUEsRUFBWSxVQUZaO1NBZkQsQ0FBQTtBQUFBLFFBb0JBLFNBQUEsR0FBWSxFQXBCWixDQUFBO0FBc0JBLFFBQUEsSUFBRywyREFBSDtBQUNDLGVBQUEsV0FBQTswQkFBQTtBQUNDLFlBQUEsQ0FBQSxHQUFJLGFBQWEsQ0FBQyxlQUFlLENBQUMsSUFBOUIsQ0FBb0MsQ0FBcEMsQ0FBSixDQUFBO0FBQUEsWUFDQSxFQUFBLEdBQVMsSUFBQSxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQVosQ0FBb0IsQ0FBRSxDQUFBLENBQUEsQ0FBdEIsRUFBMEIsQ0FBRSxDQUFBLENBQUEsQ0FBNUIsQ0FEVCxDQUFBO0FBQUEsWUFFQSxTQUFTLENBQUMsSUFBVixDQUNDO0FBQUEsY0FBQSxRQUFBLEVBQVUsRUFBRSxDQUFDLFFBQUgsQ0FBQSxDQUFWO0FBQUEsY0FDQSxRQUFBLEVBQVUsS0FEVjthQURELENBRkEsQ0FERDtBQUFBLFdBQUE7QUFBQSxVQU9BLEdBQUcsQ0FBQyxTQUFKLEdBQWdCLFNBUGhCLENBREQ7U0F0QkE7ZUFnQ0EsYUFBYSxDQUFDLFVBQVUsQ0FBQyxLQUF6QixDQUErQixHQUEvQixFQUFvQyxTQUFDLEdBQUQsRUFBTSxNQUFOLEdBQUE7QUFFbkMsVUFBQSxJQUFHLE1BQUEsS0FBVSxNQUFNLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEVBQTFDO0FBQ0MsWUFBQSxRQUFBLEdBQVcsR0FBWCxDQUFBO21CQUVBLGNBQUEsQ0FBQSxFQUhEO1dBQUEsTUFBQTttQkFLQyxNQUFNLENBQUMsU0FBUyxDQUFDLElBQWpCLENBQXNCLEtBQXRCLEVBQXlCLG1CQUF6QixFQUxEO1dBRm1DO1FBQUEsQ0FBcEMsRUFsQ2M7TUFBQSxFQUFBO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQVZmLENBQUE7QUFBQSxJQXVEQSxjQUFBLEdBQWlCLENBQUEsU0FBQSxLQUFBLEdBQUE7YUFBQSxTQUFBLEdBQUE7QUFFaEIsWUFBQSx5Q0FBQTtBQUFBLFFBQUEsSUFBRyxLQUFDLENBQUEsT0FBSjtBQUNDLFVBQUEsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFoQixDQUFxQixLQUFyQixDQUFBLENBQUE7QUFDQSxnQkFBQSxDQUZEO1NBQUE7QUFBQSxRQUlBLE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBakIsQ0FBc0IsS0FBdEIsRUFBeUIsb0JBQXpCLENBSkEsQ0FBQTtBQUFBLFFBS0EsTUFBTSxDQUFDLFNBQVMsQ0FBQyxJQUFqQixDQUFzQixLQUF0QixFQUF5QixtQkFBekIsQ0FMQSxDQUFBO0FBQUEsUUFRQSxLQUFBLEdBQVEsUUFBUSxDQUFDLE1BQU8sQ0FBQSxDQUFBLENBUnhCLENBQUE7QUFBQSxRQVNBLElBQUEsR0FBTyxLQUFLLENBQUMsYUFUYixDQUFBO0FBQUEsUUFZQSxNQUFNLENBQUMsU0FBUyxDQUFDLElBQWpCLENBQXNCLEtBQXRCLEVBQXlCLGVBQUEsR0FBZSxDQUFDLFFBQUEsQ0FBUyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsYUFBL0IsQ0FBNkMsSUFBN0MsQ0FBVCxDQUFELENBQWYsR0FBNkUsYUFBN0UsR0FBMEYsSUFBMUYsR0FBK0Ysc0JBQS9GLEdBQXFILFlBQXJILEdBQWtJLE1BQTNKLENBWkEsQ0FBQTtBQUFBLFFBZUEsT0FBTyxDQUFDLEdBQVIsQ0FBWSxJQUFaLENBZkEsQ0FBQTtBQUFBLFFBaUJBLENBQUEsR0FBSSxDQWpCSixDQUFBO0FBQUEsUUFrQkEsQ0FBQSxHQUFJLENBbEJKLENBQUE7QUFBQSxRQW1CQSxDQUFBLEdBQUksQ0FuQkosQ0FBQTtBQUFBLFFBb0JBLENBQUEsR0FBSSxDQUFBLEdBQUksSUFwQlIsQ0FBQTtBQXVCQSxhQUFTLDBGQUFULEdBQUE7QUFFQyxVQUFBLENBQUEsR0FBSSxJQUFLLENBQUEsQ0FBQSxDQUFULENBQUE7QUFBQSxVQUNBLENBQUEsR0FBSSxJQUFLLENBQUEsQ0FBQSxHQUFFLENBQUYsQ0FEVCxDQUFBO0FBQUEsVUFFQSxDQUFBLEdBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLHNCQUEvQixDQUFzRCxDQUF0RCxFQUF5RCxDQUF6RCxDQUZKLENBQUE7QUFBQSxVQUtBLENBQUEsR0FBSSxDQUFBLENBQUEsR0FBSyxJQUxULENBQUE7QUFPQSxVQUFBLElBQUcsQ0FBQSxHQUFJLENBQVA7QUFDQyxZQUFBLENBQUEsSUFBSyxDQUFMLENBREQ7V0FBQSxNQUFBO0FBSUMsbUJBQU0sQ0FBQSxHQUFJLENBQVYsR0FBQTtBQUNDLGNBQUEsRUFBQSxHQUFLLGVBQUEsQ0FBZ0IsQ0FBaEIsRUFBbUIsQ0FBbkIsRUFBc0IsQ0FBdEIsQ0FBTCxDQUFBO0FBQUEsY0FDQSxNQUFNLENBQUMsSUFBUCxDQUFhLEVBQWIsQ0FEQSxDQUFBO0FBQUEsY0FFQSxDQUFBLElBQUssSUFGTCxDQUREO1lBQUEsQ0FBQTtBQUFBLFlBS0EsQ0FBQSxHQUFJLElBQUEsR0FBTyxDQUFDLENBQUEsR0FBSSxDQUFMLENBTFgsQ0FKRDtXQVREO0FBQUEsU0F2QkE7QUFBQSxRQTRDQSxLQUFDLENBQUEsR0FBRyxDQUFDLFNBQUwsQ0FBZ0IsS0FBSyxDQUFDLE1BQXRCLENBNUNBLENBQUE7QUFBQSxRQTZDQSxJQUFBLEdBQVcsSUFBQSxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVosQ0FDVjtBQUFBLFVBQUEsSUFBQSxFQUFNLElBQU47QUFBQSxVQUNBLFFBQUEsRUFBVSxJQURWO0FBQUEsVUFFQSxXQUFBLEVBQWEsU0FGYjtBQUFBLFVBR0EsYUFBQSxFQUFlLEdBSGY7QUFBQSxVQUlBLFlBQUEsRUFBYyxDQUpkO1NBRFUsQ0E3Q1gsQ0FBQTtBQUFBLFFBbURBLElBQUksQ0FBQyxNQUFMLENBQWEsS0FBQyxDQUFBLEdBQWQsQ0FuREEsQ0FBQTtBQUFBLFFBcURBLE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBakIsQ0FBc0IsS0FBdEIsRUFBeUIsb0JBQUEsR0FBcUIsTUFBTSxDQUFDLE1BQXJELENBckRBLENBQUE7ZUF3REEsZUFBQSxDQUFBLEVBMURnQjtNQUFBLEVBQUE7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBdkRqQixDQUFBO0FBQUEsSUFxSEEsZUFBQSxHQUFrQixDQUFBLFNBQUEsS0FBQSxHQUFBO2FBQUEsU0FBQSxHQUFBO0FBQ2pCLFlBQUEsV0FBQTtBQUFBLFFBQUEsTUFBTSxDQUFDLFNBQVMsQ0FBQyxJQUFqQixDQUFzQixLQUF0QixFQUF5QixxQkFBekIsQ0FBQSxDQUFBO0FBQUEsUUFFQSxHQUFBLEdBQU0sQ0FGTixDQUFBO0FBQUEsUUFJQSxNQUFBLEdBQVMsU0FBQyxHQUFELEVBQU0sTUFBTixHQUFBO0FBQ1IsY0FBQSxZQUFBO0FBQUEsVUFBQSxJQUFHLEtBQUMsQ0FBQSxPQUFKO0FBQ0MsWUFBQSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQWhCLENBQXFCLEtBQXJCLENBQUEsQ0FBQTtBQUNBLGtCQUFBLENBRkQ7V0FBQTtBQUlBLFVBQUEsSUFBRyxNQUFBLEtBQVUsTUFBTSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxFQUExQztBQUVDLFlBQUEsSUFBQSxHQUFPLEtBQUMsQ0FBQSxjQUFELENBQWlCLEdBQWpCLENBQVAsQ0FBQTtBQUVBLFlBQUEsSUFBRyxJQUFJLENBQUMsRUFBTCxLQUFXLE1BQWQ7QUFDQyxjQUFBLEtBQUMsQ0FBQSxRQUFRLENBQUMsSUFBVixDQUFnQixJQUFoQixDQUFBLENBQUE7QUFBQSxjQUNBLE1BQUEsR0FBYSxJQUFBLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBWixDQUNaO0FBQUEsZ0JBQUEsUUFBQSxFQUFVLElBQUksQ0FBQyxNQUFmO0FBQUEsZ0JBQ0EsR0FBQSxFQUFLLEtBQUMsQ0FBQSxHQUROO0FBQUEsZ0JBRUEsS0FBQSxFQUFPLEVBQUEsR0FBRyxHQUZWO2VBRFksQ0FEYixDQUFBO0FBQUEsY0FNQSxNQUFBLEdBQVMsSUFBSSxDQUFDLEVBTmQsQ0FBQTtBQUFBLGNBT0EsT0FBTyxDQUFDLEdBQVIsQ0FBWSxJQUFJLENBQUMsRUFBakIsQ0FQQSxDQUREO2FBSkQ7V0FKQTtBQUFBLFVBa0JBLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBbEIsQ0FBdUIsS0FBdkIsRUFBMEIsR0FBMUIsRUFBK0IsTUFBTSxDQUFDLE1BQXRDLENBbEJBLENBQUE7QUFvQkEsVUFBQSxJQUFHLEVBQUEsR0FBQSxHQUFRLE1BQU0sQ0FBQyxNQUFsQjttQkFFQyxLQUFDLENBQUEsTUFBTSxDQUFDLHFCQUFSLENBQThCLE1BQU8sQ0FBQSxHQUFBLENBQXJDLEVBQTJDLFlBQTNDLEVBQXlELE1BQXpELEVBRkQ7V0FBQSxNQUFBO0FBS0MsWUFBQSxPQUFPLENBQUMsR0FBUixDQUFZLEtBQUMsQ0FBQSxRQUFiLENBQUEsQ0FBQTtBQUFBLFlBQ0EsS0FBQyxDQUFBLFFBQUQsR0FBWSxLQURaLENBQUE7QUFBQSxZQUVBLE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBakIsQ0FBc0IsS0FBdEIsRUFBeUIsaUJBQUEsR0FBa0IsS0FBQyxDQUFBLFFBQVEsQ0FBQyxNQUFyRCxDQUZBLENBQUE7QUFBQSxZQUdBLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBbEIsQ0FBdUIsS0FBdkIsRUFBMEIsR0FBMUIsRUFBK0IsTUFBTSxDQUFDLE1BQXRDLENBSEEsQ0FBQTttQkFJQSxNQUFNLENBQUMsaUJBQWlCLENBQUMsSUFBekIsQ0FBOEIsS0FBOUIsRUFURDtXQXJCUTtRQUFBLENBSlQsQ0FBQTtBQUFBLFFBcUNBLEtBQUMsQ0FBQSxRQUFELEdBQVksSUFyQ1osQ0FBQTtBQUFBLFFBc0NBLE1BQUEsR0FBUyxFQXRDVCxDQUFBO2VBdUNBLEtBQUMsQ0FBQSxNQUFNLENBQUMscUJBQVIsQ0FBOEIsTUFBTyxDQUFBLEdBQUEsQ0FBckMsRUFBMkMsWUFBM0MsRUFBeUQsTUFBekQsRUF4Q2lCO01BQUEsRUFBQTtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FySGxCLENBQUE7V0FnS0EsWUFBQSxDQUFBLEVBbEtvQjtFQUFBLENBdkRyQixDQUFBOztBQUFBLDBCQTROQSxnQkFBQSxHQUFrQixTQUFDLElBQUQsR0FBQTtBQUVqQixRQUFBLFdBQUE7QUFBQSxJQUFBLEdBQUEsR0FBTSxDQUFOLENBQUE7QUFBQSxJQUVBLE1BQUEsR0FBUyxDQUFBLFNBQUEsS0FBQSxHQUFBO2FBQUEsU0FBQyxHQUFELEVBQU0sTUFBTixHQUFBO0FBQ1IsWUFBQSxZQUFBO0FBQUEsUUFBQSxJQUFHLEdBQUEsS0FBTyxDQUFWO0FBQ0MsVUFBQSxNQUFNLENBQUMsU0FBUyxDQUFDLElBQWpCLENBQXNCLEtBQXRCLEVBQXlCLGFBQXpCLENBQUEsQ0FERDtTQUFBO0FBR0EsUUFBQSxJQUFHLE1BQUEsS0FBVSxNQUFNLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEVBQTFDO0FBQ0MsVUFBQSxJQUFHLEtBQUMsQ0FBQSxPQUFKO0FBQ0MsWUFBQSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQWhCLENBQXFCLEtBQXJCLENBQUEsQ0FBQTtBQUNBLGtCQUFBLENBRkQ7V0FBQTtBQUFBLFVBSUEsSUFBQSxHQUFPLEtBQUMsQ0FBQSxjQUFELENBQWlCLEdBQWpCLENBSlAsQ0FBQTtBQUFBLFVBS0EsS0FBQyxDQUFBLFFBQVEsQ0FBQyxJQUFWLENBQWdCLElBQWhCLENBTEEsQ0FBQTtBQU9BLFVBQUEsSUFBRyxHQUFBLEtBQU8sQ0FBVjtBQUNDLFlBQUEsS0FBQyxDQUFBLEdBQUcsQ0FBQyxTQUFMLENBQWdCLElBQUksQ0FBQyxNQUFyQixDQUFBLENBQUE7QUFBQSxZQUNBLEtBQUMsQ0FBQSxHQUFHLENBQUMsT0FBTCxDQUFjLEVBQWQsQ0FEQSxDQUREO1dBUEE7QUFBQSxVQVdBLE1BQUEsR0FBYSxJQUFBLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBWixDQUNaO0FBQUEsWUFBQSxRQUFBLEVBQVUsSUFBSSxDQUFDLE1BQWY7QUFBQSxZQUNBLEdBQUEsRUFBSyxLQUFDLENBQUEsR0FETjtBQUFBLFlBRUEsS0FBQSxFQUFPLEVBQUEsR0FBRyxHQUZWO1dBRFksQ0FYYixDQUFBO0FBQUEsVUFnQkEsTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFsQixDQUF1QixLQUF2QixFQUEwQixHQUExQixFQUErQixJQUFJLENBQUMsTUFBcEMsQ0FoQkEsQ0FBQTtBQWtCQSxVQUFBLElBQUcsRUFBQSxHQUFBLEdBQVEsSUFBSSxDQUFDLE1BQWhCO21CQUVDLEtBQUMsQ0FBQSxNQUFNLENBQUMsZUFBUixDQUF3QixJQUFLLENBQUEsR0FBQSxDQUE3QixFQUFtQyxNQUFuQyxFQUZEO1dBQUEsTUFBQTtBQUtDLFlBQUEsS0FBQyxDQUFBLFFBQUQsR0FBWSxLQUFaLENBQUE7QUFBQSxZQUNBLE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBakIsQ0FBc0IsS0FBdEIsRUFBeUIsaUJBQUEsR0FBa0IsS0FBQyxDQUFBLFFBQVEsQ0FBQyxNQUFyRCxDQURBLENBQUE7QUFBQSxZQUVBLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBbEIsQ0FBdUIsS0FBdkIsRUFBMEIsR0FBMUIsRUFBK0IsSUFBSSxDQUFDLE1BQXBDLENBRkEsQ0FBQTttQkFHQSxNQUFNLENBQUMsaUJBQWlCLENBQUMsSUFBekIsQ0FBOEIsS0FBOUIsRUFSRDtXQW5CRDtTQUFBLE1BQUE7aUJBOEJDLEtBQUEsQ0FBTSxnQ0FBQSxHQUFpQyxNQUF2QyxFQTlCRDtTQUpRO01BQUEsRUFBQTtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FGVCxDQUFBO0FBQUEsSUF3Q0EsSUFBQyxDQUFBLFFBQUQsR0FBWSxJQXhDWixDQUFBO1dBeUNBLElBQUMsQ0FBQSxNQUFNLENBQUMsZUFBUixDQUF3QixJQUFLLENBQUEsR0FBQSxDQUE3QixFQUFtQyxNQUFuQyxFQTNDaUI7RUFBQSxDQTVObEIsQ0FBQTs7QUFBQSwwQkEwUUEsT0FBQSxHQUFTLFNBQUMsSUFBRCxHQUFBO0FBRVIsUUFBQSxrQ0FBQTtBQUFBLElBQUEsTUFBQSxHQUFhLElBQUEsT0FBTyxDQUFDLFVBQVIsQ0FDWjtBQUFBLE1BQUEsSUFBQSxFQUFNLElBQU47S0FEWSxDQUFiLENBQUE7QUFHQSxJQUFBLElBQUcsSUFBQyxDQUFBLFFBQVEsQ0FBQyxNQUFWLEtBQW9CLENBQXZCO0FBQ0MsTUFBQSxNQUFNLENBQUMsU0FBUyxDQUFDLElBQWpCLENBQXNCLElBQXRCLEVBQXlCLHFCQUF6QixDQUFBLENBQUE7QUFDQSxZQUFBLENBRkQ7S0FIQTtBQUFBLElBT0EsSUFBQyxDQUFBLFNBQUQsR0FBYSxRQUFRLENBQUMsYUFBVCxDQUF1QixRQUF2QixDQVBiLENBQUE7QUFBQSxJQVFBLElBQUMsQ0FBQSxTQUFTLENBQUMsS0FBWCxHQUFtQixNQUFNLENBQUMsS0FSMUIsQ0FBQTtBQUFBLElBU0EsSUFBQyxDQUFBLFNBQVMsQ0FBQyxNQUFYLEdBQW9CLFVBVHBCLENBQUE7QUFBQSxJQVVBLElBQUMsQ0FBQSxNQUFELEdBQVUsSUFBQyxDQUFBLFNBQVMsQ0FBQyxVQUFYLENBQXNCLElBQXRCLENBVlYsQ0FBQTtBQUFBLElBWUEsSUFBQyxDQUFBLElBQUQsR0FBUSxJQUFBLENBQ1A7QUFBQSxNQUFBLE1BQUEsRUFBUSxRQUFRLENBQUMsYUFBVCxDQUF1QixRQUF2QixDQUFSO0FBQUEsTUFDQSxRQUFBLEVBQVUsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsZUFBeEIsQ0FBd0MsQ0FBQyxXQURuRDtBQUFBLE1BRUEsU0FBQSxFQUNDO0FBQUEsUUFBQSxRQUFBLEVBQVUsR0FBVjtBQUFBLFFBQ0EsS0FBQSxFQUFPLEdBRFA7QUFBQSxRQUVBLFFBQUEsRUFBVSxNQUFNLENBQUMsTUFGakI7QUFBQSxRQUdBLEdBQUEsRUFBSyxJQUFDLENBQUEsU0FITjtPQUhEO0tBRE8sQ0FaUixDQUFBO0FBQUEsSUFxQkEsSUFBQyxDQUFBLElBQUksQ0FBQyxPQUFOLENBQWMsTUFBTSxDQUFDLEtBQXJCLEVBQTRCLE1BQU0sQ0FBQyxNQUFQLEdBQWdCLFVBQTVDLENBckJBLENBQUE7QUFBQSxJQXVCQSxNQUFNLENBQUMsU0FBUyxDQUFDLElBQWpCLENBQXNCLElBQXRCLEVBQXlCLDRCQUFBLEdBQTZCLE1BQU0sQ0FBQyxLQUFwQyxHQUEwQyxHQUExQyxHQUE2QyxNQUFNLENBQUMsTUFBN0UsQ0F2QkEsQ0FBQTtBQUFBLElBeUJBLFVBQUEsR0FBYSxDQUFBLFNBQUEsS0FBQSxHQUFBO2FBQUEsU0FBQyxJQUFELEVBQU8sS0FBUCxFQUFjLENBQWQsRUFBaUIsQ0FBakIsR0FBQTtBQUNaLFFBQUEsS0FBQyxDQUFBLE1BQU0sQ0FBQyxTQUFSLEdBQW9CLFNBQXBCLENBQUE7QUFBQSxRQUNBLEtBQUMsQ0FBQSxNQUFNLENBQUMsUUFBUixDQUFpQixLQUFqQixFQUF3QixDQUFBLEdBQUksRUFBNUIsRUFBZ0MsQ0FBaEMsQ0FEQSxDQUFBO0FBQUEsUUFFQSxLQUFDLENBQUEsTUFBTSxDQUFDLFNBQVIsR0FBb0IsU0FGcEIsQ0FBQTtlQUdBLEtBQUMsQ0FBQSxNQUFNLENBQUMsUUFBUixDQUFpQixJQUFqQixFQUF1QixDQUF2QixFQUEwQixDQUExQixFQUpZO01BQUEsRUFBQTtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0F6QmIsQ0FBQTtBQUFBLElBK0JBLFNBQUEsR0FBWSxDQUFBLFNBQUEsS0FBQSxHQUFBO2FBQUEsU0FBQSxHQUFBO0FBRVgsWUFBQSxNQUFBO0FBQUEsUUFBQSxJQUFHLEtBQUMsQ0FBQSxPQUFKO0FBQ0MsVUFBQSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQWhCLENBQXFCLEtBQXJCLENBQUEsQ0FBQTtBQUNBLGdCQUFBLENBRkQ7U0FBQTtBQUFBLFFBS0EsS0FBQyxDQUFBLE1BQU0sQ0FBQyxTQUFSLEdBQW9CLFNBTHBCLENBQUE7QUFBQSxRQU1BLEtBQUMsQ0FBQSxNQUFNLENBQUMsUUFBUixDQUFpQixDQUFqQixFQUFvQixDQUFwQixFQUF1QixLQUFDLENBQUEsU0FBUyxDQUFDLEtBQWxDLEVBQXlDLEtBQUMsQ0FBQSxTQUFTLENBQUMsTUFBcEQsQ0FOQSxDQUFBO0FBQUEsUUFRQSxLQUFDLENBQUEsTUFBTSxDQUFDLFNBQVIsR0FBb0IsU0FScEIsQ0FBQTtBQUFBLFFBU0EsS0FBQyxDQUFBLE1BQU0sQ0FBQyxJQUFSLEdBQWUsWUFUZixDQUFBO0FBQUEsUUFXQSxNQUFBLEdBQVMsQ0FYVCxDQUFBO0FBQUEsUUFhQSxVQUFBLENBQVcsS0FBWCxFQUFzQixFQUFBLEdBQUcsS0FBQyxDQUFBLFFBQTFCLEVBQXNDLE1BQUEsRUFBQSxHQUFXLElBQWpELEVBQXVELEVBQXZELENBYkEsQ0FBQTtBQUFBLFFBY0EsVUFBQSxDQUFXLFFBQVgsRUFBc0IsRUFBQSxHQUFHLEtBQUMsQ0FBQSxRQUFTLENBQUEsR0FBQSxDQUFJLENBQUMsRUFBeEMsRUFBOEMsTUFBQSxFQUFBLEdBQVcsSUFBekQsRUFBK0QsRUFBL0QsQ0FkQSxDQUFBO0FBQUEsUUFlQSxVQUFBLENBQVcsS0FBWCxFQUFzQixFQUFBLEdBQUUsQ0FBQyxLQUFDLENBQUEsUUFBUyxDQUFBLEdBQUEsQ0FBSSxDQUFDLE1BQU0sQ0FBQyxHQUF0QixDQUFBLENBQTJCLENBQUMsV0FBNUIsQ0FBd0MsRUFBeEMsQ0FBRCxDQUF4QixFQUF3RSxNQUFBLEVBQUEsR0FBVyxJQUFuRixFQUF5RixFQUF6RixDQWZBLENBQUE7QUFBQSxRQWdCQSxVQUFBLENBQVcsS0FBWCxFQUFzQixFQUFBLEdBQUUsQ0FBQyxLQUFDLENBQUEsUUFBUyxDQUFBLEdBQUEsQ0FBSSxDQUFDLE1BQU0sQ0FBQyxHQUF0QixDQUFBLENBQTJCLENBQUMsV0FBNUIsQ0FBd0MsRUFBeEMsQ0FBRCxDQUF4QixFQUF3RSxNQUFBLEVBQUEsR0FBVyxJQUFuRixFQUF5RixFQUF6RixDQWhCQSxDQUFBO0FBQUEsUUFpQkEsVUFBQSxDQUFXLE1BQVgsRUFBc0IsRUFBQSxHQUFHLENBQUQsQ0FBeEIsRUFBOEIsTUFBQSxFQUFBLEdBQVcsSUFBekMsRUFBK0MsRUFBL0MsQ0FqQkEsQ0FBQTtBQUFBLFFBa0JBLFVBQUEsQ0FBVyxNQUFYLEVBQXNCLEVBQUEsR0FBRyxLQUFDLENBQUEsUUFBUyxDQUFBLEdBQUEsQ0FBSSxDQUFDLElBQXhDLEVBQWdELE1BQUEsRUFBQSxHQUFXLElBQTNELEVBQWlFLEVBQWpFLENBbEJBLENBQUE7QUFBQSxRQW9CQSxNQUFBLEdBQVMsQ0FwQlQsQ0FBQTtBQUFBLFFBcUJBLFVBQUEsQ0FBVyxNQUFYLEVBQXVCLEVBQUEsR0FBRyxJQUExQixFQUFrQyxNQUFBLEVBQUEsR0FBVyxJQUE3QyxFQUFtRCxFQUFuRCxDQXJCQSxDQUFBO0FBQUEsUUF1QkEsQ0FBQSxDQUFFLE1BQUYsQ0FBUyxDQUFDLE1BQVYsQ0FBa0IsS0FBQyxDQUFBLFNBQW5CLENBdkJBLENBQUE7QUFBQSxRQXlCQSxLQUFDLENBQUEsSUFBSSxDQUFDLEdBQU4sQ0FBVSxVQUFWLEVBQXNCLEtBQUMsQ0FBQSxRQUFTLENBQUEsR0FBQSxDQUFJLENBQUMsUUFBckMsQ0F6QkEsQ0FBQTtBQUFBLFFBMEJBLEtBQUMsQ0FBQSxJQUFJLENBQUMsR0FBTixDQUFVLE9BQVYsRUFBbUIsS0FBQyxDQUFBLFFBQVMsQ0FBQSxHQUFBLENBQUksQ0FBQyxLQUFsQyxDQTFCQSxDQUFBO0FBQUEsUUEyQkEsS0FBQyxDQUFBLElBQUksQ0FBQyxPQUFOLENBQUEsQ0EzQkEsQ0FBQTtBQUFBLFFBNEJBLEtBQUMsQ0FBQSxJQUFJLENBQUMsTUFBTixDQUFBLENBNUJBLENBQUE7QUFBQSxRQThCQSxNQUFNLENBQUMsVUFBVSxDQUFDLElBQWxCLENBQXVCLEtBQXZCLEVBQTBCLEdBQTFCLEVBQStCLEtBQUMsQ0FBQSxRQUFRLENBQUMsTUFBekMsQ0E5QkEsQ0FBQTtBQUFBLFFBK0JBLE1BQU0sQ0FBQyxjQUFjLENBQUMsSUFBdEIsQ0FBMkIsS0FBM0IsRUFBOEIsR0FBOUIsRUFBbUMsS0FBQyxDQUFBLElBQUksQ0FBQyxNQUF6QyxDQS9CQSxDQUFBO0FBaUNBLFFBQUEsSUFBRyxFQUFBLEdBQUEsR0FBUSxLQUFDLENBQUEsUUFBUSxDQUFDLE1BQXJCO2lCQUVDLFVBQUEsQ0FBVyxTQUFBLEdBQUE7bUJBQ1YsTUFBTSxDQUFDLGVBQVAsQ0FBd0IsS0FBQyxDQUFBLFFBQVMsQ0FBQSxHQUFBLENBQUksQ0FBQyxFQUF2QyxFQURVO1VBQUEsQ0FBWCxFQUVFLEdBRkYsRUFGRDtTQUFBLE1BQUE7QUFNQyxVQUFBLEtBQUMsQ0FBQSxRQUFELEdBQVksS0FBWixDQUFBO0FBQUEsVUFDQSxPQUFPLENBQUMsR0FBUixDQUFZLFVBQVosQ0FEQSxDQUFBO0FBQUEsVUFHQSxNQUFNLENBQUMsVUFBVSxDQUFDLElBQWxCLENBQXVCLEtBQXZCLEVBQTBCLEdBQTFCLEVBQStCLEtBQUMsQ0FBQSxRQUFRLENBQUMsTUFBekMsQ0FIQSxDQUFBO2lCQUlBLE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBakIsQ0FBc0IsS0FBdEIsRUFBeUIsb0JBQUEsR0FBcUIsS0FBQyxDQUFBLFFBQVEsQ0FBQyxNQUEvQixHQUFzQyxjQUF0QyxHQUFtRCxDQUFDLEtBQUMsQ0FBQSxRQUFRLENBQUMsTUFBVixHQUFtQixFQUFwQixDQUE1RSxFQVZEO1NBbkNXO01BQUEsRUFBQTtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0EvQlosQ0FBQTtBQUFBLElBOEVBLE1BQU0sQ0FBQyxjQUFQLEdBQXdCLFNBOUV4QixDQUFBO0FBQUEsSUErRUEsTUFBTSxDQUFDLE9BQVAsR0FBaUIsU0FBQyxHQUFELEdBQUE7YUFDaEIsS0FBQSxDQUFNLHNCQUFBLEdBQXVCLEdBQTdCLEVBRGdCO0lBQUEsQ0EvRWpCLENBQUE7QUFBQSxJQWlGQSxNQUFNLENBQUMsZ0JBQVAsR0FBMEIsU0FBQyxNQUFELEdBQUE7YUFDekIsS0FBQSxDQUFNLDZCQUFBLEdBQThCLE1BQXBDLEVBRHlCO0lBQUEsQ0FqRjFCLENBQUE7QUFBQSxJQW9GQSxHQUFBLEdBQU0sQ0FwRk4sQ0FBQTtBQUFBLElBcUZBLElBQUMsQ0FBQSxRQUFELEdBQVksSUFyRlosQ0FBQTtXQXVGQSxNQUFNLENBQUMsZUFBUCxDQUF3QixJQUFDLENBQUEsUUFBUyxDQUFBLEdBQUEsQ0FBSSxDQUFDLEVBQXZDLEVBekZRO0VBQUEsQ0ExUVQsQ0FBQTs7dUJBQUE7O0lBeENELENBQUEiLCJmaWxlIjoiR1NWSHlwZXJsYXBzZS5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIk51bWJlci5wcm90b3R5cGUudG9SYWQgPSAoKSAtPiBAICogTWF0aC5QSSAvIDE4MFxuXG5OdW1iZXIucHJvdG90eXBlLnRvRGVnID0gKCkgLT4gQCAqIDE4MCAvIE1hdGguUElcblxuQVBJX0tFWSA9IFwiQUl6YVN5QlEyZHpEZnlGOFkwRHdlLVE2Snp4NF9HNjJBTnJUb3RRXCJcblxuVEFHX0hFSUdIVCA9IDQwXG5cbnBvaW50T25MaW5lID0gKHQsIGEsIGIpIC0+XG5cdGxhdDEgPSBhLmxhdCgpLnRvUmFkKClcblx0bG5nMSA9IGEubG5nKCkudG9SYWQoKVxuXG5cdGxhdDIgPSBiLmxhdCgpLnRvUmFkKClcblx0bG5nMiA9IGIubG5nKCkudG9SYWQoKVxuXG5cdHggPSBsYXQxICsgdCAqIChsYXQyIC0gbGF0MSk7XG5cdHkgPSBsbmcxICsgdCAqIChsbmcyIC0gbG5nMSk7XG5cblx0cmV0dXJuIG5ldyBnb29nbGUubWFwcy5MYXRMbmcoeC50b0RlZygpLCB5LnRvRGVnKCkpXG5cbmdldEZvbGxvd2VkUGF0aCA9IChtLCBhLCBiKSAtPlxuXHRkID0gZ29vZ2xlLm1hcHMuZ2VvbWV0cnkuc3BoZXJpY2FsLmNvbXB1dGVEaXN0YW5jZUJldHdlZW4oYSwgYilcblxuXHRpZiBtIDwgMCB8fCBkIDwgbVxuXHRcdGFsZXJ0KFwiZXJyb3IgZ2V0Rm9sb3dlZFBhdGhcIilcblxuXHR0ID0gbSAvIGRcblxuXHRyZXR1cm4gcG9pbnRPbkxpbmUodCwgYSwgYilcblxuIyBodHRwOi8vaGlkZWljaGkuY29tL2FyY2hpdmVzLzk0XG51bmlxdWVJRCA9IC0+XG5cdHJhbmRhbSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMDAwKVxuXHRkYXRlID0gbmV3IERhdGUoKVxuXHR0aW1lID0gZGF0ZS5nZXRUaW1lKClcblx0cmV0dXJuIHJhbmRhbSArIHRpbWUudG9TdHJpbmcoKVxuXG5jbGFzcyBHU1ZIeXBlcmxhcHNlXG5cblx0IyBjb25zdFxuXHRAQVBJX0tFWSA9IFwiQUl6YVN5QlEyZHpEZnlGOFkwRHdlLVE2Snp4NF9HNjJBTnJUb3RRXCJcblx0QERJU1RfQkVUV0VFTl9QVFMgPSA1XG5cdEBNQVhfUFRTID0gMTAwXG5cblx0IyBzdGF0aWMgdmFyXG5cdEBkaXJTZXJ2aWNlID0gbmV3IGdvb2dsZS5tYXBzLkRpcmVjdGlvbnNTZXJ2aWNlKHt9KVxuXHRAZGlyUmVnZXggPSAvZGlyXFwvKFswLTkuLV0qKSwoWzAtOS4tXSopXFwvKFswLTkuLV0qKSwoWzAtOS4tXSopXFwvQChbMC05Li1dKiksKFswLTkuLV0qKSwoWzAtOV0qKXpcXC9kYXRhPSguKikkL1xuXHRAZGF0YVJlZ2V4ID0gLyExZChbMC05Li1dKikhMmQoWzAtOS4tXSopL2dcblx0QGRhdGFMYXRMbmdSZWdleCA9IC8hMWQoWzAtOS4tXSopITJkKFswLTkuLV0qKS9cblxuXHQjIGxvYWRlclxuXHRAbGRyID0gbmV3IEdTVlBBTk8uUGFub0xvYWRlcigpXG5cdEBsZHJTdGFjayA9IFtdXG5cblx0X2NsYXNzID0gQFxuXG5cdCMgZXZlbnRcblx0QG9uRXJyb3IgXHRcdFx0PSAoZXJyKSAtPiBhbGVydChcImVycm9yXCIpXG5cdEBvbk1lc3NhZ2VcdFx0XHQ9ICgpIC0+IG51bGxcblx0QG9uUGFub3JhbWFMb2FkIFx0PSAoKSAtPiBudWxsXG5cdEBvbkFuYWx5emVDb21wbGV0ZVx0PSAoKSAtPiBudWxsXG5cdEBvblByb2dyZXNzXHRcdFx0PSAoKSAtPiBudWxsXG5cdEBvbkNhbmNlbCBcdFx0XHQ9ICgpIC0+IG51bGxcblxuXHQjIGNvbnN0cnVjdG9yXG5cdGNvbnN0cnVjdG9yOiAobmFtZSwgbWFwKSAtPlxuXHRcdEBuYW1lID0gbmFtZVxuXG5cdFx0QGJDYW5jZWwgPSBmYWxzZVxuXHRcdEBiV2FpdGluZyA9IGZhbHNlXG5cdFx0QHVuaXF1ZUlkID0gdW5pcXVlSUQoKVxuXHRcdEBwYW5vTGlzdCA9IFtdXG5cdFx0QGNsaWVudCA9IG5ldyBnb29nbGUubWFwcy5TdHJlZXRWaWV3U2VydmljZSgpXG5cdFx0QG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAgbWFwLFxuXHRcdFx0bWFwVHlwZUlkOiBnb29nbGUubWFwcy5NYXBUeXBlSWQuUk9BRE1BUFxuXHRcdFx0em9vbTogMTZcblxuXHQjIG1ldGhvZHNcblx0Y2FuY2VsOiAtPlxuXHRcdEBiQ2FuY2VsID0gdHJ1ZVxuXHRcdGlmICFAYldhaXRpbmdcblx0XHRcdF9jbGFzcy5vbkNhbmNlbC5jYWxsIEBcblxuXHQjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdCMgY2xhc3MgbWV0aG9kXG5cdGNyZWF0ZVBhbm9EYXRhOiAocmVzKSAtPlxuXHRcdHJldHVybiB7XG5cdFx0XHRpZDogcmVzLmxvY2F0aW9uLnBhbm9cblx0XHRcdHJvdGF0aW9uOiByZXMudGlsZXMuY2VudGVySGVhZGluZyAqIE1hdGguUEkgLyAxODAuMFxuXHRcdFx0cGl0Y2g6IHJlcy50aWxlcy5vcmlnaW5QaXRjaCAqIE1hdGguUEkgLyAxODAuMFxuXHRcdFx0bGF0TG5nOiByZXMubG9jYXRpb24ubGF0TG5nXG5cdFx0XHRkYXRlOiByZXMuaW1hZ2VEYXRlXG5cdFx0fVxuXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0Y3JlYXRlRnJvbURpcmVjdGlvbjogKHVybCwgYXJncyktPlxuXG5cdFx0dHJhdmVsTW9kZSBcdFx0PSBhcmdzLnRyYXZlbE1vZGVcblx0XHRzdGVwIFx0XHRcdD0gcGFyc2VGbG9hdChhcmdzLnN0ZXApXG5cdFx0c2VhcmNoUmFkaXVzXHQ9IHBhcnNlRmxvYXQoYXJncy5zZWFyY2hSYWRpdXMpXG5cblx0XHRyYXdQdHMgPSBbXVxuXHRcdHJvdXRlUmVzID0gbnVsbFxuXHRcdHByZXZJZCA9ICcnXG5cblx0XHQjID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0IyAxLiByZXF1ZXN0IHJvdXRlXG5cdFx0cmVxdWVzdFJvdXRlID0gPT5cblx0XHRcdCMgcGFyc2UgdXJsXG5cdFx0XHRyZXN1bHQgPSBfY2xhc3MuZGlyUmVnZXguZXhlYyggdXJsIClcblxuXHRcdFx0aWYgIXJlc3VsdD9cblx0XHRcdFx0YWxlcnQgXCJjYW5ub3QgcGFyc2UgdXJsXCJcblx0XHRcdFx0cmV0dXJuXG5cblx0XHRcdG9yaWdpbiAgICAgID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyggcmVzdWx0WzFdLCByZXN1bHRbMl0gKVxuXHRcdFx0ZGVzdGluYXRpb25cdD0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyggcmVzdWx0WzNdLCByZXN1bHRbNF0gKVxuXHRcdFx0Y2VudGVyICAgICAgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKCByZXN1bHRbNV0sIHJlc3VsdFs2XSApXG5cdFx0XHR6b29tICAgICAgICA9IHBhcnNlSW50KHJlc3VsdFs3XSlcblxuXHRcdFx0QG1hcC5zZXRab29tKCB6b29tIClcblx0XHRcdEBtYXAuc2V0Q2VudGVyKCBjZW50ZXIgKVxuXG5cdFx0XHRyZXEgPVxuXHRcdFx0XHRvcmlnaW46IG9yaWdpblxuXHRcdFx0XHRkZXN0aW5hdGlvbjogZGVzdGluYXRpb25cblx0XHRcdFx0dHJhdmVsTW9kZTogdHJhdmVsTW9kZVxuXG5cdFx0XHQjIHBhcnNlIHdheXBvaW50IGZyb20gZGF0YVxuXHRcdFx0d2F5cG9pbnRzID0gW11cblx0XHRcdFxuXHRcdFx0aWYgKHJlc3VsdCA9IHJlc3VsdFs4XS5tYXRjaCggR1NWSHlwZXJsYXBzZS5kYXRhUmVnZXggKSk/XG5cdFx0XHRcdGZvciBpLCByIG9mIHJlc3VsdFxuXHRcdFx0XHRcdG0gPSBHU1ZIeXBlcmxhcHNlLmRhdGFMYXRMbmdSZWdleC5leGVjKCByIClcblx0XHRcdFx0XHR3cCA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoIG1bMl0sIG1bMV0gKVxuXHRcdFx0XHRcdHdheXBvaW50cy5wdXNoXG5cdFx0XHRcdFx0XHRsb2NhdGlvbjogd3AudG9TdHJpbmcoKVxuXHRcdFx0XHRcdFx0c3RvcG92ZXI6IGZhbHNlXG5cblx0XHRcdFx0cmVxLndheXBvaW50cyA9IHdheXBvaW50c1xuXG5cdFx0XHRHU1ZIeXBlcmxhcHNlLmRpclNlcnZpY2Uucm91dGUgcmVxLCAocmVzLCBzdGF0dXMpID0+XG5cblx0XHRcdFx0aWYgc3RhdHVzID09IGdvb2dsZS5tYXBzLkRpcmVjdGlvbnNTdGF0dXMuT0tcblx0XHRcdFx0XHRyb3V0ZVJlcyA9IHJlc1xuXHRcdFx0XHRcdCMgbmV4dFxuXHRcdFx0XHRcdHN1YmRpdmlkZVJvdXRlKClcblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdF9jbGFzcy5vbk1lc3NhZ2UuY2FsbCBALCBcImNhbm5vdCBnZXQgcm91dGUuXCJcblxuXHRcdCMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHQjIDIuIHN1YmRpdmlkZSByb3V0ZVxuXHRcdHN1YmRpdmlkZVJvdXRlID0gKCkgPT5cblxuXHRcdFx0aWYgQGJDYW5jZWxcblx0XHRcdFx0X2NsYXNzLm9uQ2FuY2VsLmNhbGwgQFxuXHRcdFx0XHRyZXR1cm5cblxuXHRcdFx0X2NsYXNzLm9uTWVzc2FnZS5jYWxsIEAsIFwicmVxdWVzdGluZyByb3V0ZS4uXCJcblx0XHRcdF9jbGFzcy5vbk1lc3NhZ2UuY2FsbCBALCBcImFuYWx5emluZyByb3V0ZS4uXCJcblxuXHRcdFx0IyBnZXQgcG9pbnRzXG5cdFx0XHRyb3V0ZSA9IHJvdXRlUmVzLnJvdXRlc1swXVxuXHRcdFx0cGF0aCA9IHJvdXRlLm92ZXJ2aWV3X3BhdGhcblxuXHRcdFx0IyBzaG93IGluZm9cblx0XHRcdF9jbGFzcy5vbk1lc3NhZ2UuY2FsbCBALCBcInBhdGggbGVuZ3RoOiAje3BhcnNlSW50KGdvb2dsZS5tYXBzLmdlb21ldHJ5LnNwaGVyaWNhbC5jb21wdXRlTGVuZ3RoKHBhdGgpKX0obSksIHN0ZXA6ICN7c3RlcH0obSksIHNlYXJjaCByYWRpdXM6ICN7c2VhcmNoUmFkaXVzfSAobSlcIlxuXHRcdFx0XG5cblx0XHRcdGNvbnNvbGUubG9nIHBhdGhcblxuXHRcdFx0ZCA9IDAgIyBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGIgKG0pXG5cdFx0XHRyID0gMCAjIGFsd2F5cyBtdXN0IGJlIDwgc3RlcFxuXHRcdFx0bSA9IDAgIyBjdXJyZW50IG1pZHBvaW50XG5cdFx0XHRhID0gYiA9IG51bGxcblxuXHRcdFx0IyByZXRyaXZlIHRvIHdheSBwb2ludHNcblx0XHRcdGZvciBpIGluIFswLi5wYXRoLmxlbmd0aC0yXVxuXG5cdFx0XHRcdGEgPSBwYXRoW2ldXG5cdFx0XHRcdGIgPSBwYXRoW2krMV1cblx0XHRcdFx0ZCA9IGdvb2dsZS5tYXBzLmdlb21ldHJ5LnNwaGVyaWNhbC5jb21wdXRlRGlzdGFuY2VCZXR3ZWVuKGEsIGIpXG5cblx0XHRcdFx0IyBvZmZzZXQgLXJcblx0XHRcdFx0bSA9IC1yICsgc3RlcFxuXG5cdFx0XHRcdGlmIGQgPCBtXG5cdFx0XHRcdFx0ciArPSBkXG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHQjIHN1YmRpdmlkZVxuXHRcdFx0XHRcdHdoaWxlIG0gPCBkXG5cdFx0XHRcdFx0XHRwdCA9IGdldEZvbGxvd2VkUGF0aChtLCBhLCBiKVxuXHRcdFx0XHRcdFx0cmF3UHRzLnB1c2goIHB0IClcblx0XHRcdFx0XHRcdG0gKz0gc3RlcFxuXG5cdFx0XHRcdFx0ciA9IHN0ZXAgLSAobSAtIGQpXG5cblx0XHRcdCMgZml0IGJvdW5kIGFuZCBhZGQgcG9seWxpbmVcblx0XHRcdEBtYXAuZml0Qm91bmRzKCByb3V0ZS5ib3VuZHMgKVxuXHRcdFx0cGF0aCA9IG5ldyBnb29nbGUubWFwcy5Qb2x5bGluZVxuXHRcdFx0XHRwYXRoOiBwYXRoXG5cdFx0XHRcdGdlb2Rlc2ljOiB0cnVlXG5cdFx0XHRcdHN0cm9rZUNvbG9yOiAnIzAwMDAwMCdcblx0XHRcdFx0c3Ryb2tlT3BhY2l0eTogMS4wXG5cdFx0XHRcdHN0cm9rZVdlaWdodDogMlxuXHRcdFx0cGF0aC5zZXRNYXAoIEBtYXAgKVxuXG5cdFx0XHRfY2xhc3Mub25NZXNzYWdlLmNhbGwgQCwgXCJudW0gb2Ygd2F5cG9pbnRzOiAje3Jhd1B0cy5sZW5ndGh9XCJcblxuXHRcdFx0IyBuZXh0XG5cdFx0XHRyZXRyaXZlUGFub0RhdGEoKVxuXG5cdFx0IyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdCMgMy4gcmV0cml2ZSBwYW5vIGRhdGEgYW5kIHNwbGljZSBkdXBsaWNhdGVkIGlkXG5cdFx0cmV0cml2ZVBhbm9EYXRhID0gPT5cblx0XHRcdF9jbGFzcy5vbk1lc3NhZ2UuY2FsbCBALCBcInJldHJpdmluZyBwYW5vIGlkLi5cIlxuXG5cdFx0XHRpZHggPSAwXG5cblx0XHRcdG9uTG9hZCA9IChyZXMsIHN0YXR1cykgPT5cblx0XHRcdFx0aWYgQGJDYW5jZWxcblx0XHRcdFx0XHRfY2xhc3Mub25DYW5jZWwuY2FsbCBAXG5cdFx0XHRcdFx0cmV0dXJuXG5cblx0XHRcdFx0aWYgc3RhdHVzID09IGdvb2dsZS5tYXBzLlN0cmVldFZpZXdTdGF0dXMuT0tcblxuXHRcdFx0XHRcdHBhbm8gPSBAY3JlYXRlUGFub0RhdGEoIHJlcyApXG5cblx0XHRcdFx0XHRpZiBwYW5vLmlkICE9IHByZXZJZFxuXHRcdFx0XHRcdFx0QHBhbm9MaXN0LnB1c2goIHBhbm8gKVxuXHRcdFx0XHRcdFx0bWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlclxuXHRcdFx0XHRcdFx0XHRwb3NpdGlvbjogcGFuby5sYXRMbmdcblx0XHRcdFx0XHRcdFx0bWFwOiBAbWFwXG5cdFx0XHRcdFx0XHRcdHRpdGxlOiBcIiN7aWR4fVwiXG5cblx0XHRcdFx0XHRcdHByZXZJZCA9IHBhbm8uaWRcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nIHBhbm8uaWRcblxuXHRcdFx0XHRfY2xhc3Mub25Qcm9ncmVzcy5jYWxsIEAsIGlkeCwgcmF3UHRzLmxlbmd0aFxuXG5cdFx0XHRcdGlmICsraWR4IDwgcmF3UHRzLmxlbmd0aFxuXHRcdFx0XHRcdCMgbmV4dFxuXHRcdFx0XHRcdEBjbGllbnQuZ2V0UGFub3JhbWFCeUxvY2F0aW9uKHJhd1B0c1tpZHhdLCBzZWFyY2hSYWRpdXMsIG9uTG9hZClcblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdCMgZW5kXG5cdFx0XHRcdFx0Y29uc29sZS5sb2cgQHBhbm9MaXN0XG5cdFx0XHRcdFx0QGJXYWl0aW5nID0gZmFsc2Vcblx0XHRcdFx0XHRfY2xhc3Mub25NZXNzYWdlLmNhbGwgQCwgXCJ0b3RhbCBwYW5vIGlkOiAje0BwYW5vTGlzdC5sZW5ndGh9XCJcblx0XHRcdFx0XHRfY2xhc3Mub25Qcm9ncmVzcy5jYWxsIEAsIGlkeCwgcmF3UHRzLmxlbmd0aFxuXHRcdFx0XHRcdF9jbGFzcy5vbkFuYWx5emVDb21wbGV0ZS5jYWxsIEBcblxuXHRcdFx0IyBpbml0IEdTVlBhbm9cblx0XHRcdEBiV2FpdGluZyA9IHRydWVcblx0XHRcdHByZXZJZCA9ICcnXG5cdFx0XHRAY2xpZW50LmdldFBhbm9yYW1hQnlMb2NhdGlvbihyYXdQdHNbaWR4XSwgc2VhcmNoUmFkaXVzLCBvbkxvYWQpXG5cblx0XHQjIHRyaWdnZXJcblx0XHRyZXF1ZXN0Um91dGUoKVxuXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0Y3JlYXRlRnJvbVBhbm9JZDogKGxpc3QpIC0+XG5cblx0XHRpZHggPSAwXG5cblx0XHRvbkxvYWQgPSAocmVzLCBzdGF0dXMpPT5cblx0XHRcdGlmIGlkeCA9PSAwXG5cdFx0XHRcdF9jbGFzcy5vbk1lc3NhZ2UuY2FsbCBALCBcImFuYWx5emluZy4uXCJcdFxuXG5cdFx0XHRpZiBzdGF0dXMgPT0gZ29vZ2xlLm1hcHMuU3RyZWV0Vmlld1N0YXR1cy5PS1xuXHRcdFx0XHRpZiBAYkNhbmNlbFxuXHRcdFx0XHRcdF9jbGFzcy5vbkNhbmNlbC5jYWxsIEBcblx0XHRcdFx0XHRyZXR1cm5cblxuXHRcdFx0XHRwYW5vID0gQGNyZWF0ZVBhbm9EYXRhKCByZXMgKVxuXHRcdFx0XHRAcGFub0xpc3QucHVzaCggcGFubyApXG5cblx0XHRcdFx0aWYgaWR4ID09IDBcblx0XHRcdFx0XHRAbWFwLnNldENlbnRlciggcGFuby5sYXRMbmcgKVxuXHRcdFx0XHRcdEBtYXAuc2V0Wm9vbSggMTMgKVxuXG5cdFx0XHRcdG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXJcblx0XHRcdFx0XHRwb3NpdGlvbjogcGFuby5sYXRMbmdcblx0XHRcdFx0XHRtYXA6IEBtYXBcblx0XHRcdFx0XHR0aXRsZTogXCIje2lkeH1cIlxuXG5cdFx0XHRcdF9jbGFzcy5vblByb2dyZXNzLmNhbGwgQCwgaWR4LCBsaXN0Lmxlbmd0aFxuXG5cdFx0XHRcdGlmICsraWR4IDwgbGlzdC5sZW5ndGhcblx0XHRcdFx0XHQjIG5leHRcblx0XHRcdFx0XHRAY2xpZW50LmdldFBhbm9yYW1hQnlJZChsaXN0W2lkeF0sIG9uTG9hZClcblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdCMgZW5kXG5cdFx0XHRcdFx0QGJXYWl0aW5nID0gZmFsc2Vcblx0XHRcdFx0XHRfY2xhc3Mub25NZXNzYWdlLmNhbGwgQCwgXCJ0b3RhbCBwYW5vIGlkOiAje0BwYW5vTGlzdC5sZW5ndGh9XCJcblx0XHRcdFx0XHRfY2xhc3Mub25Qcm9ncmVzcy5jYWxsIEAsIGlkeCwgbGlzdC5sZW5ndGhcblx0XHRcdFx0XHRfY2xhc3Mub25BbmFseXplQ29tcGxldGUuY2FsbCBAXG5cdFx0XHRcblx0XHRcdGVsc2Vcblx0XHRcdFx0YWxlcnQgXCJlcnJvciBvbiBjcmVhdGVGcm9tUGFub0lkKCkgOiAje3N0YXR1c31cIlxuXG5cdFx0IyB0cmlnZ2VyXG5cblx0XHRAYldhaXRpbmcgPSB0cnVlXG5cdFx0QGNsaWVudC5nZXRQYW5vcmFtYUJ5SWQobGlzdFtpZHhdLCBvbkxvYWQpXG5cblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRjb21wb3NlOiAoem9vbSktPlxuXG5cdFx0bG9hZGVyID0gbmV3IEdTVlBBTk8uUGFub0xvYWRlclxuXHRcdFx0em9vbTogem9vbVxuXG5cdFx0aWYgQHBhbm9MaXN0Lmxlbmd0aCA9PSAwXG5cdFx0XHRfY2xhc3Mub25NZXNzYWdlLmNhbGwgQCwgXCJ0aGVyZSBpcyBubyBwYW5vIGlkXCJcblx0XHRcdHJldHVyblxuXG5cdFx0QHRhZ0NhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpXG5cdFx0QHRhZ0NhbnZhcy53aWR0aCA9IGxvYWRlci53aWR0aFxuXHRcdEB0YWdDYW52YXMuaGVpZ2h0ID0gVEFHX0hFSUdIVFxuXHRcdEB0YWdDdHhcdD0gQHRhZ0NhbnZhcy5nZXRDb250ZXh0KCcyZCcpXG5cblx0XHRAZ2xzbCA9IEdsc2xcblx0XHRcdGNhbnZhczogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJylcblx0XHRcdGZyYWdtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBhbm8tcm90YXRpb25cIikudGV4dENvbnRlbnRcblx0XHRcdHZhcmlhYmxlczpcblx0XHRcdFx0cm90YXRpb246IDAuMFxuXHRcdFx0XHRwaXRjaDogMC4wXG5cdFx0XHRcdG9yaWdpbmFsOiBsb2FkZXIuY2FudmFzXG5cdFx0XHRcdHRhZzogQHRhZ0NhbnZhc1xuXG5cdFx0QGdsc2wuc2V0U2l6ZShsb2FkZXIud2lkdGgsIGxvYWRlci5oZWlnaHQgKyBUQUdfSEVJR0hUKVxuXG5cdFx0X2NsYXNzLm9uTWVzc2FnZS5jYWxsIEAsIFwiY29tcG9zaW5nIHBhbm9yYW1hLi4gc2l6ZToje2xvYWRlci53aWR0aH14I3tsb2FkZXIuaGVpZ2h0fVwiXG5cblx0XHR3cml0ZVRvVGFnID0gKG5hbWUsIHZhbHVlLCB4LCB5KSA9PlxuXHRcdFx0QHRhZ0N0eC5maWxsU3R5bGUgPSAnI2ZmZmZmZidcblx0XHRcdEB0YWdDdHguZmlsbFRleHQodmFsdWUsIHggKyA0MCwgeSlcblx0XHRcdEB0YWdDdHguZmlsbFN0eWxlID0gJyNmZjAwMDAnXG5cdFx0XHRAdGFnQ3R4LmZpbGxUZXh0KG5hbWUsIHgsIHkpXG5cblx0XHRvbkNvbXBvc2UgPSA9PlxuXG5cdFx0XHRpZiBAYkNhbmNlbFxuXHRcdFx0XHRfY2xhc3Mub25DYW5jZWwuY2FsbCBAXG5cdFx0XHRcdHJldHVyblxuXG5cdFx0XHQjIGRyYXcgdGFnXG5cdFx0XHRAdGFnQ3R4LmZpbGxTdHlsZSA9ICcjMDAwMDAwJ1xuXHRcdFx0QHRhZ0N0eC5maWxsUmVjdCgwLCAwLCBAdGFnQ2FudmFzLndpZHRoLCBAdGFnQ2FudmFzLmhlaWdodClcblxuXHRcdFx0QHRhZ0N0eC5maWxsU3R5bGUgPSAnI2ZmZmZmZidcblx0XHRcdEB0YWdDdHguZm9udCA9ICcxMnB4IEFyaWFsJ1xuXG5cdFx0XHRjdXJzb3IgPSAwXG5cblx0XHRcdHdyaXRlVG9UYWcoXCJ1aWRcIiwgICAgIFwiI3tAdW5pcXVlSWR9XCIsIGN1cnNvcisrICogMHhmZiwgMzYpXHRcblx0XHRcdHdyaXRlVG9UYWcoXCJwYW5vaWRcIiwgIFwiI3tAcGFub0xpc3RbaWR4XS5pZH1cIiwgY3Vyc29yKysgKiAweGZmLCAzNilcdFx0XHRcdFx0XHRcblx0XHRcdHdyaXRlVG9UYWcoXCJsYXRcIiwgICAgIFwiI3tAcGFub0xpc3RbaWR4XS5sYXRMbmcubGF0KCkudG9QcmVjaXNpb24oMTcpfVwiLCBjdXJzb3IrKyAqIDB4ZmYsIDM2KVx0XG5cdFx0XHR3cml0ZVRvVGFnKFwibG5nXCIsICAgICBcIiN7QHBhbm9MaXN0W2lkeF0ubGF0TG5nLmxuZygpLnRvUHJlY2lzaW9uKDE3KX1cIiwgY3Vyc29yKysgKiAweGZmLCAzNilcdFxuXHRcdFx0d3JpdGVUb1RhZyhcImhlYWRcIiwgICAgXCIjezB9XCIsIGN1cnNvcisrICogMHhmZiwgMzYpXHRcdFx0XHRcdFx0XHRcblx0XHRcdHdyaXRlVG9UYWcoXCJkYXRlXCIsICAgIFwiI3tAcGFub0xpc3RbaWR4XS5kYXRlfVwiLCBjdXJzb3IrKyAqIDB4ZmYsIDM2KVx0XG5cblx0XHRcdGN1cnNvciA9IDBcblx0XHRcdHdyaXRlVG9UYWcoXCJ6b29tXCIsICAgICBcIiN7em9vbX1cIiwgY3Vyc29yKysgKiAweGZmLCAxOClcblxuXHRcdFx0JCgnYm9keScpLmFwcGVuZCggQHRhZ0NhbnZhcyApXG5cblx0XHRcdEBnbHNsLnNldCgncm90YXRpb24nLCBAcGFub0xpc3RbaWR4XS5yb3RhdGlvbilcblx0XHRcdEBnbHNsLnNldCgncGl0Y2gnLCBAcGFub0xpc3RbaWR4XS5waXRjaClcblx0XHRcdEBnbHNsLnN5bmNBbGwoKVxuXHRcdFx0QGdsc2wucmVuZGVyKClcblxuXHRcdFx0X2NsYXNzLm9uUHJvZ3Jlc3MuY2FsbCBALCBpZHgsIEBwYW5vTGlzdC5sZW5ndGhcblx0XHRcdF9jbGFzcy5vblBhbm9yYW1hTG9hZC5jYWxsIEAsIGlkeCwgQGdsc2wuY2FudmFzXG5cblx0XHRcdGlmICsraWR4IDwgQHBhbm9MaXN0Lmxlbmd0aFxuXHRcdFx0XHQjIG5leHQgZnJhbWVcblx0XHRcdFx0c2V0VGltZW91dCA9PlxuXHRcdFx0XHRcdGxvYWRlci5jb21wb3NlUGFub3JhbWEoIEBwYW5vTGlzdFtpZHhdLmlkIClcblx0XHRcdFx0LCAxMDBcblx0XHRcdGVsc2Vcblx0XHRcdFx0QGJXYWl0aW5nID0gZmFsc2Vcblx0XHRcdFx0Y29uc29sZS5sb2cgXCJjb21wbGV0ZVwiXG5cblx0XHRcdFx0X2NsYXNzLm9uUHJvZ3Jlc3MuY2FsbCBALCBpZHgsIEBwYW5vTGlzdC5sZW5ndGhcblx0XHRcdFx0X2NsYXNzLm9uTWVzc2FnZS5jYWxsIEAsIFwiY29tcGxldGUgLSB0b3RhbDogI3tAcGFub0xpc3QubGVuZ3RofSwgZHVyYXRpb246ICN7QHBhbm9MaXN0Lmxlbmd0aCAvIDI0fVwiXG5cblx0XHRsb2FkZXIub25QYW5vcmFtYUxvYWQgPSBvbkNvbXBvc2Vcblx0XHRsb2FkZXIub25FcnJvciA9IChtc2cpIC0+XG5cdFx0XHRhbGVydCBcImVycm9yIG9uQ29tcG9zZSgpIDogI3ttc2d9XCJcblx0XHRsb2FkZXIub25Ob1Bhbm9yYW1hRGF0YSA9IChzdGF0dXMpIC0+XG5cdFx0XHRhbGVydCBcImVycm9yIG9uTm9QYW5vcmFtYURhdGEoKSA6ICN7c3RhdHVzfVwiXG5cdFxuXHRcdGlkeCA9IDBcblx0XHRAYldhaXRpbmcgPSB0cnVlXG5cblx0XHRsb2FkZXIuY29tcG9zZVBhbm9yYW1hKCBAcGFub0xpc3RbaWR4XS5pZCApXG5cbiJdfQ==