var $addList, $autosearch, $form, $status, API_KEY, FPS, SUFFIX, VERSION, bLinkUpdate, clear, cntMarker, exportJson, json, list, load, map, onLinksChanged, prevDate, prevId, service, settings, storage, svp, updateSettings, updateStatus, urlReg;

API_KEY = "AIzaSyBQ2dzDfyF8Y0Dwe-Q6Jzx4_G62ANrTotQ";

VERSION = '0.1';

SUFFIX = 'pip';

FPS = 24.0;

storage = localStorage;

settings = {};

map = null;

svp = null;

urlReg = /!1s(.*)!2e/;

list = [];

$status = null;

$autosearch = null;

$addList = null;

$form = null;

prevId = '';

cntMarker = null;

bLinkUpdate = false;

prevDate = null;

service = new google.maps.StreetViewService();

updateSettings = function() {
  return $form.find('input, textarea').each(function() {
    var type;
    type = $(this).attr('type');
    console.log(type);
    if (type === 'checkbox' || type === 'radio') {
      return settings[this.name] = $(this).is(':checked');
    } else {
      return settings[this.name] = $(this).val();
    }
  });
};

$(function() {
  var options;
  $form = $('#panoid-parser');
  $status = $('#status');
  $autosearch = $('[name=autosearch');
  $addList = $('[name=addlist]');
  $('#laod').on('click', load);
  $('#clear').on('click', clear);
  $('#export').on('click', exportJson);
  $('input, textarea').on('change', updateSettings);
  $form.sisyphus();
  options = {
    zoom: 16,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  map = new google.maps.Map($('#map')[0], options);
  options = {
    enableCloseButton: false,
    imageDateControl: true
  };
  svp = new google.maps.StreetViewPanorama($('#svp')[0], options);
  cntMarker = new google.maps.Marker({
    map: map,
    icon: 'http://www.googlemapsmarkers.com/v1/009900'
  });
  return google.maps.event.addListener(svp, 'links_changed', onLinksChanged);
});

json = "";

clear = function() {
  list = [];
  prevId = '';
  return updateStatus();
};

exportJson = function() {
  console.log("export");
  json = JSON.stringify(list);
  return $('#json').val(json);
};

load = function() {
  var panoId, result;
  updateSettings();
  result = urlReg.exec(settings.url);
  panoId = result[1];
  return svp.setPano(panoId);
};

updateStatus = function() {
  return $status.html("count: " + list.length + "<br>duration: " + ((list.length / FPS).toPrecision(2)));
};

onLinksChanged = function() {
  var id, l, links, pos;
  links = svp.getLinks();
  if (!bLinkUpdate) {
    links = (function() {
      var i, len, results;
      results = [];
      for (i = 0, len = links.length; i < len; i++) {
        l = links[i];
        if (l.pano !== prevId) {
          results.push(l);
        }
      }
      return results;
    })();
    bLinkUpdate = true;
    svp.setLinks(links);
    return;
  }
  bLinkUpdate = false;
  pos = svp.getPosition();
  id = svp.getPano();
  return service.getPanoramaById(id, (function(_this) {
    return function(data, status) {
      var date, marker, nextId;
      if (status !== google.maps.StreetViewStatus.OK) {
        alert('cannot retrive pano id');
        return;
      }
      date = data.imageDate;
      if ((prevDate != null) && date !== prevDate) {
        if (!confirm('imageDate changed. continue?')) {
          prevDate = date;
          return;
        }
      }
      prevDate = date;
      map.setCenter(pos);
      cntMarker.setPosition(pos);
      if ($addList.prop('checked')) {
        list.push(id);
        marker = new google.maps.Marker({
          position: pos,
          map: map,
          title: "" + (list.length - 1)
        });
        updateStatus();
      }
      nextId = void 0;
      if ($autosearch.prop('checked')) {
        if (links.length === 1) {
          nextId = links[0].pano;
        }
      }
      prevId = svp.getPano();
      if (nextId != null) {
        return setTimeout(function() {
          return svp.setPano(nextId);
        }, 50);
      }
    };
  })(this));
};

//# sourceMappingURL=data:application/json;base64,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QSxJQUFHLEtBQUssQ0FBQyxNQUFOLEtBQWdCLENBQW5CO0FBQ0MsVUFBQSxNQUFBLEdBQVMsS0FBTSxDQUFBLENBQUEsQ0FBRSxDQUFDLElBQWxCLENBREQ7U0FERDtPQTlCQTtBQUFBLE1Ba0NBLE1BQUEsR0FBUyxHQUFHLENBQUMsT0FBSixDQUFBLENBbENULENBQUE7QUFvQ0EsTUFBQSxJQUFHLGNBQUg7ZUFDQyxVQUFBLENBQVcsU0FBQSxHQUFBO2lCQUNWLEdBQUcsQ0FBQyxPQUFKLENBQWEsTUFBYixFQURVO1FBQUEsQ0FBWCxFQUVFLEVBRkYsRUFERDtPQXRDMkI7SUFBQSxFQUFBO0VBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUE1QixFQWhCZ0I7QUFBQSxDQWhIakIsQ0FBQSIsImZpbGUiOiJwYW5vaWQtcGFyc2VyLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsiQVBJX0tFWSA9IFwiQUl6YVN5QlEyZHpEZnlGOFkwRHdlLVE2Snp4NF9HNjJBTnJUb3RRXCJcblZFUlNJT04gPSAnMC4xJ1xuU1VGRklYID0gJ3BpcCdcbkZQUyA9IDI0LjBcblxuXG5zdG9yYWdlID0gbG9jYWxTdG9yYWdlXG5cbnNldHRpbmdzID0ge31cblxubWFwID0gbnVsbFxuc3ZwID0gbnVsbFxuXG51cmxSZWcgPSAvITFzKC4qKSEyZS9cblxubGlzdCA9IFtdXG5cbiMganFcbiRzdGF0dXMgPSBudWxsXG4kYXV0b3NlYXJjaCA9IG51bGxcbiRhZGRMaXN0ID0gbnVsbFxuJGZvcm0gPSBudWxsXG5cbnByZXZJZCA9ICcnXG5cbmNudE1hcmtlciA9IG51bGxcblxuYkxpbmtVcGRhdGUgPSBmYWxzZVxuXG5wcmV2RGF0ZSA9IG51bGxcblxuc2VydmljZSA9IG5ldyBnb29nbGUubWFwcy5TdHJlZXRWaWV3U2VydmljZSgpXG5cblxuIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuIyBmdW5jXG5cbnVwZGF0ZVNldHRpbmdzID0gLT5cblx0JGZvcm0uZmluZCgnaW5wdXQsIHRleHRhcmVhJykuZWFjaCAtPlxuXHRcdHR5cGUgPSAkKHRoaXMpLmF0dHIoJ3R5cGUnKVxuXHRcdGNvbnNvbGUubG9nIHR5cGVcblx0XHRpZiB0eXBlID09ICdjaGVja2JveCcgfHwgdHlwZSA9PSAncmFkaW8nXG5cdFx0XHRzZXR0aW5nc1t0aGlzLm5hbWVdID0gJCh0aGlzKS5pcygnOmNoZWNrZWQnKVxuXHRcdGVsc2Vcblx0XHRcdHNldHRpbmdzW3RoaXMubmFtZV0gPSAkKHRoaXMpLnZhbCgpXG5cbiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiMgaW5pdFxuXG4kIC0+XG5cdCRmb3JtID0gJCgnI3Bhbm9pZC1wYXJzZXInKVxuXHQkc3RhdHVzID0gJCgnI3N0YXR1cycpXG5cdCRhdXRvc2VhcmNoID0gJCgnW25hbWU9YXV0b3NlYXJjaCcpXG5cdCRhZGRMaXN0ID0gJCgnW25hbWU9YWRkbGlzdF0nKVxuXG5cdCQoJyNsYW9kJykub24gJ2NsaWNrJywgbG9hZFxuXHQkKCcjY2xlYXInKS5vbiAnY2xpY2snLCBjbGVhclxuXHQkKCcjZXhwb3J0Jykub24gJ2NsaWNrJywgZXhwb3J0SnNvblxuXHQkKCdpbnB1dCwgdGV4dGFyZWEnKS5vbiAnY2hhbmdlJywgdXBkYXRlU2V0dGluZ3NcblxuXHQkZm9ybS5zaXN5cGh1cygpXG5cblx0b3B0aW9ucyA9IFxuXHRcdHpvb206IDE2XG5cdFx0bWFwVHlwZUlkOiBnb29nbGUubWFwcy5NYXBUeXBlSWQuUk9BRE1BUFxuXG5cdG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoICQoJyNtYXAnKVswXSwgb3B0aW9ucylcblxuXHRvcHRpb25zID1cblx0XHRlbmFibGVDbG9zZUJ1dHRvbjogZmFsc2Vcblx0XHRpbWFnZURhdGVDb250cm9sOiB0cnVlXG5cblx0c3ZwID0gbmV3IGdvb2dsZS5tYXBzLlN0cmVldFZpZXdQYW5vcmFtYSggJCgnI3N2cCcpWzBdLCBvcHRpb25zIClcblxuXHRjbnRNYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyXG5cdFx0bWFwOiBtYXBcblx0XHRpY29uOiAnaHR0cDovL3d3dy5nb29nbGVtYXBzbWFya2Vycy5jb20vdjEvMDA5OTAwJ1xuXG5cdGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHN2cCwgJ2xpbmtzX2NoYW5nZWQnLCBvbkxpbmtzQ2hhbmdlZClcblxuIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuIyBhY3Rpb25cblxuanNvbiA9IFwiXCIgXG5cbmNsZWFyID0gLT5cblx0bGlzdCA9IFtdXG5cdHByZXZJZCA9ICcnXG5cdHVwZGF0ZVN0YXR1cygpXG5cbmV4cG9ydEpzb24gPSAtPlxuXHRjb25zb2xlLmxvZyBcImV4cG9ydFwiXG5cdGpzb24gPSBKU09OLnN0cmluZ2lmeSggbGlzdCApXG5cdCQoJyNqc29uJykudmFsKCBqc29uIClcblxuXG5sb2FkID0gLT5cblx0dXBkYXRlU2V0dGluZ3MoKVxuXG5cdHJlc3VsdCA9IHVybFJlZy5leGVjKCBzZXR0aW5ncy51cmwgKVxuXHRwYW5vSWQgPSByZXN1bHRbMV1cblx0XG5cdHN2cC5zZXRQYW5vKCBwYW5vSWQgKVxuXG5cbnVwZGF0ZVN0YXR1cyA9IC0+XG5cdCRzdGF0dXMuaHRtbChcImNvdW50OiAje2xpc3QubGVuZ3RofTxicj5kdXJhdGlvbjogI3sobGlzdC5sZW5ndGggLyBGUFMpLnRvUHJlY2lzaW9uKDIpfVwiKVxuXG5cbiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiMgZXZ0XG5cbm9uTGlua3NDaGFuZ2VkID0gLT5cblxuXHRsaW5rcyA9IHN2cC5nZXRMaW5rcygpXG5cblx0IyBzZXQgbGlua3Ncblx0aWYgbm90IGJMaW5rVXBkYXRlXG5cdFx0bGlua3MgPSAobCBmb3IgbCBpbiBsaW5rcyB3aGVuIGwucGFubyAhPSBwcmV2SWQpXG5cdFx0YkxpbmtVcGRhdGUgPSB0cnVlXG5cdFx0c3ZwLnNldExpbmtzKCBsaW5rcyApXG5cdFx0cmV0dXJuXG5cblx0YkxpbmtVcGRhdGUgPSBmYWxzZVxuXG5cdHBvcyA9IHN2cC5nZXRQb3NpdGlvbigpXG5cdGlkID0gc3ZwLmdldFBhbm8oKVxuXG5cdHNlcnZpY2UuZ2V0UGFub3JhbWFCeUlkIGlkLCAoZGF0YSwgc3RhdHVzKSA9PlxuXG5cdFx0aWYgc3RhdHVzICE9IGdvb2dsZS5tYXBzLlN0cmVldFZpZXdTdGF0dXMuT0sgXG5cdFx0XHRhbGVydCgnY2Fubm90IHJldHJpdmUgcGFubyBpZCcpXG5cdFx0XHRyZXR1cm5cblxuXHRcdCMgY2hlY2sgaWYgZGF0ZSBpcyBjb3JyZWN0XG5cdFx0ZGF0ZSA9IGRhdGEuaW1hZ2VEYXRlXG5cdFx0aWYgcHJldkRhdGU/ICYmIGRhdGUgIT0gcHJldkRhdGVcblx0XHRcdGlmICFjb25maXJtKCdpbWFnZURhdGUgY2hhbmdlZC4gY29udGludWU/Jylcblx0XHRcdFx0cHJldkRhdGUgPSBkYXRlXG5cdFx0XHRcdHJldHVyblxuXHRcdHByZXZEYXRlID0gZGF0ZVxuXG5cdFx0bWFwLnNldENlbnRlciggcG9zIClcblx0XHRjbnRNYXJrZXIuc2V0UG9zaXRpb24oIHBvcyApXG5cblx0XHQjIGFkZCBtYXJrZXJcblx0XHRpZiAkYWRkTGlzdC5wcm9wKCdjaGVja2VkJylcblxuXHRcdFx0bGlzdC5wdXNoKCBpZCApXG5cblx0XHRcdG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXJcblx0XHRcdFx0cG9zaXRpb246IHBvc1xuXHRcdFx0XHRtYXA6IG1hcFxuXHRcdFx0XHR0aXRsZTogXCIje2xpc3QubGVuZ3RoIC0gMX1cIlxuXG5cdFx0XHR1cGRhdGVTdGF0dXMoKVxuXG5cdFx0IyBhdXRvc2VyYWNoXG5cdFx0bmV4dElkID0gdW5kZWZpbmVkXG5cblx0XHRpZiAkYXV0b3NlYXJjaC5wcm9wKCdjaGVja2VkJylcblx0XHRcdGlmIGxpbmtzLmxlbmd0aCA9PSAxXG5cdFx0XHRcdG5leHRJZCA9IGxpbmtzWzBdLnBhbm9cblxuXHRcdHByZXZJZCA9IHN2cC5nZXRQYW5vKClcblxuXHRcdGlmIG5leHRJZD9cblx0XHRcdHNldFRpbWVvdXQgLT5cblx0XHRcdFx0c3ZwLnNldFBhbm8oIG5leHRJZCApXG5cdFx0XHQsIDUwXG5cblxuIl19