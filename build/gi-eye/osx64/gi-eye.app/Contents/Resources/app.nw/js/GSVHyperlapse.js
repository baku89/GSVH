var GSVHyperlapse, GSVHyperlapseHeading, GSVHyperlapseMethod, getFollowedPath, pointOnLine, uniqueID;

Number.prototype.toRad = function() {
  return this * Math.PI / 180;
};

Number.prototype.toDeg = function() {
  return this * 180 / Math.PI;
};

GSVHyperlapseHeading = {
  BACKWARD: "backward",
  LOOKAT: "lookat",
  NORTH: "north",
  BEGINNING: "begin"
};

GSVHyperlapseMethod = {
  DRECTION: 'direction',
  PANOID: 'panoid'
};

pointOnLine = function(t, a, b) {
  var lat1, lat2, lng1, lng2, x, y;
  lat1 = a.lat().toRad();
  lng1 = a.lng().toRad();
  lat2 = b.lat().toRad();
  lng2 = b.lng().toRad();
  x = lat1 + t * (lat2 - lat1);
  y = lng1 + t * (lng2 - lng1);
  return new google.maps.LatLng(x.toDeg(), y.toDeg());
};

getFollowedPath = function(m, a, b) {
  var d, t;
  d = google.maps.geometry.spherical.computeDistanceBetween(a, b);
  if (m < 0 || d < m) {
    alert("error getFolowedPath");
  }
  t = m / d;
  return pointOnLine(t, a, b);
};

uniqueID = function() {
  var date, randam, time;
  randam = Math.floor(Math.random() * 1000);
  date = new Date();
  time = date.getTime();
  return randam + time.toString();
};

GSVHyperlapse = (function() {
  GSVHyperlapse.DIST_BETWEEN_PTS = 5;

  GSVHyperlapse.MAX_PTS = 100;

  GSVHyperlapse.dirService = new google.maps.DirectionsService({});

  GSVHyperlapse.dirRegex = /dir\/([0-9.-]*),([0-9.-]*)\/([0-9.-]*),([0-9.-]*)\/@([0-9.-]*),([0-9.-]*),([0-9]*)z\/data=(.*)$/;

  GSVHyperlapse.dataRegex = /!1d([0-9.-]*)!2d([0-9.-]*)/g;

  GSVHyperlapse.dataLatLngRegex = /!1d([0-9.-]*)!2d([0-9.-]*)/;

  GSVHyperlapse.onError = function(err) {
    return alert("error");
  };

  GSVHyperlapse.onMessage = function() {
    return null;
  };

  GSVHyperlapse.onPanoramaLoad = function() {
    return null;
  };

  GSVHyperlapse.onAnalyzeComplete = function() {
    return null;
  };

  GSVHyperlapse.onComposeComplete = function() {
    return null;
  };

  GSVHyperlapse.onProgress = function() {
    return null;
  };

  GSVHyperlapse.onCancel = function() {
    return null;
  };

  function GSVHyperlapse(name, map) {
    this.name = name;
    this.bCancel = false;
    this.bWaiting = false;
    this.uid = uniqueID();
    this.panoList = [];
    this.client = new google.maps.StreetViewService();
    this.gsvp = new GSVPANO.PanoLoader();
    if (map != null) {
      this.map = new google.maps.Map(map, {
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        zoom: 16
      });
    }
  }

  GSVHyperlapse.prototype.cancel = function() {
    this.bCancel = true;
    if (!this.bWaiting) {
      return GSVHyperlapse.onCancel.call(this);
    }
  };

  GSVHyperlapse.prototype.createPanoData = function(res) {
    return {
      id: res.location.pano,
      rotation: res.tiles.centerHeading,
      pitch: res.tiles.originPitch,
      latLng: res.location.latLng,
      date: res.imageDate
    };
  };

  GSVHyperlapse.prototype.setParameters = function(params) {
    var result;
    this.method = params.method;
    this.travelMode = params.travelMode;
    this.step = parseFloat(params.step);
    this.searchRadius = parseFloat(params.searchRadius);
    this.headingMode = params.headingMode;
    this.zoom = parseInt(params.zoom);
    this.gsvp.setZoom(this.zoom);
    if (this.headingMode === GSVHyperlapseHeading.LOOKAT) {
      result = /([0-9.]+), ([0-9.]+)/.exec(params.lookat);
      if (!(result != null)) {
        alert("lookat latLng cannot be parsed");
        return;
      }
      return this.lookat = new google.maps.LatLng(result[1], result[2]);
    }
  };

  GSVHyperlapse.prototype.createFromDirection = function(url) {
    var prevId, rawPts, requestRoute, retrivePanoData, routeRes, subdivideRoute;
    rawPts = [];
    routeRes = null;
    prevId = '';
    this.method = GSVHyperlapseMethod.DIRECTION;
    this.sourceUrl = url;
    requestRoute = (function(_this) {
      return function() {
        var center, destination, i, m, origin, r, req, result, waypoints, wp, zoom;
        result = GSVHyperlapse.dirRegex.exec(url);
        if (result == null) {
          alert("cannot parse url");
          return;
        }
        origin = new google.maps.LatLng(result[1], result[2]);
        destination = new google.maps.LatLng(result[3], result[4]);
        center = new google.maps.LatLng(result[5], result[6]);
        zoom = parseInt(result[7]);
        _this.map.setZoom(zoom);
        _this.map.setCenter(center);
        req = {
          origin: origin,
          destination: destination,
          travelMode: travelMode
        };
        waypoints = [];
        if ((result = result[8].match(GSVHyperlapse.dataRegex)) != null) {
          for (i in result) {
            r = result[i];
            m = GSVHyperlapse.dataLatLngRegex.exec(r);
            wp = new google.maps.LatLng(m[2], m[1]);
            waypoints.push({
              location: wp.toString(),
              stopover: false
            });
          }
          req.waypoints = waypoints;
        }
        return GSVHyperlapse.dirService.route(req, function(res, status) {
          if (status === google.maps.DirectionsStatus.OK) {
            routeRes = res;
            return subdivideRoute();
          } else {
            return GSVHyperlapse.onMessage.call(_this, "cannot get route.");
          }
        });
      };
    })(this);
    subdivideRoute = (function(_this) {
      return function() {
        var a, b, d, i, j, m, path, pt, r, ref, route;
        if (_this.bCancel) {
          GSVHyperlapse.onCancel.call(_this);
          return;
        }
        GSVHyperlapse.onMessage.call(_this, "subdividing route..");
        route = routeRes.routes[0];
        path = route.overview_path;
        GSVHyperlapse.onMessage.call(_this, "path length: " + (parseInt(google.maps.geometry.spherical.computeLength(path))) + "(m), step: " + _this.step + "(m), search radius: " + _this.searchRadius + " (m)");
        d = 0;
        r = 0;
        m = 0;
        a = b = null;
        for (i = j = 0, ref = path.length - 2; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {
          a = path[i];
          b = path[i + 1];
          d = google.maps.geometry.spherical.computeDistanceBetween(a, b);
          m = -r + _this.step;
          if (d < m) {
            r += d;
          } else {
            while (m < d) {
              pt = getFollowedPath(m, a, b);
              rawPts.push(pt);
              m += _this.step;
            }
            r = _this.step - (m - d);
          }
        }
        _this.map.fitBounds(route.bounds);
        GSVHyperlapse.onMessage.call(_this, "number of waypoints: " + rawPts.length);
        return retrivePanoData();
      };
    })(this);
    retrivePanoData = (function(_this) {
      return function() {
        var idx, onLoad;
        GSVHyperlapse.onMessage.call(_this, "retriving pano id..");
        idx = 0;
        onLoad = function(res, status) {
          var marker, pano;
          if (_this.bCancel) {
            GSVHyperlapse.onCancel.call(_this);
            return;
          }
          if (status === google.maps.StreetViewStatus.OK) {
            pano = _this.createPanoData(res);
            if (pano.id !== prevId) {
              _this.panoList.push(pano);
              marker = new google.maps.Marker({
                position: pano.latLng,
                map: _this.map,
                title: "" + idx
              });
              prevId = pano.id;
            }
          }
          GSVHyperlapse.onProgress.call(_this, idx, rawPts.length);
          if (++idx < rawPts.length) {
            return _this.client.getPanoramaByLocation(rawPts[idx], _this.searchRadius, onLoad);
          } else {
            console.log(_this.panoList);
            _this.bWaiting = false;
            GSVHyperlapse.onMessage.call(_this, "total pano id: " + _this.panoList.length);
            GSVHyperlapse.onProgress.call(_this, idx, rawPts.length);
            return GSVHyperlapse.onAnalyzeComplete.call(_this);
          }
        };
        _this.bWaiting = true;
        prevId = '';
        return _this.client.getPanoramaByLocation(rawPts[idx], _this.searchRadius, onLoad);
      };
    })(this);
    return requestRoute();
  };

  GSVHyperlapse.prototype.createFromPanoId = function(list) {
    var idx, onLoad;
    idx = 0;
    GSVHyperlapse.onMessage.call(this, "start compose..");
    GSVHyperlapse.onMessage.call(this, "eadingMode:" + this.headingMode);
    onLoad = (function(_this) {
      return function(res, status) {
        var marker, pano;
        if (idx === 0) {
          GSVHyperlapse.onMessage.call(_this, "analyzing..");
        }
        if (status === google.maps.StreetViewStatus.OK) {
          if (_this.bCancel) {
            GSVHyperlapse.onCancel.call(_this);
            return;
          }
          pano = _this.createPanoData(res);
          _this.panoList.push(pano);
          if (idx === 0) {
            _this.map.setCenter(pano.latLng);
            _this.map.setZoom(13);
          }
          marker = new google.maps.Marker({
            position: pano.latLng,
            map: _this.map,
            title: "" + idx
          });
          GSVHyperlapse.onProgress.call(_this, idx, list.length);
          if (++idx < list.length) {
            return _this.client.getPanoramaById(list[idx], onLoad);
          } else {
            _this.bWaiting = false;
            GSVHyperlapse.onMessage.call(_this, "total pano id: " + _this.panoList.length);
            GSVHyperlapse.onProgress.call(_this, idx, list.length);
            return GSVHyperlapse.onAnalyzeComplete.call(_this);
          }
        } else {
          return alert("error on createFromPanoId() : " + status);
        }
      };
    })(this);
    this.bWaiting = true;
    return this.client.getPanoramaById(list[idx], onLoad);
  };

  GSVHyperlapse.prototype.compose = function(callback) {
    var idx, loadPanorama, onCompose;
    if (this.panoList.length === 0) {
      GSVHyperlapse.onMessage.call(this, "there is no pano id.");
      return;
    }
    GSVHyperlapse.onMessage.call(this, "composing panorama.. size:" + this.gsvp.width + "x" + this.gsvp.height);
    if (this.headingMode === GSVHyperlapseHeading.BACKWARD || this.headingMode === GSVHyperlapseHeading.BEGIN) {
      if (this.panoList.length < 2) {
        alert("pano id's length must be 2 at least");
        return;
      }
    }
    loadPanorama = (function(_this) {
      return function() {
        var h, i;
        if (!(_this.panoList[idx].heading != null)) {
          h = 0;
          if (_this.headingMode === GSVHyperlapseHeading.BACKWARD) {
            i = idx === 0 ? 1 : idx;
            h = google.maps.geometry.spherical.computeHeading(_this.panoList[i].latLng, _this.panoList[i - 1].latLng);
          } else if (_this.headingMode === GSVHyperlapseHeading.LOOKAT) {
            h = google.maps.geometry.spherical.computeHeading(_this.panoList[idx].latLng, _this.lookat);
          } else if (_this.headingMode === GSVHyperlapseHeading.BEGIN) {
            h = google.maps.geometry.spherical.computeHeading(_this.panoList[1].latLng, _this.panoList[0].latLng);
          }
          _this.panoList[idx].heading = h;
          return _this.gsvp.composePanorama(_this.panoList[idx].id, _this.panoList[idx].heading);
        }
      };
    })(this);
    onCompose = (function(_this) {
      return function() {
        if (_this.bCancel) {
          GSVHyperlapse.onCancel.call(_this);
          return;
        }
        GSVHyperlapse.onProgress.call(_this, idx, _this.panoList.length);
        GSVHyperlapse.onPanoramaLoad.call(_this, idx, _this.gsvp.canvas, _this.panoList[idx]);
        if (++idx < _this.panoList.length) {
          return loadPanorama();
        } else {
          _this.bWaiting = false;
          console.log("complete");
          GSVHyperlapse.onProgress.call(_this, idx, _this.panoList.length);
          GSVHyperlapse.onMessage.call(_this, "complete - total: " + _this.panoList.length + ", duration: " + (_this.panoList.length / 24));
          GSVHyperlapse.onComposeComplete.call(_this);
          if (callback != null) {
            return callback();
          }
        }
      };
    })(this);
    this.gsvp.onPanoramaLoad = onCompose;
    this.gsvp.onError = function(msg) {
      return alert("error onCompose() : " + msg);
    };
    this.gsvp.onNoPanoramaData = function(status) {
      return alert("error onNoPanoramaData() : " + status);
    };
    idx = 0;
    this.bWaiting = true;
    return loadPanorama();
  };

  return GSVHyperlapse;

})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkdTVkh5cGVybGFwc2UuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsZ0dBQUE7O0FBQUEsTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFqQixHQUF5QixTQUFBLEdBQUE7U0FBTSxJQUFBLEdBQUksSUFBSSxDQUFDLEVBQVQsR0FBYyxJQUFwQjtBQUFBLENBQXpCLENBQUE7O0FBQUEsTUFDTSxDQUFDLFNBQVMsQ0FBQyxLQUFqQixHQUF5QixTQUFBLEdBQUE7U0FBTSxJQUFBLEdBQUksR0FBSixHQUFVLElBQUksQ0FBQyxHQUFyQjtBQUFBLENBRHpCLENBQUE7O0FBQUEsb0JBR0EsR0FDQztBQUFBLEVBQUEsUUFBQSxFQUFVLFVBQVY7QUFBQSxFQUNBLE1BQUEsRUFBUSxRQURSO0FBQUEsRUFFQSxLQUFBLEVBQU8sT0FGUDtBQUFBLEVBR0EsU0FBQSxFQUFXLE9BSFg7Q0FKRCxDQUFBOztBQUFBLG1CQVNBLEdBQ0M7QUFBQSxFQUFBLFFBQUEsRUFBVSxXQUFWO0FBQUEsRUFDQSxNQUFBLEVBQVEsUUFEUjtDQVZELENBQUE7O0FBQUEsV0FhQSxHQUFjLFNBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLEdBQUE7QUFDYixNQUFBLDRCQUFBO0FBQUEsRUFBQSxJQUFBLEdBQU8sQ0FBQyxDQUFDLEdBQUYsQ0FBQSxDQUFPLENBQUMsS0FBUixDQUFBLENBQVAsQ0FBQTtBQUFBLEVBQ0EsSUFBQSxHQUFPLENBQUMsQ0FBQyxHQUFGLENBQUEsQ0FBTyxDQUFDLEtBQVIsQ0FBQSxDQURQLENBQUE7QUFBQSxFQUdBLElBQUEsR0FBTyxDQUFDLENBQUMsR0FBRixDQUFBLENBQU8sQ0FBQyxLQUFSLENBQUEsQ0FIUCxDQUFBO0FBQUEsRUFJQSxJQUFBLEdBQU8sQ0FBQyxDQUFDLEdBQUYsQ0FBQSxDQUFPLENBQUMsS0FBUixDQUFBLENBSlAsQ0FBQTtBQUFBLEVBTUEsQ0FBQSxHQUFJLElBQUEsR0FBTyxDQUFBLEdBQUksQ0FBQyxJQUFBLEdB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QUFBLENBQUEsRUFsRVE7RUFBQSxDQWxSVCxDQUFBOzt1QkFBQTs7SUE3Q0QsQ0FBQSIsImZpbGUiOiJHU1ZIeXBlcmxhcHNlLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsiTnVtYmVyLnByb3RvdHlwZS50b1JhZCA9ICgpIC0+IEAgKiBNYXRoLlBJIC8gMTgwXG5OdW1iZXIucHJvdG90eXBlLnRvRGVnID0gKCkgLT4gQCAqIDE4MCAvIE1hdGguUElcblxuR1NWSHlwZXJsYXBzZUhlYWRpbmcgPVxuXHRCQUNLV0FSRDogXCJiYWNrd2FyZFwiXG5cdExPT0tBVDogXCJsb29rYXRcIlxuXHROT1JUSDogXCJub3J0aFwiXG5cdEJFR0lOTklORzogXCJiZWdpblwiXG5cbkdTVkh5cGVybGFwc2VNZXRob2QgPSBcblx0RFJFQ1RJT046ICdkaXJlY3Rpb24nXG5cdFBBTk9JRDogJ3Bhbm9pZCdcblxucG9pbnRPbkxpbmUgPSAodCwgYSwgYikgLT5cblx0bGF0MSA9IGEubGF0KCkudG9SYWQoKVxuXHRsbmcxID0gYS5sbmcoKS50b1JhZCgpXG5cblx0bGF0MiA9IGIubGF0KCkudG9SYWQoKVxuXHRsbmcyID0gYi5sbmcoKS50b1JhZCgpXG5cblx0eCA9IGxhdDEgKyB0ICogKGxhdDIgLSBsYXQxKTtcblx0eSA9IGxuZzEgKyB0ICogKGxuZzIgLSBsbmcxKTtcblxuXHRyZXR1cm4gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyh4LnRvRGVnKCksIHkudG9EZWcoKSlcblxuZ2V0Rm9sbG93ZWRQYXRoID0gKG0sIGEsIGIpIC0+XG5cdGQgPSBnb29nbGUubWFwcy5nZW9tZXRyeS5zcGhlcmljYWwuY29tcHV0ZURpc3RhbmNlQmV0d2VlbihhLCBiKVxuXG5cdGlmIG0gPCAwIHx8IGQgPCBtXG5cdFx0YWxlcnQoXCJlcnJvciBnZXRGb2xvd2VkUGF0aFwiKVxuXG5cdHQgPSBtIC8gZFxuXG5cdHJldHVybiBwb2ludE9uTGluZSh0LCBhLCBiKVxuXG4jIGh0dHA6Ly9oaWRlaWNoaS5jb20vYXJjaGl2ZXMvOTRcbnVuaXF1ZUlEID0gLT5cblx0cmFuZGFtID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMDApXG5cdGRhdGUgPSBuZXcgRGF0ZSgpXG5cdHRpbWUgPSBkYXRlLmdldFRpbWUoKVxuXHRyZXR1cm4gcmFuZGFtICsgdGltZS50b1N0cmluZygpXG5cbmNsYXNzIEdTVkh5cGVybGFwc2VcblxuXHQjIGNvbnN0XG5cdEBESVNUX0JFVFdFRU5fUFRTID0gNVxuXHRATUFYX1BUUyA9IDEwMFxuXG5cdCMgc3RhdGljIHZhclxuXHRAZGlyU2VydmljZSA9IG5ldyBnb29nbGUubWFwcy5EaXJlY3Rpb25zU2VydmljZSh7fSlcblx0QGRpclJlZ2V4ID0gL2RpclxcLyhbMC05Li1dKiksKFswLTkuLV0qKVxcLyhbMC05Li1dKiksKFswLTkuLV0qKVxcL0AoWzAtOS4tXSopLChbMC05Li1dKiksKFswLTldKil6XFwvZGF0YT0oLiopJC9cblx0QGRhdGFSZWdleCA9IC8hMWQoWzAtOS4tXSopITJkKFswLTkuLV0qKS9nXG5cdEBkYXRhTGF0TG5nUmVnZXggPSAvITFkKFswLTkuLV0qKSEyZChbMC05Li1dKikvXG5cblx0IyBldmVudFxuXHRAb25FcnJvciBcdFx0XHQ9IChlcnIpIC0+IGFsZXJ0KFwiZXJyb3JcIilcblx0QG9uTWVzc2FnZVx0XHRcdD0gKCkgLT4gbnVsbFxuXHRAb25QYW5vcmFtYUxvYWQgXHQ9ICgpIC0+IG51bGxcblx0QG9uQW5hbHl6ZUNvbXBsZXRlXHQ9ICgpIC0+IG51bGxcblx0QG9uQ29tcG9zZUNvbXBsZXRlICA9ICgpIC0+IG51bGxcblx0QG9uUHJvZ3Jlc3NcdFx0XHQ9ICgpIC0+IG51bGxcblx0QG9uQ2FuY2VsIFx0XHRcdD0gKCkgLT4gbnVsbFxuXG5cdCMgY29uc3RydWN0b3Jcblx0Y29uc3RydWN0b3I6IChuYW1lLCBtYXApIC0+XG5cdFx0QG5hbWUgPSBuYW1lXG5cblx0XHRAYkNhbmNlbCA9IGZhbHNlXG5cdFx0QGJXYWl0aW5nID0gZmFsc2Vcblx0XHRAdWlkID0gdW5pcXVlSUQoKVxuXHRcdEBwYW5vTGlzdCA9IFtdXG5cdFx0QGNsaWVudCA9IG5ldyBnb29nbGUubWFwcy5TdHJlZXRWaWV3U2VydmljZSgpXG5cdFx0QGdzdnAgPSBuZXcgR1NWUEFOTy5QYW5vTG9hZGVyKClcblx0XHRpZiBtYXA/XG5cdFx0XHRAbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcCBtYXAsXG5cdFx0XHRcdG1hcFR5cGVJZDogZ29vZ2xlLm1hcHMuTWFwVHlwZUlkLlJPQURNQVBcblx0XHRcdFx0em9vbTogMTZcblxuXHQjIG1ldGhvZHNcblx0Y2FuY2VsOiAtPlxuXHRcdEBiQ2FuY2VsID0gdHJ1ZVxuXHRcdGlmICFAYldhaXRpbmdcblx0XHRcdEdTVkh5cGVybGFwc2Uub25DYW5jZWwuY2FsbCBAXG5cblx0IyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQjIGNsYXNzIG1ldGhvZFxuXHRjcmVhdGVQYW5vRGF0YTogKHJlcykgLT5cblx0XHRyZXR1cm4ge1xuXHRcdFx0aWQ6IHJlcy5sb2NhdGlvbi5wYW5vXG5cdFx0XHRyb3RhdGlvbjogcmVzLnRpbGVzLmNlbnRlckhlYWRpbmcjICogTWF0aC5QSSAvIDE4MC4wXG5cdFx0XHRwaXRjaDogcmVzLnRpbGVzLm9yaWdpblBpdGNoIyAqIE1hdGguUEkgLyAxODAuMFxuXHRcdFx0bGF0TG5nOiByZXMubG9jYXRpb24ubGF0TG5nXG5cdFx0XHRkYXRlOiByZXMuaW1hZ2VEYXRlXG5cdFx0fVxuXG5cdHNldFBhcmFtZXRlcnM6IChwYXJhbXMpIC0+XG5cblx0XHRAbWV0aG9kIFx0XHQ9IHBhcmFtcy5tZXRob2Rcblx0XHRAdHJhdmVsTW9kZSBcdD0gcGFyYW1zLnRyYXZlbE1vZGVcblx0XHRAc3RlcCBcdFx0XHQ9IHBhcnNlRmxvYXQocGFyYW1zLnN0ZXApXG5cdFx0QHNlYXJjaFJhZGl1c1x0PSBwYXJzZUZsb2F0KHBhcmFtcy5zZWFyY2hSYWRpdXMpXG5cdFx0QGhlYWRpbmdNb2RlXHQ9IHBhcmFtcy5oZWFkaW5nTW9kZVxuXHRcdEB6b29tIFx0XHRcdD0gcGFyc2VJbnQocGFyYW1zLnpvb20pXG5cblx0XHRAZ3N2cC5zZXRab29tKCBAem9vbSApXG5cblx0XHQjIGNoZWNrIGhlYWRpbmdNb2RlXG5cdFx0aWYgQGhlYWRpbmdNb2RlID09IEdTVkh5cGVybGFwc2VIZWFkaW5nLkxPT0tBVFxuXHRcdFx0cmVzdWx0ID0gLyhbMC05Ll0rKSwgKFswLTkuXSspLy5leGVjKCBwYXJhbXMubG9va2F0IClcblx0XHRcdGlmICEocmVzdWx0Pylcblx0XHRcdFx0YWxlcnQoXCJsb29rYXQgbGF0TG5nIGNhbm5vdCBiZSBwYXJzZWRcIilcblx0XHRcdFx0cmV0dXJuXG5cdFx0XHRAbG9va2F0ID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyggcmVzdWx0WzFdLCByZXN1bHRbMl0gKVxuXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0Y3JlYXRlRnJvbURpcmVjdGlvbjogKHVybCktPlxuXG5cdFx0cmF3UHRzID0gW11cblx0XHRyb3V0ZVJlcyA9IG51bGxcblx0XHRwcmV2SWQgPSAnJ1xuXHRcdEBtZXRob2QgPSBHU1ZIeXBlcmxhcHNlTWV0aG9kLkRJUkVDVElPTlxuXHRcdEBzb3VyY2VVcmwgPSB1cmxcblxuXHRcdCMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHQjIDEuIHJlcXVlc3Qgcm91dGVcblx0XHRyZXF1ZXN0Um91dGUgPSA9PlxuXHRcdFx0IyBwYXJzZSB1cmxcblx0XHRcdHJlc3VsdCA9IEdTVkh5cGVybGFwc2UuZGlyUmVnZXguZXhlYyggdXJsIClcblxuXHRcdFx0aWYgIXJlc3VsdD9cblx0XHRcdFx0YWxlcnQgXCJjYW5ub3QgcGFyc2UgdXJsXCJcblx0XHRcdFx0cmV0dXJuXG5cblx0XHRcdG9yaWdpbiAgICAgID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyggcmVzdWx0WzFdLCByZXN1bHRbMl0gKVxuXHRcdFx0ZGVzdGluYXRpb25cdD0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyggcmVzdWx0WzNdLCByZXN1bHRbNF0gKVxuXHRcdFx0Y2VudGVyICAgICAgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKCByZXN1bHRbNV0sIHJlc3VsdFs2XSApXG5cdFx0XHR6b29tICAgICAgICA9IHBhcnNlSW50KHJlc3VsdFs3XSlcblxuXHRcdFx0QG1hcC5zZXRab29tKCB6b29tIClcblx0XHRcdEBtYXAuc2V0Q2VudGVyKCBjZW50ZXIgKVxuXG5cdFx0XHRyZXEgPVxuXHRcdFx0XHRvcmlnaW46IG9yaWdpblxuXHRcdFx0XHRkZXN0aW5hdGlvbjogZGVzdGluYXRpb25cblx0XHRcdFx0dHJhdmVsTW9kZTogdHJhdmVsTW9kZVxuXG5cdFx0XHQjIHBhcnNlIHdheXBvaW50IGZyb20gZGF0YVxuXHRcdFx0d2F5cG9pbnRzID0gW11cblx0XHRcdFxuXHRcdFx0aWYgKHJlc3VsdCA9IHJlc3VsdFs4XS5tYXRjaCggR1NWSHlwZXJsYXBzZS5kYXRhUmVnZXggKSk/XG5cdFx0XHRcdGZvciBpLCByIG9mIHJlc3VsdFxuXHRcdFx0XHRcdG0gPSBHU1ZIeXBlcmxhcHNlLmRhdGFMYXRMbmdSZWdleC5leGVjKCByIClcblx0XHRcdFx0XHR3cCA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoIG1bMl0sIG1bMV0gKVxuXHRcdFx0XHRcdHdheXBvaW50cy5wdXNoXG5cdFx0XHRcdFx0XHRsb2NhdGlvbjogd3AudG9TdHJpbmcoKVxuXHRcdFx0XHRcdFx0c3RvcG92ZXI6IGZhbHNlXG5cblx0XHRcdFx0cmVxLndheXBvaW50cyA9IHdheXBvaW50c1xuXG5cdFx0XHRHU1ZIeXBlcmxhcHNlLmRpclNlcnZpY2Uucm91dGUgcmVxLCAocmVzLCBzdGF0dXMpID0+XG5cblx0XHRcdFx0aWYgc3RhdHVzID09IGdvb2dsZS5tYXBzLkRpcmVjdGlvbnNTdGF0dXMuT0tcblx0XHRcdFx0XHRyb3V0ZVJlcyA9IHJlc1xuXHRcdFx0XHRcdCMgbmV4dFxuXHRcdFx0XHRcdHN1YmRpdmlkZVJvdXRlKClcblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdEdTVkh5cGVybGFwc2Uub25NZXNzYWdlLmNhbGwgQCwgXCJjYW5ub3QgZ2V0IHJvdXRlLlwiXG5cblx0XHQjID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0IyAyLiBzdWJkaXZpZGUgcm91dGVcblx0XHRzdWJkaXZpZGVSb3V0ZSA9ICgpID0+XG5cblx0XHRcdGlmIEBiQ2FuY2VsXG5cdFx0XHRcdEdTVkh5cGVybGFwc2Uub25DYW5jZWwuY2FsbCBAXG5cdFx0XHRcdHJldHVyblxuXG5cdFx0XHRHU1ZIeXBlcmxhcHNlLm9uTWVzc2FnZS5jYWxsIEAsIFwic3ViZGl2aWRpbmcgcm91dGUuLlwiXG5cblx0XHRcdCMgZ2V0IHBvaW50c1xuXHRcdFx0cm91dGUgPSByb3V0ZVJlcy5yb3V0ZXNbMF1cblx0XHRcdHBhdGggPSByb3V0ZS5vdmVydmlld19wYXRoXG5cblx0XHRcdCMgc2hvdyBpbmZvXG5cdFx0XHRHU1ZIeXBlcmxhcHNlLm9uTWVzc2FnZS5jYWxsIEAsXG5cdFx0XHRcdFwicGF0aCBsZW5ndGg6ICN7cGFyc2VJbnQoZ29vZ2xlLm1hcHMuZ2VvbWV0cnkuc3BoZXJpY2FsLmNvbXB1dGVMZW5ndGgocGF0aCkpfShtKSwgXG5cdFx0XHRcdHN0ZXA6ICN7QHN0ZXB9KG0pLCBzZWFyY2ggcmFkaXVzOiAje0BzZWFyY2hSYWRpdXN9IChtKVwiXG5cdFx0XHRcblxuXHRcdFx0ZCA9IDAgIyBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGIgKG0pXG5cdFx0XHRyID0gMCAjIGFsd2F5cyBtdXN0IGJlIDwgc3RlcFxuXHRcdFx0bSA9IDAgIyBjdXJyZW50IG1pZHBvaW50XG5cdFx0XHRhID0gYiA9IG51bGxcblxuXHRcdFx0IyByZXRyaXZlIHRvIHdheSBwb2ludHNcblx0XHRcdGZvciBpIGluIFswLi5wYXRoLmxlbmd0aC0yXVxuXG5cdFx0XHRcdGEgPSBwYXRoW2ldXG5cdFx0XHRcdGIgPSBwYXRoW2krMV1cblx0XHRcdFx0ZCA9IGdvb2dsZS5tYXBzLmdlb21ldHJ5LnNwaGVyaWNhbC5jb21wdXRlRGlzdGFuY2VCZXR3ZWVuKGEsIGIpXG5cblx0XHRcdFx0IyBvZmZzZXQgLXJcblx0XHRcdFx0bSA9IC1yICsgQHN0ZXBcblxuXHRcdFx0XHRpZiBkIDwgbVxuXHRcdFx0XHRcdHIgKz0gZFxuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0IyBzdWJkaXZpZGVcblx0XHRcdFx0XHR3aGlsZSBtIDwgZFxuXHRcdFx0XHRcdFx0cHQgPSBnZXRGb2xsb3dlZFBhdGgobSwgYSwgYilcblx0XHRcdFx0XHRcdHJhd1B0cy5wdXNoKCBwdCApXG5cdFx0XHRcdFx0XHRtICs9IEBzdGVwXG5cblx0XHRcdFx0XHRyID0gQHN0ZXAgLSAobSAtIGQpXG5cblx0XHRcdCMgZml0IGJvdW5kIGFuZCBhZGQgcG9seWxpbmVcblx0XHRcdEBtYXAuZml0Qm91bmRzKCByb3V0ZS5ib3VuZHMgKVxuXG5cdFx0XHRHU1ZIeXBlcmxhcHNlLm9uTWVzc2FnZS5jYWxsIEAsIFwibnVtYmVyIG9mIHdheXBvaW50czogI3tyYXdQdHMubGVuZ3RofVwiXG5cblx0XHRcdCMgbmV4dFxuXHRcdFx0cmV0cml2ZVBhbm9EYXRhKClcblxuXHRcdCMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHQjIDMuIHJldHJpdmUgcGFubyBkYXRhIGFuZCBzcGxpY2UgZHVwbGljYXRlZCBpZFxuXHRcdHJldHJpdmVQYW5vRGF0YSA9ID0+XG5cdFx0XHRHU1ZIeXBlcmxhcHNlLm9uTWVzc2FnZS5jYWxsIEAsIFwicmV0cml2aW5nIHBhbm8gaWQuLlwiXG5cblx0XHRcdGlkeCA9IDBcblxuXHRcdFx0b25Mb2FkID0gKHJlcywgc3RhdHVzKSA9PlxuXHRcdFx0XHRpZiBAYkNhbmNlbFxuXHRcdFx0XHRcdEdTVkh5cGVybGFwc2Uub25DYW5jZWwuY2FsbCBAXG5cdFx0XHRcdFx0cmV0dXJuXG5cblx0XHRcdFx0aWYgc3RhdHVzID09IGdvb2dsZS5tYXBzLlN0cmVldFZpZXdTdGF0dXMuT0tcblxuXG5cdFx0XHRcdFx0cGFubyA9IEBjcmVhdGVQYW5vRGF0YShyZXMpXG5cblx0XHRcdFx0XHRpZiBwYW5vLmlkICE9IHByZXZJZFxuXHRcdFx0XHRcdFx0QHBhbm9MaXN0LnB1c2goIHBhbm8gKVxuXHRcdFx0XHRcdFx0bWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlclxuXHRcdFx0XHRcdFx0XHRwb3NpdGlvbjogcGFuby5sYXRMbmdcblx0XHRcdFx0XHRcdFx0bWFwOiBAbWFwXG5cdFx0XHRcdFx0XHRcdHRpdGxlOiBcIiN7aWR4fVwiXG5cblx0XHRcdFx0XHRcdHByZXZJZCA9IHBhbm8uaWRcblxuXHRcdFx0XHRHU1ZIeXBlcmxhcHNlLm9uUHJvZ3Jlc3MuY2FsbCBALCBpZHgsIHJhd1B0cy5sZW5ndGhcblxuXHRcdFx0XHRpZiArK2lkeCA8IHJhd1B0cy5sZW5ndGhcblx0XHRcdFx0XHQjIG5leHRcblx0XHRcdFx0XHRAY2xpZW50LmdldFBhbm9yYW1hQnlMb2NhdGlvbihyYXdQdHNbaWR4XSwgQHNlYXJjaFJhZGl1cywgb25Mb2FkKVxuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0IyBlbmRcblx0XHRcdFx0XHRjb25zb2xlLmxvZyBAcGFub0xpc3Rcblx0XHRcdFx0XHRAYldhaXRpbmcgPSBmYWxzZVxuXHRcdFx0XHRcdEdTVkh5cGVybGFwc2Uub25NZXNzYWdlLmNhbGwgQCwgXCJ0b3RhbCBwYW5vIGlkOiAje0BwYW5vTGlzdC5sZW5ndGh9XCJcblx0XHRcdFx0XHRHU1ZIeXBlcmxhcHNlLm9uUHJvZ3Jlc3MuY2FsbCBALCBpZHgsIHJhd1B0cy5sZW5ndGhcblx0XHRcdFx0XHRHU1ZIeXBlcmxhcHNlLm9uQW5hbHl6ZUNvbXBsZXRlLmNhbGwgQFxuXG5cdFx0XHQjIGluaXQgR1NWUGFub1xuXHRcdFx0QGJXYWl0aW5nID0gdHJ1ZVxuXHRcdFx0cHJldklkID0gJydcblx0XHRcdEBjbGllbnQuZ2V0UGFub3JhbWFCeUxvY2F0aW9uKHJhd1B0c1tpZHhdLCBAc2VhcmNoUmFkaXVzLCBvbkxvYWQpXG5cblx0XHQjIHRyaWdnZXJcblx0XHRyZXF1ZXN0Um91dGUoKVxuXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0Y3JlYXRlRnJvbVBhbm9JZDogKGxpc3QpIC0+XG5cblx0XHRpZHggPSAwXG5cblx0XHRHU1ZIeXBlcmxhcHNlLm9uTWVzc2FnZS5jYWxsIEAsIFwic3RhcnQgY29tcG9zZS4uXCJcblx0XHRHU1ZIeXBlcmxhcHNlLm9uTWVzc2FnZS5jYWxsIEAsIFwiZWFkaW5nTW9kZToje0BoZWFkaW5nTW9kZX1cIlxuXG5cdFx0b25Mb2FkID0gKHJlcywgc3RhdHVzKT0+XG5cdFx0XHRpZiBpZHggPT0gMFxuXHRcdFx0XHRHU1ZIeXBlcmxhcHNlLm9uTWVzc2FnZS5jYWxsIEAsIFwiYW5hbHl6aW5nLi5cIlx0XG5cblx0XHRcdGlmIHN0YXR1cyA9PSBnb29nbGUubWFwcy5TdHJlZXRWaWV3U3RhdHVzLk9LXG5cdFx0XHRcdGlmIEBiQ2FuY2VsXG5cdFx0XHRcdFx0R1NWSHlwZXJsYXBzZS5vbkNhbmNlbC5jYWxsIEBcblx0XHRcdFx0XHRyZXR1cm5cblxuXHRcdFx0XHRwYW5vID0gQGNyZWF0ZVBhbm9EYXRhKCByZXMgKVxuXHRcdFx0XHRAcGFub0xpc3QucHVzaCggcGFubyApXG5cblx0XHRcdFx0aWYgaWR4ID09IDBcblx0XHRcdFx0XHRAbWFwLnNldENlbnRlciggcGFuby5sYXRMbmcgKVxuXHRcdFx0XHRcdEBtYXAuc2V0Wm9vbSggMTMgKVxuXG5cdFx0XHRcdG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXJcblx0XHRcdFx0XHRwb3NpdGlvbjogcGFuby5sYXRMbmdcblx0XHRcdFx0XHRtYXA6IEBtYXBcblx0XHRcdFx0XHR0aXRsZTogXCIje2lkeH1cIlxuXG5cdFx0XHRcdEdTVkh5cGVybGFwc2Uub25Qcm9ncmVzcy5jYWxsIEAsIGlkeCwgbGlzdC5sZW5ndGhcblxuXHRcdFx0XHRpZiArK2lkeCA8IGxpc3QubGVuZ3RoXG5cdFx0XHRcdFx0IyBuZXh0XG5cdFx0XHRcdFx0QGNsaWVudC5nZXRQYW5vcmFtYUJ5SWQobGlzdFtpZHhdLCBvbkxvYWQpXG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHQjIGVuZFxuXHRcdFx0XHRcdEBiV2FpdGluZyA9IGZhbHNlXG5cdFx0XHRcdFx0R1NWSHlwZXJsYXBzZS5vbk1lc3NhZ2UuY2FsbCBALCBcInRvdGFsIHBhbm8gaWQ6ICN7QHBhbm9MaXN0Lmxlbmd0aH1cIlxuXHRcdFx0XHRcdEdTVkh5cGVybGFwc2Uub25Qcm9ncmVzcy5jYWxsIEAsIGlkeCwgbGlzdC5sZW5ndGhcblx0XHRcdFx0XHRHU1ZIeXBlcmxhcHNlLm9uQW5hbHl6ZUNvbXBsZXRlLmNhbGwgQFxuXHRcdFx0XG5cdFx0XHRlbHNlXG5cdFx0XHRcdGFsZXJ0IFwiZXJyb3Igb24gY3JlYXRlRnJvbVBhbm9JZCgpIDogI3tzdGF0dXN9XCJcblxuXHRcdCMgdHJpZ2dlclxuXG5cdFx0QGJXYWl0aW5nID0gdHJ1ZVxuXHRcdEBjbGllbnQuZ2V0UGFub3JhbWFCeUlkKGxpc3RbaWR4XSwgb25Mb2FkKVxuXG5cdCMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0Y29tcG9zZTogKGNhbGxiYWNrKS0+XG5cblx0XHRpZiBAcGFub0xpc3QubGVuZ3RoID09IDBcblx0XHRcdEdTVkh5cGVybGFwc2Uub25NZXNzYWdlLmNhbGwgQCwgXCJ0aGVyZSBpcyBubyBwYW5vIGlkLlwiXG5cdFx0XHRyZXR1cm5cblxuXHRcdEdTVkh5cGVybGFwc2Uub25NZXNzYWdlLmNhbGwgQCwgXCJjb21wb3NpbmcgcGFub3JhbWEuLiBzaXplOiN7QGdzdnAud2lkdGh9eCN7QGdzdnAuaGVpZ2h0fVwiXG5cblx0XHRpZiBAaGVhZGluZ01vZGUgPT0gR1NWSHlwZXJsYXBzZUhlYWRpbmcuQkFDS1dBUkQgfHwgQGhlYWRpbmdNb2RlID09IEdTVkh5cGVybGFwc2VIZWFkaW5nLkJFR0lOXG5cdFx0XHRpZiBAcGFub0xpc3QubGVuZ3RoIDwgMlxuXHRcdFx0XHRhbGVydCBcInBhbm8gaWQncyBsZW5ndGggbXVzdCBiZSAyIGF0IGxlYXN0XCJcblx0XHRcdFx0cmV0dXJuXG5cblx0XHRsb2FkUGFub3JhbWEgPSA9PlxuXHRcdFx0IyBjYWxjIHJvdGF0aW9uXG5cdFx0XHRpZiAhKEBwYW5vTGlzdFtpZHhdLmhlYWRpbmc/KVxuXHRcdFx0XHRoID0gMFxuXHRcdFx0XHRpZiBAaGVhZGluZ01vZGUgPT0gR1NWSHlwZXJsYXBzZUhlYWRpbmcuQkFDS1dBUkRcblx0XHRcdFx0XHRpID0gaWYgaWR4ID09IDAgdGhlbiAxIGVsc2UgaWR4XG5cdFx0XHRcdFx0aCA9IGdvb2dsZS5tYXBzLmdlb21ldHJ5LnNwaGVyaWNhbC5jb21wdXRlSGVhZGluZyhcblx0XHRcdFx0XHRcdEBwYW5vTGlzdFtpXS5sYXRMbmcsIEBwYW5vTGlzdFtpLTFdLmxhdExuZyApXG5cblx0XHRcdFx0ZWxzZSBpZiBAaGVhZGluZ01vZGUgPT0gR1NWSHlwZXJsYXBzZUhlYWRpbmcuTE9PS0FUXG5cdFx0XHRcdFx0aCA9IGdvb2dsZS5tYXBzLmdlb21ldHJ5LnNwaGVyaWNhbC5jb21wdXRlSGVhZGluZyhcblx0XHRcdFx0XHRcdEBwYW5vTGlzdFtpZHhdLmxhdExuZywgQGxvb2thdClcblxuXHRcdFx0XHRlbHNlIGlmIEBoZWFkaW5nTW9kZSA9PSBHU1ZIeXBlcmxhcHNlSGVhZGluZy5CRUdJTlxuXHRcdFx0XHRcdGggPSBnb29nbGUubWFwcy5nZW9tZXRyeS5zcGhlcmljYWwuY29tcHV0ZUhlYWRpbmcoXG5cdFx0XHRcdFx0XHRAcGFub0xpc3RbMV0ubGF0TG5nLCBAcGFub0xpc3RbMF0ubGF0TG5nKVxuXG5cdFx0XHRcdEBwYW5vTGlzdFtpZHhdLmhlYWRpbmcgPSBoXG5cblx0XHRcdFx0QGdzdnAuY29tcG9zZVBhbm9yYW1hKCBAcGFub0xpc3RbaWR4XS5pZCwgQHBhbm9MaXN0W2lkeF0uaGVhZGluZylcblxuXHRcdG9uQ29tcG9zZSA9ID0+XG5cblx0XHRcdGlmIEBiQ2FuY2VsXG5cdFx0XHRcdEdTVkh5cGVybGFwc2Uub25DYW5jZWwuY2FsbCBAXG5cdFx0XHRcdHJldHVyblxuXHRcdFx0XHRcblx0XHRcdCMgZXZlbnRcblx0XHRcdEdTVkh5cGVybGFwc2Uub25Qcm9ncmVzcy5jYWxsIEAsIGlkeCwgQHBhbm9MaXN0Lmxlbmd0aFxuXHRcdFx0R1NWSHlwZXJsYXBzZS5vblBhbm9yYW1hTG9hZC5jYWxsIEAsIGlkeCwgQGdzdnAuY2FudmFzLCBAcGFub0xpc3RbaWR4XVxuXG5cdFx0XHQjIG5leHRcblx0XHRcdGlmICsraWR4IDwgQHBhbm9MaXN0Lmxlbmd0aFxuXHRcdFx0XHRsb2FkUGFub3JhbWEoKVxuXHRcdFx0ZWxzZVxuXHRcdFx0XHRAYldhaXRpbmcgPSBmYWxzZVxuXHRcdFx0XHRjb25zb2xlLmxvZyBcImNvbXBsZXRlXCJcblx0XHRcdFx0R1NWSHlwZXJsYXBzZS5vblByb2dyZXNzLmNhbGwgQCwgaWR4LCBAcGFub0xpc3QubGVuZ3RoXG5cdFx0XHRcdEdTVkh5cGVybGFwc2Uub25NZXNzYWdlLmNhbGwgQCwgXCJjb21wbGV0ZSAtIHRvdGFsOiAje0BwYW5vTGlzdC5sZW5ndGh9LCBkdXJhdGlvbjogI3tAcGFub0xpc3QubGVuZ3RoIC8gMjR9XCJcblx0XHRcdFx0R1NWSHlwZXJsYXBzZS5vbkNvbXBvc2VDb21wbGV0ZS5jYWxsIEBcblx0XHRcdFx0aWYgY2FsbGJhY2s/XG5cdFx0XHRcdFx0Y2FsbGJhY2soKVxuXG5cdFx0IyB0cmlnZ2VyXG5cdFx0QGdzdnAub25QYW5vcmFtYUxvYWQgPSBvbkNvbXBvc2Vcblx0XHRAZ3N2cC5vbkVycm9yID0gKG1zZykgLT5cblx0XHRcdGFsZXJ0IFwiZXJyb3Igb25Db21wb3NlKCkgOiAje21zZ31cIlxuXHRcdEBnc3ZwLm9uTm9QYW5vcmFtYURhdGEgPSAoc3RhdHVzKSAtPlxuXHRcdFx0YWxlcnQgXCJlcnJvciBvbk5vUGFub3JhbWFEYXRhKCkgOiAje3N0YXR1c31cIlxuXHRcblx0XHRpZHggPSAwXG5cdFx0QGJXYWl0aW5nID0gdHJ1ZVxuXG5cdFx0bG9hZFBhbm9yYW1hKClcblxuIl19